<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Primary SEO (Bilaad-style) -->
  <title>AMADA REALTY - Global Estate</title>
  <meta name="title" content="AMADA REALTY - Global Estate" />
  <meta name="description" content="Welcome to The Amada Advantage. Our homes are designed for more than just today — blending timeless architecture with private-city amenities. Explore The City, select an Asset, and request your PR Card dossier." />
  <meta name="robots" content="index,follow" />
  <meta name="keywords" content="Amada Realty, luxury estate, gated community, private city, premium real estate, Nigeria luxury homes, sustainable communities, masterplan, estate assets" />
  <meta name="theme-color" content="#0f172a" />
  <link rel="canonical" href="https://amadarealty.com/" />

  <!-- Social (Open Graph / Twitter) -->
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Amada Realty" />
  <meta property="og:title" content="AMADA REALTY - Global Estate" />
  <meta property="og:description" content="A private-city estate with curated territories and elite amenities. Select an Asset on the master layout and request your PR Card dossier." />
  <meta property="og:url" content="https://amadarealty.com/" />
  <meta property="og:image" content="amada-masterplan-estate-aerial.png" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="AMADA REALTY - Global Estate" />
  <meta name="twitter:description" content="Select an Asset on the master layout and request your PR Card dossier." />
  <meta name="twitter:image" content="amada-masterplan-estate-aerial.png" />

  <!-- Favicon (inline SVG) -->
  <link rel="icon" type="image/svg+xml"
        href='data:image/svg+xml;utf8,
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128">
          <defs>
            <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="%230f172a"/>
              <stop offset="1" stop-color="%23334155"/>
            </linearGradient>
          </defs>
          <rect width="128" height="128" rx="28" fill="url(%23g)"/>
          <path d="M64 18l30 26-12 48H46L34 44 64 18z" fill="%23ffffff" opacity="0.95"/>
          <path d="M64 18l30 26H34L64 18z" fill="%23ffffff" opacity="0.65"/>
          <path d="M46 92h36l-18 18-18-18z" fill="%23ffffff" opacity="0.85"/>
        </svg>'/>

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Cormorant+Garamond:wght@300;400;600&family=Plus+Jakarta+Sans:wght@200;300;400;500;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --glass-border: rgba(255,255,255,.42);
      --glass-shadow: 0 10px 30px rgba(15,23,42,.06);
    }
    body{
      font-family:'Plus Jakarta Sans',sans-serif;
      background:#f8fafc;
      color:#0f172a;
      overflow-x:hidden;
    }
    h1,h2,h3,h4,.serif{font-family:'Cormorant Garamond',serif;}

    /* SPA pages */
    .page{display:none;}
    .page.active{display:block;}

    /* Ambient background */
    .ambient-bg{
      position:fixed; inset:0;
      z-index:-1;
      background:
        radial-gradient(circle at 20% 20%, rgba(224,242,254,0.9), transparent 55%),
        radial-gradient(circle at 80% 30%, rgba(240,253,244,0.85), transparent 60%),
        radial-gradient(circle at 50% 80%, rgba(253,244,255,0.85), transparent 55%),
        linear-gradient(#ffffff, #f1f5f9);
      overflow:hidden;
    }
    .orb{
      position:absolute; border-radius:50%;
      filter:blur(90px);
      opacity:.55;
      animation:float 18s infinite ease-in-out;
    }
    .orb-1{width:520px;height:520px;background:#e0f2fe;top:-12%;left:-10%;animation-delay:0s;}
    .orb-2{width:460px;height:460px;background:#f0fdf4;bottom:-10%;right:-10%;animation-delay:-4s;}
    .orb-3{width:360px;height:360px;background:#fdf4ff;top:42%;left:44%;animation-delay:-8s;}
    @keyframes float{0%,100%{transform:translate(0,0);}50%{transform:translate(26px,-40px);}}

    /* Glass */
    .glass-panel{
      background:rgba(255,255,255,.68);
      backdrop-filter:blur(16px);
      -webkit-backdrop-filter:blur(16px);
      border:1px solid var(--glass-border);
      box-shadow:var(--glass-shadow);
    }
    .glass-card{
      background:rgba(255,255,255,.45);
      backdrop-filter:blur(10px);
      -webkit-backdrop-filter:blur(10px);
      border:1px solid rgba(255,255,255,.55);
      transition:transform .2s ease, box-shadow .2s ease, background .2s ease, border-color .2s ease;
    }
    .glass-card:hover{
      background:rgba(255,255,255,.9);
      transform:translateY(-3px);
      box-shadow:0 18px 40px rgba(15,23,42,.08);
      border-color:rgba(255,255,255,.9);
    }

    /* 3D Flip Box (Elementor-style: slow + eased + floating content) */
    :root{
      --flip-dur: 1.5s;
      --flip-ease: cubic-bezier(0.19, 1, 0.22, 1);
      --flip-radius: 24px;
      --flip-gold: #d4af37;
    }
    .flip-box{
      position:relative;
      height:clamp(280px, 26vw, 360px);
      min-height:280px;
      perspective:1200px;
      perspective-origin:50% 50%;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color:transparent;
      outline:none;
    }
    .flip-box-inner{
      position:relative;
      width:100%;
      height:100%;
      min-height:inherit;
      transform-style:preserve-3d;
      -webkit-transform-style:preserve-3d;
      transition:transform var(--flip-dur) var(--flip-ease);
      will-change:transform;
    }
    .flip-face{
      position:absolute;
      inset:0;
      transform-style:preserve-3d;
      -webkit-transform-style:preserve-3d;
      backface-visibility:hidden;
      -webkit-backface-visibility:hidden;
      -webkit-font-smoothing:antialiased;
    }
    .flip-front{ transform:rotateY(0deg); z-index:2; }
    .flip-back{ transform:rotateY(180deg); z-index:1; }

    /* The background plane: handles rounded corners + clipping */
    .flip-bg{
      position:absolute;
      inset:0;
      border-radius:var(--flip-radius);
      overflow:hidden;
      border:1px solid rgba(148,163,184,.32);
      box-shadow:0 22px 50px rgba(2,6,23,.14);
      transform:translateZ(-1px);
      background:linear-gradient(180deg, rgba(15,23,42,.88), rgba(15,23,42,.70));
    }
    .flip-bg::before{
      content:"";
      position:absolute;
      inset:0;
      background-image:var(--flip-bg-image, none);
      background-size:cover;
      background-position:center;
      transform:scale(1.03);
      filter:saturate(1.06) contrast(1.03);
    }
    .flip-bg::after{
      content:"";
      position:absolute;
      inset:0;
      background:linear-gradient(180deg, rgba(2,6,23,.15), rgba(2,6,23,.55));
      transition:opacity .45s ease;
      opacity:.7;
    }
    .flip-back .flip-bg{
      background:linear-gradient(180deg, rgba(2,6,23,.92), rgba(2,6,23,.78));
      border:1px solid rgba(255,255,255,.12);
    }
    .flip-back .flip-bg::before{ background-image:none; filter:none; transform:none; }

    /* Card images (front faces) */
    .flip-bg.bg-1{ --flip-bg-image: url('amada-masterplan-estate-aerial.png'); }
    .flip-bg.bg-2{ --flip-bg-image: url('amada-modern-villas-street.png'); }
    .flip-bg.bg-3{ --flip-bg-image: url('amada-resort-lagoon-pool.png'); }

    /* The content plane: floats above the background */
    .flip-content{
      position:absolute;
      inset:0;
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      gap:12px;
      padding:26px;
      text-align:center;
      transform-style:preserve-3d;
      -webkit-transform-style:preserve-3d;
      transform:translateZ(36px);
    }
    .flip-kicker{
      font-size:10px;
      letter-spacing:.18em;
      text-transform:uppercase;
      font-weight:900;
      color:rgba(226,232,240,.80);
      transform:translateZ(44px);
      text-shadow:0 12px 26px rgba(0,0,0,.55);
    }
    .flip-title{
      margin:0;
      font-family:'Cormorant Garamond',serif;
      font-size:30px;
      line-height:1.05;
      font-weight:900;
      text-transform:uppercase;
      color:var(--flip-gold);
      transform:translateZ(74px);
      text-shadow:0 18px 46px rgba(0,0,0,.75);
    }
    .flip-desc{
      margin:0;
      font-size:15px;
      line-height:1.7;
      font-weight:500;
      color:rgba(241,245,249,.92);
      transform:translateZ(44px);
      text-shadow:0 10px 24px rgba(0,0,0,.55);
    }
    .flip-back .flip-title{
      color:#fff;
      transform:translateZ(62px);
    }
    .flip-back .flip-desc{
      color:rgba(203,213,225,.90);
      font-size:14px;
    }

    /* Flip triggers */
    @media (hover:hover) and (pointer:fine){
      .flip-box:hover .flip-box-inner{ transform:rotateY(-180deg); }
      .flip-box:hover .flip-front .flip-bg::after{ opacity:.9; }
    }
    .flip-box:focus-visible .flip-box-inner{ transform:rotateY(-180deg); }
    @media (hover:none), (pointer:coarse){
      .flip-box.is-flipped .flip-box-inner{ transform:rotateY(-180deg); }
    }

    .flip-box:focus-visible{ box-shadow:0 0 0 4px rgba(15,23,42,.18); border-radius:var(--flip-radius); }
    @media (prefers-reduced-motion: reduce){
      .flip-box-inner{ transition:none; transform:none !important; }
      .flip-back{ display:none; }
    }

    /* Modals */
    .modal-overlay{opacity:0;pointer-events:none;transition:opacity .22s ease;}
    .modal-overlay.open{opacity:1;pointer-events:all;}
    .modal-content{transform:translateY(14px);transition:transform .22s ease;}
    .modal-overlay.open .modal-content{transform:translateY(0);}

    /* Marquee */
    .marquee-container{overflow:hidden;white-space:nowrap;}
    .marquee-content{display:inline-block;animation:scroll 28s linear infinite;}
    @keyframes scroll{0%{transform:translateX(0);}100%{transform:translateX(-50%);}}

    /* Reveal */
    .reveal{
      opacity:0;
      transform:translate3d(0,22px,0) scale(.985);
      filter:blur(10px);
      transition:
        opacity .9s cubic-bezier(.2,.7,.15,1),
        transform .9s cubic-bezier(.2,.7,.15,1),
        filter .9s cubic-bezier(.2,.7,.15,1);
      will-change:opacity, transform, filter;
    }
    .reveal.active{
      opacity:1;
      transform:translate3d(0,0,0) scale(1);
      filter:blur(0);
    }
    @media (prefers-reduced-motion: reduce){
      .reveal{transition:none; transform:none; filter:none; opacity:1;}
      .reveal.active{transform:none; filter:none;}
    }

    /* Tooltip */
	    .tip{
	      position:absolute;
	      z-index:30;
	      padding:8px 12px;
	      border-radius:16px;
	      background:rgba(15,23,42,.94);
	      color:#fff;
	      font-size:11px;
	      letter-spacing:.16em;
	      text-transform:uppercase;
	      pointer-events:none;
	      box-shadow:0 26px 60px rgba(2,6,23,.25);
	      white-space:nowrap;
	    }

	    /* Timeline (homepage positioning) */
	    .timeline{
	      position:relative;
	      padding-left:0;
	      display:flex;
	      flex-direction:column;
	      gap:16px;
	    }
	    .timeline:before{
	      content:"";
	      position:absolute;
	      display:none;
	    }
	    .timeline-item{
	      position:relative;
	    }
	    .timeline-dot{
	      position:absolute;
	      display:none;
	    }
	    .timeline-item.reveal{
	      opacity:0;
	      transform:translate3d(-26px,0,0);
	      transition:opacity .85s ease, transform .85s ease, filter .85s ease;
	      will-change:opacity, transform, filter;
	    }
	    .timeline-item.reveal:nth-child(even){
	      transform:translate3d(26px,0,0);
	    }
	    .timeline-item.reveal.active{
	      opacity:1;
	      transform:translate3d(0,0,0);
	    }
	    @media (min-width: 1024px){
	      .timeline-item.reveal{
	        transform:translate3d(0,22px,0);
	      }
	      .timeline-item.reveal.active{
	        transform:translate3d(0,0,0);
	      }
	    }
	    .timeline-row{display:block;}
	    .timeline-slab{
	      display:flex;
	      gap:16px;
	      align-items:flex-start;
	    }
	    .timeline-body{flex:1; min-width:0;}
	    .timeline-media{
	      position:relative;
	      flex:0 0 240px;
	      height:150px;
	      border-radius:18px;
	      overflow:hidden;
	      border:1px solid rgba(226,232,240,.85);
	      background:rgba(255,255,255,.55);
	      box-shadow:0 18px 40px rgba(2,6,23,.06);
	      transform:translateZ(0);
	    }
	    .timeline-media img{
	      position:absolute;
	      inset:0;
	      width:100%;
	      height:100%;
	      object-fit:cover;
	      filter:saturate(1.03) contrast(1.02);
	      transform:scale(1.02);
	      transition:transform 700ms ease, filter 700ms ease;
	    }
	    .timeline-item:hover .timeline-media img{
	      transform:scale(1.08);
	      filter:saturate(1.08) contrast(1.06);
	    }
	    .timeline-media:after{
	      content:"";
	      position:absolute;
	      inset:0;
	      background:
	        radial-gradient(circle at 35% 20%, rgba(255,255,255,.14), rgba(0,0,0,0) 55%),
	        linear-gradient(180deg, rgba(2,6,23,.00) 0%, rgba(2,6,23,.42) 100%);
	      pointer-events:none;
	    }
	    .timeline-tag{
	      position:absolute;
	      left:14px;
	      bottom:12px;
	      z-index:2;
	      padding:7px 10px;
	      border-radius:999px;
	      background:rgba(15,23,42,.82);
	      color:white;
	      font-size:10px;
	      font-weight:800;
	      letter-spacing:.18em;
	      text-transform:uppercase;
	      border:1px solid rgba(255,255,255,.18);
	      box-shadow:0 10px 25px rgba(2,6,23,.18);
	    }
	    @media (max-width: 1023px){
	      .timeline-slab{flex-direction:column;}
	      .timeline-media{flex:0 0 auto; width:100%; height:170px;}
	    }
	    @media (min-width: 1024px){
	      .timeline{
	        padding-left:0;
	      }
	      .timeline-item{
	        width:min(1040px, 92%);
	      }
	      .timeline-item:nth-child(odd){ align-self:flex-start; }
	      .timeline-item:nth-child(even){ align-self:flex-end; }

	      .timeline-item:nth-child(even) .timeline-slab{ flex-direction:row-reverse; }
	    }

		    /* Hero background (crossfade) */
			    .hero-bg{
			      position:absolute; inset:0;
			      background-size:cover;
		      background-position:center;
		      z-index:-2;
		      opacity:0;
		      transition:opacity 900ms ease;
		    }
		    .hero-bg.on{opacity:1;}
		    .hero-vignette{
	      display:none;
	    }
	    .hero{
	      position:relative;
	      isolation:isolate;
	    }
	    .hero:after{
	      content:"";
	      position:absolute;
	      inset:0;
	      z-index:0;
	      pointer-events:none;
	      background: radial-gradient(
	        60% 55% at 50% 45%,
	        rgba(5,10,20,0.62) 0%,
	        rgba(5,10,20,0.30) 35%,
	        rgba(5,10,20,0.00) 70%
	      );
	    }
	    .hero-content{
	      position:relative;
	      z-index:1;
	      color:#f8fafc;
	      text-shadow:0 8px 24px rgba(0,0,0,0.45);
	    }

	    /* Estate mini layout (3D-ish) */
	    .estate-canvas{
      position:relative;
      border-radius:18px;
      overflow:hidden;
      border:1px solid rgba(148,163,184,.35);
      background:
        radial-gradient(circle at 20% 30%, rgba(34,197,94,.18), transparent 55%),
        radial-gradient(circle at 70% 40%, rgba(34,197,94,.12), transparent 60%),
        linear-gradient(180deg, rgba(6,95,70,.14), rgba(34,197,94,.06));
    }
    .estate-inner{
      position:absolute; inset:0;
      background:
        repeating-linear-gradient(45deg, rgba(255,255,255,.02) 0 8px, rgba(0,0,0,.02) 8px 16px);
      mix-blend-mode:overlay;
      pointer-events:none;
    }

    /* Road */
    .estate-road{
      border-radius:14px;
      background:
        linear-gradient(180deg, rgba(15,23,42,.9), rgba(15,23,42,.78));
      box-shadow:
        inset 0 0 0 1px rgba(255,255,255,.08),
        0 10px 18px rgba(2,6,23,.08);
      position:relative;
    }
    .estate-road:before{
      content:"";
      position:absolute; inset:10px 45%;
      border-left:2px dashed rgba(255,255,255,.22);
      border-right:2px dashed rgba(255,255,255,.10);
      border-radius:999px;
      opacity:.9;
    }

    /* Territory band */
    .band{
      border-radius:16px;
      overflow:hidden;
      border:1px solid rgba(148,163,184,.35);
      background:
        linear-gradient(180deg, rgba(15,118,110,.10), rgba(2,132,199,.06));
      box-shadow:0 10px 18px rgba(2,6,23,.04);
    }
    .band-title{
      background:rgba(15,23,42,.72);
      color:white;
      font-size:11px;
      letter-spacing:.18em;
      text-transform:uppercase;
      padding:10px 12px;
      font-weight:700;
      text-align:center;
    }
    .lots{
      padding:10px;
      background:
        linear-gradient(180deg, rgba(2,132,199,.14), rgba(2,132,199,.08));
    }

    /* Unit square (tiny, fast) */
    .unit{
      width:24px; height:24px;
      border-radius:8px;
      border:1px solid rgba(255,255,255,.7);
      box-shadow:
        0 6px 10px rgba(2,6,23,.06),
        inset 0 1px 0 rgba(255,255,255,.35);
      position:relative;
      transform:translateZ(0);
      transition:transform .12s ease, opacity .12s ease, box-shadow .12s ease;
    }
    .unit:hover{transform:translateY(-1px);opacity:.98;box-shadow:0 10px 18px rgba(2,6,23,.12), inset 0 1px 0 rgba(255,255,255,.38);}
    .unit:focus{outline:none; box-shadow:0 0 0 3px rgba(15,23,42,.18), 0 10px 18px rgba(2,6,23,.10), inset 0 1px 0 rgba(255,255,255,.38);}
    .unit:after{
      content:"";
      position:absolute; left:5px; top:5px;
      width:14px; height:14px;
      background:rgba(255,255,255,.22);
      clip-path:polygon(50% 0, 100% 38%, 100% 100%, 0 100%, 0 38%);
      border-radius:3px;
      opacity:.75;
      pointer-events:none;
    }
    .lot-unit{
      width:24px;
      height:38px;
      border-radius:11px;
    }
    .lot-unit:after{
      left:6px;
      top:7px;
      width:12px;
      height:12px;
      opacity:.55;
    }
    .villa-unit{
      width:56px;
      height:56px;
      border-radius:18px;
      border-width:2px;
      box-shadow:
        0 14px 26px rgba(2,6,23,.10),
        inset 0 1px 0 rgba(255,255,255,.38);
    }
    .villa-unit:after{
      left:10px; top:10px;
      width:36px; height:36px;
      opacity:.55;
      border-radius:8px;
    }
    .presidential{
      border-color: rgba(245,158,11,.85) !important;
      box-shadow:
        0 16px 30px rgba(2,6,23,.14),
        0 0 0 3px rgba(245,158,11,.18),
        inset 0 1px 0 rgba(255,255,255,.45);
    }
    .presidential:before{
      content:"";
      position:absolute;
      inset:-2px;
      border-radius:20px;
      background:
        radial-gradient(circle at 30% 25%, rgba(255,255,255,.35), transparent 55%),
        radial-gradient(circle at 70% 70%, rgba(245,158,11,.22), transparent 55%),
        repeating-linear-gradient(45deg, rgba(255,255,255,.10) 0 10px, rgba(0,0,0,.02) 10px 20px);
      opacity:.75;
      pointer-events:none;
    }

    /* Street plan inside each territory */
    .street-plan{
      border-radius:18px;
      border:1px solid rgba(226,232,240,.8);
      background:rgba(255,255,255,.35);
      padding:12px;
    }
    .street-block{
      border-radius:18px;
      overflow:hidden;
      border:1px solid rgba(148,163,184,.35);
      background:
        radial-gradient(circle at 20% 30%, rgba(34,197,94,.14), transparent 60%),
        linear-gradient(180deg, rgba(2,132,199,.10), rgba(2,132,199,.06));
      box-shadow:0 10px 18px rgba(2,6,23,.04);
      position:relative;
    }
    .street-body{
      padding:12px;
    }
    .street-grid{
      display:grid;
      grid-template-columns: 72px 1fr;
      gap:12px;
      align-items:stretch;
    }
    .street-villa{
      border-radius:18px;
      background:rgba(255,255,255,.35);
      border:1px solid rgba(148,163,184,.28);
      display:flex;
      align-items:center;
      justify-content:center;
      position:relative;
      overflow:hidden;
      z-index:2;
    }
    .street-villa > button{ position:relative; z-index:2; }
    .street-villa:before{
      content:"";
      position:absolute;
      inset:0;
      background:
        radial-gradient(circle at 40% 30%, rgba(255,255,255,.16), transparent 60%),
        repeating-linear-gradient(45deg, rgba(255,255,255,.05) 0 10px, rgba(0,0,0,.02) 10px 20px);
      opacity:.9;
      pointer-events:none;
    }
    .street-villa > *{ position:relative; }

    .street-lots{
      border-radius:18px;
      background:rgba(255,255,255,.30);
      border:1px solid rgba(148,163,184,.28);
      overflow:visible;
    }
    .street-row{
      display:grid;
      gap:6px;
      justify-content:center;
      align-content:center;
      padding:10px 8px;
    }
    .street-road-h{
      height:28px;
      background:linear-gradient(180deg, rgba(15,23,42,.92), rgba(15,23,42,.78));
      position:relative;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.08);
      overflow:visible;
      z-index:1;
    }
    .street-road-ext{
      position:absolute;
      left:-14px;
      top:0;
      bottom:0;
      width:84px;
      border-radius:14px;
      background:linear-gradient(180deg, rgba(15,23,42,.92), rgba(15,23,42,.78));
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.08);
      z-index:0;
    }
    .street-road-label{
      position:absolute;
      left:50%;
      top:50%;
      transform:translate(-50%,-50%);
      padding:7px 12px;
      border-radius:999px;
      background:rgba(255,255,255,.14);
      border:1px solid rgba(255,255,255,.18);
      color:rgba(255,255,255,.92);
      font-size:10px;
      font-weight:900;
      letter-spacing:.22em;
      text-transform:uppercase;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      pointer-events:none;
      white-space:nowrap;
      z-index:3;
    }
    .street-road-h:before{
      content:"";
      position:absolute;
      left:-68px; right:10px;
      top:50%;
      transform:translateY(-50%);
      border-top:2px dashed rgba(255,255,255,.22);
      opacity:.95;
      z-index:1;
    }
    .street-road-h:after{
      content:"";
      position:absolute;
      left:-14px;
      top:50%;
      transform:translateY(-50%);
      width:46px;
      height:46px;
      border-radius:50%;
      background:linear-gradient(180deg, rgba(15,23,42,.99), rgba(15,23,42,.99));
      box-shadow:
        inset 0 0 0 1px rgba(255,255,255,.10),
        0 12px 22px rgba(2,6,23,.12);
      z-index:2;
      pointer-events:none;
    }

    /* Amenity stack */
    .amenity{
      border-radius:16px;
      border:1px solid rgba(148,163,184,.35);
      background:rgba(255,255,255,.55);
      box-shadow:0 10px 18px rgba(2,6,23,.05);
      overflow:hidden;
    }
    .amenity-pill{
      border-radius:999px;
      background:rgba(15,23,42,.90);
      color:white;
      font-size:11px;
      letter-spacing:.18em;
      text-transform:uppercase;
      font-weight:800;
      padding:14px 12px;
      text-align:center;
      box-shadow:0 10px 20px rgba(2,6,23,.18);
    }
    .amenity-block{
      border-radius:14px;
      background:rgba(15,23,42,.76);
      color:white;
      font-size:11px;
      letter-spacing:.18em;
      text-transform:uppercase;
      font-weight:800;
      padding:12px 12px;
      text-align:center;
      box-shadow:0 10px 18px rgba(2,6,23,.14);
    }
    .amenity-card{
      border-radius:14px;
      background:rgba(255,255,255,.75);
      border:1px solid rgba(148,163,184,.35);
      padding:10px;
    }

    /* Gallery */
    .gallery-mosaic{
      display:grid;
      gap:14px;
      grid-template-columns: repeat(12, minmax(0, 1fr));
      grid-auto-flow:dense;
    }
    .gitem{
      position:relative;
      overflow:hidden;
      border-radius:22px;
      border:1px solid rgba(226,232,240,.9);
      background:rgba(255,255,255,.55);
      box-shadow:0 20px 40px rgba(2,6,23,.06);
      transform:translateZ(0);
      transition:transform .18s ease, box-shadow .18s ease, border-color .18s ease, background .18s ease;
      cursor:pointer;
    }
    .gitem:hover{
      transform:translateY(-3px);
      box-shadow:0 28px 60px rgba(2,6,23,.10);
      border-color:rgba(255,255,255,.95);
      background:rgba(255,255,255,.85);
    }
    .gimg{
      position:absolute; inset:0;
      width:100%; height:100%;
      object-fit:cover;
      filter:saturate(1.02) contrast(1.02);
      transform:scale(1.02);
      transition:transform 600ms ease, filter 600ms ease;
    }
    .gitem:hover .gimg{transform:scale(1.08); filter:saturate(1.08) contrast(1.06);}
    .ggrad{
      position:absolute; inset:0;
      background:
        radial-gradient(circle at 50% 10%, rgba(255,255,255,.06), rgba(0,0,0,0) 55%),
        linear-gradient(180deg, rgba(2,6,23,0), rgba(2,6,23,.62));
    }
    .gcap{
      position:absolute; left:18px; right:18px; bottom:16px;
      color:white;
    }
    .gcap .k{
      font-size:10px;
      letter-spacing:.22em;
      text-transform:uppercase;
      font-weight:800;
      opacity:.85;
    }
    .gcap .t{
      margin-top:6px;
      font-size:20px;
      line-height:1.1;
      font-family:'Cormorant Garamond',serif;
      font-weight:600;
      text-shadow:0 18px 40px rgba(2,6,23,.50);
    }
    .gcap .s{
      margin-top:6px;
      font-size:12px;
      opacity:.86;
      line-height:1.4;
    }

    /* PR Card page (scoped) */
    #page-pr-card{
      --prx-bg: #0f172a;
      --prx-accent: linear-gradient(135deg, #bf953f, #fcf6ba, #b38728, #fbf5b7, #aa771c);
      --prx-solid: #fcf6ba;
      --prx-text: #e2e8f0;
    }
    .prx-wrap{
      min-height: calc(100vh - 140px);
      padding: 28px 16px;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .prx-dashboard{
      position:relative;
      width:100%;
      max-width:1100px;
      background:#0f172a;
      border-radius:40px;
      overflow:hidden;
      box-shadow:0 40px 100px -20px rgba(15, 23, 42, 0.30);
      display:flex;
      flex-direction:column;
    }
    @media (min-width: 1024px){
      .prx-dashboard{
        flex-direction:row;
        align-items:center;
        padding:60px;
        min-height:600px;
      }
    }
    .prx-cube-bg{
      position:absolute;
      inset:0;
      opacity:.06;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='207' viewBox='0 0 120 207'%3E%3Cpath d='M60 103.5L0 69v-69l60 34.5L120 0v69L60 103.5zM60 103.5v69l60 34.5V138L60 103.5zm0 0V172.5L0 138v-69l60 34.5z' fill='none' stroke='%23ffffff' stroke-width='2'/%3E%3Cpath d='M60 34.5L0 0M60 34.5l60-34.5' stroke='%23ffffff' stroke-width='2'/%3E%3C/svg%3E");
      background-size:60px 104px;
      pointer-events:none;
      z-index:0;
    }
    .prx-text{
      padding:40px;
      z-index:10;
      color:#fff;
      display:flex;
      flex-direction:column;
      justify-content:center;
      flex:1;
    }
    .prx-text h1{
      font-family:'Cormorant Garamond',serif;
      font-size:3.0rem;
      line-height:1.05;
      font-weight:400;
      margin-bottom:18px;
    }
    @media (min-width:1024px){
      .prx-text h1{font-size:3.5rem;}
    }
    .prx-text p{
      color:#94a3b8;
      font-size:1.05rem;
      line-height:1.6;
      max-width:420px;
      font-weight:300;
      margin-bottom:32px;
    }
    .prx-card-col{
      flex:1;
      display:flex;
      justify-content:center;
      align-items:center;
      padding:20px;
      z-index:10;
    }
    .prx-glass{
      width:100%;
      max-width:500px;
      background:rgba(30,41,59,.40);
      border:1px solid rgba(255,255,255,.10);
      border-radius:30px;
      padding:26px;
      backdrop-filter: blur(20px);
      box-shadow:0 20px 50px rgba(0,0,0,.30);
      display:flex;
      flex-direction:column;
      gap:18px;
      max-height:85vh;
      overflow:auto;
    }
    .prx-glass::-webkit-scrollbar{width:0px;background:transparent;}
    .prx-card-container{
      position:relative;
      width:100%;
      max-width:380px;
      aspect-ratio: 1.618 / 1;
      transform-style:preserve-3d;
      transition: transform .1s ease-out;
      cursor:pointer;
      margin-bottom:10px;
      align-self:center;
    }
    .prx-card{
      position:absolute;
      inset:0;
      border-radius:20px;
      background: var(--prx-bg);
      box-shadow:0 25px 50px -12px rgba(0,0,0,.5), inset 0 0 0 1px rgba(255,255,255,.10);
      overflow:hidden;
      padding:24px;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      transition: background .5s ease;
    }
    .prx-big{
      position:absolute;
      top:50%;
      left:50%;
      transform:translate(-50%,-50%);
      font-family:'Cinzel',serif;
      font-size:6rem;
      font-weight:900;
      opacity:.12;
      background: var(--prx-accent);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      pointer-events:none;
      white-space:nowrap;
      z-index:1;
    }
    .prx-noise{
      position:absolute;
      inset:0;
      background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.4'/%3E%3C/svg%3E");
      opacity:.15;
      mix-blend-mode:overlay;
      pointer-events:none;
      z-index:2;
    }
    .prx-shine{
      position:absolute;
      inset:0;
      opacity:0;
      pointer-events:none;
      z-index:20;
    }
    .prx-content{position:relative;z-index:10;}
    .prx-text-accent{
      background: var(--prx-accent);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      background-clip:text;
      background-size:200% auto;
      animation: prxShine 4s linear infinite;
    }
    @keyframes prxShine{ to { background-position:200% center; } }
    .prx-vert{
      position:absolute;
      right:24px;
      bottom:24px;
      transform-origin: bottom right;
      transform: rotate(-90deg) translateX(100%);
      white-space:nowrap;
      z-index:20;
    }
    .prx-qr{
      position:absolute;
      right:22px;
      top:22px;
      width:72px;
      height:72px;
      border-radius:14px;
      background:rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.14);
      display:none;
      align-items:center;
      justify-content:center;
      overflow:hidden;
      box-shadow:0 18px 40px rgba(0,0,0,.28);
      z-index:25;
    }
    .prx-qr canvas{width:60px;height:60px;}
    .prx-label{
      font-size:10px;
      text-transform:uppercase;
      letter-spacing:.15em;
      color:#94a3b8;
      margin-bottom:8px;
      display:block;
      font-weight:700;
    }
    .prx-input{
      width:100%;
      background: rgba(15,23,42,.60);
      border:1px solid rgba(255,255,255,.10);
      color:#fff;
      padding:14px 16px;
      border-radius:12px;
      font-size:14px;
      letter-spacing:.05em;
      outline:none;
      transition: all .2s ease;
    }
    .prx-input:focus{
      border-color: rgba(255,255,255,.30);
      box-shadow: 0 0 0 2px rgba(255,255,255,.05);
    }
    .prx-select{
      appearance:none;
      background-image:url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
      background-repeat:no-repeat;
      background-position:right 14px center;
      background-size:16px;
    }
    .prx-error{border-color:#ef4444;box-shadow:0 0 0 1px #ef4444;}
    .prx-errtext{color:#ef4444;font-size:11px;margin-top:6px;display:none;}
    .prx-btn{
      width:100%;
      background:#fff;
      color:#0f172a;
      font-weight:800;
      text-transform:uppercase;
      letter-spacing:.1em;
      padding:16px;
      border-radius:999px;
      cursor:pointer;
      transition: transform .2s, box-shadow .2s;
      border:none;
    }
    .prx-btn:hover{transform:translateY(-2px);box-shadow:0 10px 25px rgba(255,255,255,.15);}
    .prx-btn-ghost{
      background: rgba(255,255,255,.10);
      color:#fff;
      border:1px solid rgba(255,255,255,.20);
      padding:12px 16px;
      font-size:12px;
      margin-top:0;
    }
    .prx-btn-ghost:hover{background: rgba(255,255,255,.20);}
    .prx-success{
      color:#fff;
      display:flex;
      flex-direction:column;
      gap:14px;
    }
    .prx-deposit{
      background: rgba(15,23,42,.60);
      border:1px solid rgba(255,255,255,.10);
      border-radius:16px;
      padding:18px;
    }
    .prx-row{
      display:flex;
      justify-content:space-between;
      padding:10px 0;
      border-bottom:1px solid rgba(255,255,255,.05);
      font-size:13px;
      gap:12px;
    }
    .prx-row:last-child{border-bottom:none;}
    .prx-k{color:#94a3b8;}
    .prx-v{color:#fff;font-weight:700;text-align:right;}
    .prx-amt{color:#fbbf24;font-size:15px;}

    /* Scrollbar */
    ::-webkit-scrollbar{width:8px;}
    ::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:999px;}
    ::-webkit-scrollbar-track{background:transparent;}
  </style>
</head>

<body class="antialiased selection:bg-slate-200 selection:text-slate-900">

  <div class="ambient-bg">
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
    <div class="orb orb-3"></div>
  </div>

  <!-- Scarcity Banner -->
  <div class="fixed top-0 left-0 w-full z-50 bg-slate-900 text-white text-xs py-2 glass-panel border-none !bg-slate-900/90 backdrop-blur-md">
    <div class="marquee-container flex items-center">
      <div class="marquee-content px-4 font-medium tracking-widest uppercase">
        PR Card Applications Closing in 48 Hours // The Chosen 75: Only 8 Assets Available // International Waitlist: 4,102 Applicants //
        PR Card Applications Closing in 48 Hours // The Chosen 75: Only 8 Assets Available // International Waitlist: 4,102 Applicants //
      </div>
    </div>
  </div>

  <!-- Navigation -->
  <nav class="fixed top-12 left-0 w-full z-40 px-4 md:px-12 py-4">
    <div class="max-w-7xl mx-auto glass-panel rounded-full px-6 py-4 flex justify-between items-center shadow-lg">
      <div class="flex items-center gap-2 cursor-pointer" onclick="location.hash = '#/home'">
        <i data-lucide="gem" class="w-6 h-6 text-slate-800"></i>
        <span class="serif text-2xl font-semibold tracking-tight text-slate-900">
          AMADA<span class="font-light opacity-60">REALTY</span>
        </span>
      </div>

	      <div class="hidden md:flex gap-8 text-sm font-medium tracking-wide text-slate-600">
	        <a href="#/home" class="hover:text-slate-900 transition-colors">Home</a>
	        <a href="#/about" class="hover:text-slate-900 transition-colors">About</a>
	        <a href="#/city" class="hover:text-slate-900 transition-colors">The City</a>
	        <a href="#/assets" class="hover:text-slate-900 transition-colors">Assets</a>
	        <a href="#/pr-card" class="hover:text-slate-900 transition-colors">PR Card</a>
	      </div>

      <button onclick="location.hash = '#/pr-card'"
              class="hidden md:flex items-center gap-2 bg-slate-900 text-white px-6 py-2.5 rounded-full text-xs font-semibold tracking-widest uppercase hover:bg-slate-800 transition-all shadow-lg hover:shadow-xl hover:scale-105 active:scale-95">
        Buy a Residence
        <i data-lucide="arrow-right" class="w-3 h-3"></i>
      </button>

      <button class="md:hidden p-2" id="mobileMenuBtn" aria-label="Open menu">
        <i data-lucide="menu" class="w-6 h-6"></i>
      </button>
    </div>
  </nav>

  <!-- Mobile Menu -->
  <div id="mobileMenu" class="modal-overlay fixed inset-0 z-[60] flex items-start justify-center p-4 bg-slate-900/60 backdrop-blur-sm">
    <div class="modal-content w-full max-w-md glass-panel rounded-3xl overflow-hidden shadow-2xl mt-24">
      <div class="p-6 flex items-center justify-between border-b border-slate-200/60">
        <div class="flex items-center gap-2">
          <i data-lucide="gem" class="w-5 h-5 text-slate-800"></i>
          <span class="serif text-xl font-semibold">Menu</span>
        </div>
        <button onclick="closeMobileMenu()" class="w-10 h-10 rounded-full bg-white/60 flex items-center justify-center hover:bg-white transition-colors" aria-label="Close menu">
          <i data-lucide="x" class="w-5 h-5"></i>
        </button>
      </div>

	      <div class="p-6 space-y-3 text-slate-700">
	        <a class="block px-4 py-3 rounded-2xl bg-white/50 hover:bg-white transition" href="#/home" onclick="closeMobileMenu()">Home</a>
	        <a class="block px-4 py-3 rounded-2xl bg-white/50 hover:bg-white transition" href="#/about" onclick="closeMobileMenu()">About</a>
	        <a class="block px-4 py-3 rounded-2xl bg-white/50 hover:bg-white transition" href="#/city" onclick="closeMobileMenu()">The City</a>
	        <a class="block px-4 py-3 rounded-2xl bg-white/50 hover:bg-white transition" href="#/assets" onclick="closeMobileMenu()">Assets</a>
	        <a class="block px-4 py-3 rounded-2xl bg-white/50 hover:bg-white transition" href="#/pr-card" onclick="closeMobileMenu()">PR Card</a>

        <div class="grid grid-cols-1 gap-2 pt-2">
          <button class="w-full text-left px-4 py-3 rounded-2xl bg-white/50 hover:bg-white transition" onclick="openLegal('privacy'); closeMobileMenu()">Privacy Policy</button>
          <button class="w-full text-left px-4 py-3 rounded-2xl bg-white/50 hover:bg-white transition" onclick="openLegal('bylaws'); closeMobileMenu()">Estate Bylaws</button>
        </div>

        <button class="w-full flex items-center justify-center gap-2 mt-3 bg-slate-900 text-white px-6 py-3 rounded-2xl text-xs font-semibold tracking-widest uppercase hover:bg-slate-800 transition-all shadow-lg"
                onclick="location.hash='#/pr-card'; closeMobileMenu()">
          Request PR Card
          <i data-lucide="arrow-right" class="w-3 h-3"></i>
        </button>
      </div>
    </div>
  </div>

  <!-- App -->
  <main id="app" class="pt-28">

    <!-- HOME -->
    <section class="page active" data-page="home" id="page-home">
	      <header class="hero relative min-h-[90vh] flex flex-col justify-center items-center text-center px-4 pt-8 overflow-hidden">
		        <div id="heroBgA" class="hero-bg on" style="background-image:url('amada-estate-layout-map.png')"></div>
		        <div id="heroBgB" class="hero-bg"></div>
		        <div class="hero-vignette"></div>

        <div class="hero-content max-w-5xl mx-auto space-y-8 reveal active rounded-[2.5rem] px-6 md:px-10 py-10 md:py-12">
          <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/10 border border-white/20">
            <span class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></span>
            <span class="text-xs font-semibold tracking-widest uppercase text-slate-100">The Masterpiece</span>
          </div>

          <h1 class="text-6xl md:text-8xl lg:text-9xl font-light leading-none tracking-tighter">
            THE <br/> <span class="serif italic text-slate-200">AMADA</span>
          </h1>

          <p class="text-lg md:text-2xl font-light text-slate-100/90 max-w-2xl mx-auto leading-relaxed">
            Abroad-Inspired Homes in an Exclusive Abuja Enclave.<br/>
            <span class="font-medium text-white"> You need Permanent Residence Card & Visitors need a Visa.</span>
          </p>

          <div class="pt-8 flex flex-col md:flex-row gap-6 justify-center items-center">
            

            <button onclick="location.hash='#/pr-card'"
                    class="group relative px-8 py-4 bg-slate-900 text-white rounded-full overflow-hidden shadow-2xl hover:shadow-slate-500/30 transition-all">
              <div class="absolute inset-0 w-full h-full bg-gradient-to-r from-transparent via-white/20 to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"></div>
              <span class="relative flex items-center gap-3 font-semibold tracking-widest text-sm uppercase">
                Buy a Residence
                <i data-lucide="id-card" class="w-4 h-4"></i>
              </span>
            </button>
          </div>

          <div class="pt-6 flex flex-wrap justify-center gap-2 text-xs">
            <a href="#/city" class="px-4 py-2 rounded-full bg-white/10 border border-white/20 hover:bg-white/15 transition">Explore The City</a>
            <a href="#/assets" class="px-4 py-2 rounded-full bg-white/10 border border-white/20 hover:bg-white/15 transition">Select an Asset</a>
            <button onclick="openLegal('bylaws')" class="px-4 py-2 rounded-full bg-white/10 border border-white/20 hover:bg-white/15 transition">Estate Bylaws</button>
          </div>

          <div class="pt-6">
            <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/10 border border-white/20">
              <i data-lucide="globe-2" class="w-4 h-4 text-white/90"></i>
              <span class="text-xs font-semibold tracking-widest text-white/90">
                Five nations. One address. Nigeria beneath your feet. Global standards around your life.
              </span>
            </div>
          </div>
        </div>
      </header>

      <section class="py-12 border-y border-slate-200/50 glass-panel">
        <div class="max-w-7xl mx-auto px-6 flex flex-wrap justify-center md:justify-between items-center gap-8 opacity-60 grayscale hover:grayscale-0 transition-all duration-500">
          <span class="text-xl serif font-semibold">Architectural Digest</span>
          <span class="text-xl serif font-semibold">Forbes Real Estate</span>
          <span class="text-xl serif font-semibold">The Lagos Journal</span>
          <span class="text-xl serif font-semibold">Haute Living</span>
          <span class="text-xl serif font-semibold">Elite Traveler</span>
        </div>
      </section>

      <section class="py-24 px-4">
        <div class="max-w-5xl mx-auto text-center space-y-8 reveal">
          <h2 class="text-4xl md:text-6xl font-serif text-slate-900">Five Nations. One Address.</h2>
          <p class="text-lg md:text-xl text-slate-600 leading-relaxed font-light">
            The goal isn’t to leave Nigeria. The goal is to bring the world-standard home. You shouldn’t have to relocate to access order, safety, and quality. We built it here — so your lifestyle upgrades without your roots relocating.
          </p>

          <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-4 text-left reveal">
            <div class="flip-box rounded-3xl" tabindex="0" role="button" aria-label="Nigeria, Upgraded. Flip card">
              <div class="flip-box-inner">
                <div class="flip-face flip-front">
                  <div class="flip-bg bg-1"></div>
                  <div class="flip-content">
                    <div class="flip-kicker">Nigeria, Upgraded</div>
                    <h3 class="flip-title">Positioning</h3>
                    <p class="flip-desc">
                      You’re not buying a property. You’re purchasing positioning. Smart people don’t chase comfort; they secure advantage.
                    </p>
                  </div>
                </div>
                <div class="flip-face flip-back">
                  <div class="flip-bg"></div>
                  <div class="flip-content">
                    <div class="flip-kicker">Nigeria, Upgraded</div>
                    <h3 class="flip-title">Future Control</h3>
                    <p class="flip-desc">
                      This is not real estate — it’s future-control dressed as architecture.
                    </p>
                  </div>
                </div>
              </div>
            </div>

            <div class="flip-box rounded-3xl" tabindex="0" role="button" aria-label="No Relocation. Flip card">
              <div class="flip-box-inner">
                <div class="flip-face flip-front">
                  <div class="flip-bg bg-2"></div>
                  <div class="flip-content">
                    <div class="flip-kicker">No Relocation</div>
                    <h3 class="flip-title">Stability</h3>
                    <p class="flip-desc">
                      Money can’t buy happiness — but poverty can buy regret. The point isn’t riches.
                    </p>
                  </div>
                </div>
                <div class="flip-face flip-back">
                  <div class="flip-bg"></div>
                  <div class="flip-content">
                    <div class="flip-kicker">No Relocation</div>
                    <h3 class="flip-title">Peace & Progress</h3>
                    <p class="flip-desc">
                      The point is removing chaos from your family’s future, so peace and progress become your default setting.
                    </p>
                  </div>
                </div>
              </div>
            </div>

            <div class="flip-box rounded-3xl" tabindex="0" role="button" aria-label="Abroad Living. Flip card">
              <div class="flip-box-inner">
                <div class="flip-face flip-front">
                  <div class="flip-bg bg-3"></div>
                  <div class="flip-content">
                    <div class="flip-kicker">Abroad Living</div>
                    <h3 class="flip-title">Familiar Luxury</h3>
                    <p class="flip-desc">
                      This is “abroad living”… without the loneliness of abroad. No cultural dislocation. No distance from family.
                    </p>
                  </div>
                </div>
                <div class="flip-face flip-back">
                  <div class="flip-bg"></div>
                  <div class="flip-content">
                    <div class="flip-kicker">Abroad Living</div>
                    <h3 class="flip-title">Premium Living</h3>
                    <p class="flip-desc">
                      No identity trade-off. Just premium living — in familiar soil.
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="grid grid-cols-2 md:grid-cols-4 gap-4 pt-8">
            <div class="glass-card p-6 rounded-3xl text-center">
              <h3 class="text-4xl font-bold text-slate-900 mb-2">75</h3>
              <p class="text-xs uppercase tracking-widest text-slate-500">Assets</p>
            </div>
            <div class="glass-card p-6 rounded-3xl text-center">
              <h3 class="text-4xl font-bold text-slate-900 mb-2">5</h3>
              <p class="text-xs uppercase tracking-widest text-slate-500">Territories</p>
            </div>
            <div class="glass-card p-6 rounded-3xl text-center">
              <h3 class="text-4xl font-bold text-slate-900 mb-2">1</h3>
              <p class="text-xs uppercase tracking-widest text-slate-500">Private City</p>
            </div>
            <div class="glass-card p-6 rounded-3xl text-center">
              <h3 class="text-4xl font-bold text-slate-900 mb-2">Top 1%</h3>
              <p class="text-xs uppercase tracking-widest text-slate-500">Neighbors</p>
            </div>
          </div>

	          <div class="pt-6 flex flex-col md:flex-row gap-3 justify-center items-center">
	            <button onclick="location.hash='#/assets'"
	                    class="inline-flex items-center gap-2 bg-slate-900 text-white px-8 py-4 rounded-full text-xs font-semibold tracking-widest uppercase hover:bg-slate-800 transition-all shadow-lg hover:shadow-xl hover:scale-105 active:scale-95">
	              Enter the Assets Page
	              <i data-lucide="arrow-right" class="w-3 h-3"></i>
	            </button>
	          </div>
	        </div>
	      </section>

	      <!-- Amenities (Homepage) -->
	      <section id="home-amenities" class="py-24 bg-white/40 backdrop-blur-sm border-y border-white">
	        <div class="max-w-7xl mx-auto px-6">
	          <div class="text-center mb-16 reveal">
	            <span class="text-xs font-bold tracking-widest uppercase text-slate-400">Life Within The Walls</span>
	            <h2 class="text-4xl md:text-5xl font-serif mt-2">Unparalleled Privileges</h2>
	            <p class="text-slate-600 mt-4 max-w-2xl mx-auto font-light">
	              Premium systems — security, education, leisure, and order — recreated inside the walls.
	            </p>
	          </div>

				          <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
				            <div class="rounded-3xl overflow-hidden bg-white shadow-sm border border-slate-100 hover:shadow-xl transition-all text-left group reveal">
				              <div class="relative w-full h-28 bg-slate-100 overflow-hidden">
				                <img src="amada-masterplan-estate-aerial-angle.png" alt="Private golf putting" loading="lazy"
				                     class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"/>
				                <div class="absolute inset-0 bg-gradient-to-t from-slate-900/45 via-slate-900/15 to-transparent"></div>
				              </div>
				              <div class="p-6 text-center">
				                <h4 class="font-serif text-lg font-semibold">Private Golf Putting</h4>
				                <p class="text-xs text-slate-500 mt-2">For the leisurely afternoon.</p>
				              </div>
				            </div>

			            <div class="rounded-3xl overflow-hidden bg-white shadow-sm border border-slate-100 hover:shadow-xl transition-all text-left group reveal" style="transition-delay: 80ms">
			              <div class="relative w-full h-28 bg-slate-100 overflow-hidden">
			                <img src="amada-modern-villas-street.png" alt="Executive helipad" loading="lazy"
			                     class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"/>
			                <div class="absolute inset-0 bg-gradient-to-t from-slate-900/45 via-slate-900/15 to-transparent"></div>
			              </div>
			              <div class="p-6 text-center">
			                <h4 class="font-serif text-lg font-semibold">Executive Helipad</h4>
			                <p class="text-xs text-slate-500 mt-2">Airport to Amada in 3 mins.</p>
			              </div>
			            </div>

			            <div class="rounded-3xl overflow-hidden bg-white shadow-sm border border-slate-100 hover:shadow-xl transition-all text-left group reveal" style="transition-delay: 160ms">
			              <div class="relative w-full h-28 bg-slate-100 overflow-hidden">
			                <img src="amada-masterplan-estate-aerial.png" alt="The terminal mall" loading="lazy"
			                     class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"/>
			                <div class="absolute inset-0 bg-gradient-to-t from-slate-900/45 via-slate-900/15 to-transparent"></div>
			              </div>
			              <div class="p-6 text-center">
			                <h4 class="font-serif text-lg font-semibold">The Terminal Mall</h4>
			                <p class="text-xs text-slate-500 mt-2">Curated luxury retail.</p>
			              </div>
			            </div>

					            <div class="rounded-3xl overflow-hidden bg-white shadow-sm border border-slate-100 hover:shadow-xl transition-all text-left group reveal" style="transition-delay: 240ms">
					              <div class="relative w-full h-28 bg-slate-100 overflow-hidden">
					                <img src="amada-estate-layout-map-labeled-streets.png" alt="International academy" loading="lazy"
					                     class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"/>
					                <div class="absolute inset-0 bg-gradient-to-t from-slate-900/45 via-slate-900/15 to-transparent"></div>
					              </div>
					              <div class="p-6 text-center">
					                <h4 class="font-serif text-lg font-semibold">International Academy</h4>
					                <p class="text-xs text-slate-500 mt-2">British Curriculum.</p>
					              </div>
					            </div>

					            <div class="rounded-3xl overflow-hidden bg-white shadow-sm border border-slate-100 hover:shadow-xl transition-all text-left group reveal" style="transition-delay: 320ms">
					              <div class="relative w-full h-28 bg-slate-100 overflow-hidden">
					                <img src="amada-resort-lagoon-pool.png" alt="Resort and spa" loading="lazy"
					                     class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"/>
					                <div class="absolute inset-0 bg-gradient-to-t from-slate-900/45 via-slate-900/15 to-transparent"></div>
					              </div>
					              <div class="p-6 text-center">
					                <h4 class="font-serif text-lg font-semibold">Resort &amp; Spa</h4>
					                <p class="text-xs text-slate-500 mt-2">Private suites. Quiet luxury.</p>
					              </div>
					            </div>

						            <div class="rounded-3xl overflow-hidden bg-white shadow-sm border border-slate-100 hover:shadow-xl transition-all text-left group reveal" style="transition-delay: 400ms">
						              <div class="relative w-full h-28 bg-slate-100 overflow-hidden">
						                <img src="amada-luxury-villas-palm-lined-street.png" alt="Private clinic" loading="lazy"
						                     class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"/>
						                <div class="absolute inset-0 bg-gradient-to-t from-slate-900/45 via-slate-900/15 to-transparent"></div>
						              </div>
						              <div class="p-6 text-center">
						                <h4 class="font-serif text-lg font-semibold">Private Clinic</h4>
						                <p class="text-xs text-slate-500 mt-2">Discreet medical access.</p>
						              </div>
						            </div>

						            <div class="rounded-3xl overflow-hidden bg-white shadow-sm border border-slate-100 hover:shadow-xl transition-all text-left group reveal" style="transition-delay: 480ms">
						              <div class="relative w-full h-28 bg-slate-100 overflow-hidden">
						                <img src="Gemini_Generated_Image_gu927ggu927ggu92.png" alt="Natural food reserve" loading="lazy"
						                     class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"/>
						                <div class="absolute inset-0 bg-gradient-to-t from-slate-900/45 via-slate-900/15 to-transparent"></div>
						              </div>
						              <div class="p-6 text-center">
						                <h4 class="font-serif text-lg font-semibold">Natural Food Reserve</h4>
						                <p class="text-xs text-slate-500 mt-2">Onsite premium produce + dedicated offsite farm supply for residents.</p>
						              </div>
						            </div>

						            <div class="rounded-3xl overflow-hidden bg-white shadow-sm border border-slate-100 hover:shadow-xl transition-all text-left group reveal" style="transition-delay: 560ms">
						              <div class="relative w-full h-28 bg-slate-100 overflow-hidden">
						                <img src="Gemini_Generated_Image_do2n5fdo2n5fdo2n.png" alt="24/7 estate lighting" loading="lazy"
						                     class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"/>
						                <div class="absolute inset-0 bg-gradient-to-t from-slate-900/45 via-slate-900/15 to-transparent"></div>
						              </div>
						              <div class="p-6 text-center">
						                <h4 class="font-serif text-lg font-semibold">24/7 Light</h4>
						                <p class="text-xs text-slate-500 mt-2">Partially powered by green energy.</p>
						              </div>
						            </div>
					          </div>
			        </div>
			      </section>

				      <!-- Nigeria, Upgraded (Homepage copy) -->
				      <section class="py-20 px-4" id="home-positioning">
				        <div class="max-w-7xl mx-auto">
				          <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-6 reveal">
			            <div>
			              <span class="text-xs font-bold tracking-widest uppercase text-slate-400">Positioning</span>
			              <h3 class="text-4xl md:text-5xl font-serif mt-2 text-slate-900">Live Like Abroad — Stay Nigeria</h3>
			              <p class="text-slate-600 mt-3 max-w-3xl font-light">
			                We curated the streets like nations because lifestyle is psychological — you don’t just pick a house, you pick the atmosphere your family will grow inside.
			              </p>
			            </div>
			            <button onclick="location.hash='#/about'" class="inline-flex items-center gap-2 px-6 py-3 rounded-full text-xs font-semibold tracking-widest uppercase border border-slate-200 bg-white/70 hover:bg-white transition shadow">
			              Read the Philosophy
			              <i data-lucide="arrow-right" class="w-3 h-3"></i>
			            </button>
			          </div>

				          <div class="mt-10">
				            <div class="glass-panel rounded-3xl p-6 md:p-8 reveal overflow-hidden relative">
				              <div class="absolute inset-0 opacity-10 bg-[radial-gradient(circle_at_20%_20%,rgba(2,132,199,.55),transparent_55%),radial-gradient(circle_at_80%_70%,rgba(34,197,94,.55),transparent_60%)]"></div>
				              <div class="relative">
				                <div class="timeline">
					                  <div class="timeline-item reveal" data-reveal="replay" style="transition-delay: 0ms">
					                    <span class="timeline-dot" aria-hidden="true"></span>
					                    <div class="timeline-row">
					                      <div class="timeline-slab glass-card rounded-3xl p-6">
					                        <div class="timeline-body">
					                          <div class="text-xl font-serif text-slate-900 mt-2">Experience Abroad in Nigeria</div>
					                          <p class="text-slate-700 mt-2 leading-relaxed font-light">
					                            You’ve experienced what those countries feel like — the structure, the calm, the predictability. Now imagine living that standard daily, without visas, without winter, without starting over.
					                          </p>
					                        </div>
					                        <div class="timeline-media">
					                          <img src="amada-estate-layout-map.png" alt="Amada lifestyle boulevard" loading="lazy"/>
					                          <div class="timeline-tag">Positioning</div>
					                        </div>
					                      </div>
					                    </div>
					                  </div>

					                  <div class="timeline-item reveal" data-reveal="replay" style="transition-delay: 80ms">
					                    <span class="timeline-dot" aria-hidden="true"></span>
					                    <div class="timeline-row">
					                      <div class="timeline-slab glass-card rounded-3xl p-6">
					                        <div class="timeline-body">
					                          <div class="text-xl font-serif text-slate-900 mt-2">Neighbors</div>
					                          <p class="text-slate-700 mt-2 leading-relaxed font-light">
					                            Money can buy property anywhere. It can’t buy the class of neighbors you’re about to share. This is for people who understand standards, discretion, and legacy — not just square footage.
					                          </p>
					                        </div>
					                        <div class="timeline-media">
					                          <img src="amada-masterplan-estate-aerial-angle.png" alt="Amada leisure and community" loading="lazy"/>
					                          <div class="timeline-tag">Neighbors</div>
					                        </div>
					                      </div>
					                    </div>
					                  </div>

					                  <div class="timeline-item reveal" data-reveal="replay" style="transition-delay: 160ms">
					                    <span class="timeline-dot" aria-hidden="true"></span>
					                    <div class="timeline-row">
					                      <div class="timeline-slab glass-card rounded-3xl p-6">
					                        <div class="timeline-body">
					                          <div class="text-xl font-serif text-slate-900 mt-2">Systems</div>
					                          <p class="text-slate-700 mt-2 leading-relaxed font-light">
					                            We’re not selling buildings; we’re selling systems. The systems you admire abroad — safety culture, governance, cleanliness, order, premium amenities — are what we’ve recreated inside the walls.
					                          </p>
					                        </div>
					                        <div class="timeline-media">
					                          <img src="amada-estate-layout-collage-2x.png" alt="Amada estate layout preview" loading="lazy"/>
					                          <div class="timeline-tag">Systems</div>
					                        </div>
					                      </div>
					                    </div>
					                  </div>
				                </div>
				              </div>
				            </div>
				          </div>
				        </div>
				      </section>

				      <!-- Featured Gallery -->
				      <section class="py-20 px-4">
		        <div class="max-w-7xl mx-auto">
		          <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-6 reveal">
	            <div>
	              <span class="text-xs font-bold tracking-widest uppercase text-slate-400">Gallery</span>
	              <h2 class="text-4xl md:text-6xl font-serif mt-2 text-slate-900">Explore City of Change Makers</h2>
	              <p class="text-slate-600 mt-3 max-w-2xl font-light">
	                A curated preview of the address: entrances, boulevards, leisure, and the masterplan.
	              </p>
	            </div>
	            <button onclick="location.hash='#/city'"
	                    class="inline-flex items-center gap-2 bg-slate-900 text-white px-7 py-3 rounded-full text-xs font-semibold tracking-widest uppercase hover:bg-slate-800 transition-all shadow-lg hover:shadow-xl">
	              Open Full Gallery
	              <i data-lucide="arrow-right" class="w-3 h-3"></i>
	            </button>
	          </div>

	          <div class="mt-10 grid grid-cols-1 md:grid-cols-3 gap-4 reveal">
	            <button class="glass-card rounded-3xl overflow-hidden text-left" onclick="openGalleryById('ahoz3b')">
	              <div class="h-60 bg-slate-100">
	                <img src="amada-masterplan-estate-aerial.png" alt="Amada Estate Aerial" class="w-full h-full object-cover"/>
	              </div>
	              <div class="p-5">
	                <div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Masterplan</div>
	                <div class="text-xl font-serif text-slate-900 mt-2">The Estate From Above</div>
	                <div class="text-sm text-slate-600 mt-2">A full private-city layout inside secured walls.</div>
	              </div>
	            </button>
	            <button class="glass-card rounded-3xl overflow-hidden text-left" onclick="openGalleryById('w65loy')">
	              <div class="h-60 bg-slate-100">
	                <img src="amada-resort-lagoon-street-view.png" alt="Gated Entry" class="w-full h-full object-cover"/>
	              </div>
	              <div class="p-5">
	                <div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Security</div>
	                <div class="text-xl font-serif text-slate-900 mt-2">The Gate Experience</div>
	                <div class="text-sm text-slate-600 mt-2">A controlled arrival designed for privacy.</div>
	              </div>
	            </button>
	            <button class="glass-card rounded-3xl overflow-hidden text-left" onclick="openGalleryById('97v93a')">
	              <div class="h-60 bg-slate-100">
	                <img src="amada-masterplan-estate-aerial-angle.png" alt="Leisure Lagoon" class="w-full h-full object-cover"/>
	              </div>
	              <div class="p-5">
	                <div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Amenities</div>
	                <div class="text-xl font-serif text-slate-900 mt-2">Leisure, Curated</div>
	                <div class="text-sm text-slate-600 mt-2">Resort-grade pools and landscaping.</div>
	              </div>
	            </button>
	          </div>
	        </div>
			      </section>

		      <!-- Territories (Homepage) -->
		      <section id="home-territories" class="py-20 px-4">
	        <div class="max-w-7xl mx-auto space-y-12">
	          <div class="flex justify-between items-end px-4">
	            <div>
	              <span class="text-xs font-bold tracking-widest uppercase text-slate-400">The Collection</span>
	              <h2 class="text-4xl md:text-5xl font-serif mt-2">Select Your Preferred Street Lifestyle</h2>
	            </div>
	            <div class="hidden md:block text-right">
	              <p class="text-sm text-slate-500">Only 75 residences across the estate.</p>
	            </div>
	          </div>

	          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
	            <!-- NY -->
	            <div class="group glass-card rounded-[2.5rem] p-3 hover:bg-white transition-all duration-500 reveal cursor-pointer"
	                 data-territory-card="ny" role="button" tabindex="0" aria-label="Open New York Street details">
	              <div class="relative h-64 rounded-[2rem] overflow-hidden">
	                <img src="amada-resort-lagoon-aerial.png"
	                     alt="New York" class="object-cover w-full h-full group-hover:scale-110 transition-transform duration-700">
	                <div class="absolute bottom-4 left-4 bg-white/90 backdrop-blur px-4 py-1 rounded-full text-xs font-bold uppercase tracking-widest">
	                  Only 2 Units Left
	                </div>
	              </div>
	              <div class="p-6 space-y-4">
	                <div class="flex justify-between items-start">
	                  <h3 class="text-2xl font-serif">New York St.</h3>
	                  <i data-lucide="building-2" class="w-6 h-6 text-slate-400"></i>
	                </div>
	                <p class="text-slate-600 text-sm leading-relaxed">
	                  Industrial luxury meets brownstone heritage. High ceilings, exposed brick textures, and rooftop terraces designed for the urban elite.
	                </p>
	                <div class="pt-4 border-t border-slate-100 flex justify-between items-center">
	                  <span class="text-lg font-semibold text-slate-900">$2.5M+</span>
	                  <button onclick="event.stopPropagation(); goToAssetsAndFocus('ny')"
	                          class="text-xs text-slate-400 underline decoration-slate-300 underline-offset-4 group-hover:text-slate-900 cursor-pointer hover:font-bold transition-all">
	                    View Floorplans
	                  </button>
	                </div>
	              </div>
	            </div>

	            <!-- Dubai -->
	            <div class="group glass-card rounded-[2.5rem] p-3 hover:bg-white transition-all duration-500 reveal cursor-pointer" style="transition-delay: 100ms"
	                 data-territory-card="dubai" role="button" tabindex="0" aria-label="Open Dubai Street details">
	              <div class="relative h-64 rounded-[2rem] overflow-hidden">
	                <img src="amada-modern-villas-street-palm-lined.png"
	                     alt="Dubai" class="object-cover w-full h-full group-hover:scale-110 transition-transform duration-700">
	                <div class="absolute bottom-4 left-4 bg-slate-900 text-white px-4 py-1 rounded-full text-xs font-bold uppercase tracking-widest">Waitlist Only</div>
	              </div>
	              <div class="p-6 space-y-4">
	                <div class="flex justify-between items-start">
	                  <h3 class="text-2xl font-serif">Dubai St.</h3>
	                  <i data-lucide="sun" class="w-6 h-6 text-slate-400"></i>
	                </div>
	                <p class="text-slate-600 text-sm leading-relaxed">
	                  Opulent minimalism. White stone, floor-to-ceiling glass, and infinity pools. Designed for those who demand the future, today.
	                </p>
	                <div class="pt-4 border-t border-slate-100 flex justify-between items-center">
	                  <span class="text-lg font-semibold text-slate-900">$2.5M+</span>
	                  <button onclick="event.stopPropagation(); goToAssetsAndFocus('dubai')"
	                          class="text-xs text-slate-400 underline decoration-slate-300 underline-offset-4 group-hover:text-slate-900 cursor-pointer hover:font-bold transition-all">
	                    Join Waitlist
	                  </button>
	                </div>
	              </div>
	            </div>

	            <!-- London -->
	            <div class="group glass-card rounded-[2.5rem] p-3 hover:bg-white transition-all duration-500 reveal cursor-pointer" style="transition-delay: 200ms"
	                 data-territory-card="london" role="button" tabindex="0" aria-label="Open London Street details">
	              <div class="relative h-64 rounded-[2rem] overflow-hidden">
	                <img src="amada-townhome-street-brick-close.png"
	                     alt="London" class="object-cover w-full h-full group-hover:scale-110 transition-transform duration-700">
	              </div>
	              <div class="p-6 space-y-4">
	                <div class="flex justify-between items-start">
	                  <h3 class="text-2xl font-serif">London St.</h3>
	                  <i data-lucide="umbrella" class="w-6 h-6 text-slate-400"></i>
	                </div>
	                <p class="text-slate-600 text-sm leading-relaxed">
	                  Timeless aristocracy. Regency architecture, manicured hedges, and wrought iron detailing. A sanctuary of silence and class.
	                </p>
	                <div class="pt-4 border-t border-slate-100 flex justify-between items-center">
	                  <span class="text-lg font-semibold text-slate-900">$2.5M+</span>
	                  <button onclick="event.stopPropagation(); goToAssetsAndFocus('london')"
	                          class="text-xs text-slate-400 underline decoration-slate-300 underline-offset-4 group-hover:text-slate-900 cursor-pointer hover:font-bold transition-all">
	                    View Floorplans
	                  </button>
	                </div>
	              </div>
	            </div>

	            <!-- Toronto -->
	            <div class="group glass-card rounded-[2.5rem] p-3 hover:bg-white transition-all duration-500 reveal cursor-pointer" style="transition-delay: 300ms"
	                 data-territory-card="canada" role="button" tabindex="0" aria-label="Open Toronto Street details">
	              <div class="relative h-64 rounded-[2rem] overflow-hidden">
	                <img src="amada-estate-entrance-gate-aerial.png"
	                     alt="Toronto" class="object-cover w-full h-full group-hover:scale-110 transition-transform duration-700">
	              </div>
	              <div class="p-6 space-y-4">
	                <div class="flex justify-between items-start">
	                  <h3 class="text-2xl font-serif">Toronto St.</h3>
	                  <i data-lucide="building-2" class="w-6 h-6 text-slate-400"></i>
	                </div>
	                <p class="text-slate-600 text-sm leading-relaxed">
	                  Cosmopolitan calm. Glass, stone, and clean-lined interiors—built for quiet power and everyday ease.
	                </p>
	                <div class="pt-4 border-t border-slate-100 flex justify-between items-center">
	                  <span class="text-lg font-semibold text-slate-900">$2.5M+</span>
	                  <button onclick="event.stopPropagation(); goToAssetsAndFocus('canada')"
	                          class="text-xs text-slate-400 underline decoration-slate-300 underline-offset-4 group-hover:text-slate-900 cursor-pointer hover:font-bold transition-all">
	                    View Floorplans
	                  </button>
	                </div>
	              </div>
	            </div>

	            <!-- Paris -->
	            <div class="group glass-card rounded-[2.5rem] p-3 bg-gradient-to-br from-white to-green-50 border border-green-100 hover:shadow-green-100/50 transition-all duration-500 md:col-span-2 lg:col-span-2 reveal cursor-pointer"
	                 style="transition-delay: 400ms"
	                 data-territory-card="naija" role="button" tabindex="0" aria-label="Open Paris Street details">
	              <div class="relative h-64 rounded-[2rem] overflow-hidden">
	                <img src="amada-estate-layout-map.png"
	                     alt="Paris" class="object-cover w-full h-full group-hover:scale-110 transition-transform duration-700">
	                <div class="absolute top-4 right-4 bg-green-900 text-white px-4 py-1 rounded-full text-xs font-bold uppercase tracking-widest flex items-center gap-2">
	                  <i data-lucide="crown" class="w-3 h-3"></i> Flagship Collection
	                </div>
	              </div>
	              <div class="p-6 space-y-4">
	                <div class="flex justify-between items-start">
	                  <h3 class="text-2xl font-serif text-green-900">Paris St.</h3>
	                  <i data-lucide="landmark" class="w-6 h-6 text-green-700"></i>
	                </div>
	                <p class="text-slate-700 text-sm leading-relaxed">
	                  Parisian grandeur. Stone façades, private courtyards, and boulevard calm — built for legacy, discretion, and timeless taste.
	                </p>
	                <div class="pt-4 border-t border-green-100 flex justify-between items-center">
	                  <span class="text-lg font-semibold text-green-900">$2.5M+</span>
	                  <button onclick="event.stopPropagation(); goToAssetsAndFocus('naija')"
	                          class="text-xs text-green-700 underline decoration-green-200 underline-offset-4 group-hover:text-green-900 cursor-pointer hover:font-bold transition-all">
	                    View Floorplans
	                  </button>
	                </div>
	              </div>
	            </div>
	          </div>

	          <div class="flex justify-center pt-2">
	            <button onclick="location.hash='#/assets'"
	                    class="inline-flex items-center gap-2 bg-slate-900 text-white px-8 py-4 rounded-full text-xs font-semibold tracking-widest uppercase hover:bg-slate-800 transition-all shadow-lg hover:shadow-xl hover:scale-105 active:scale-95">
	              Browse All Assets
	              <i data-lucide="arrow-right" class="w-3 h-3"></i>
	            </button>
	          </div>
	        </div>
	      </section>

		    </section>

    <!-- CITY -->
    <section class="page" data-page="city" id="page-city">
      <div class="max-w-7xl mx-auto px-6 py-14">
        <div class="text-center mb-10 reveal">
          <span class="text-xs font-bold tracking-widest uppercase text-slate-400">The City</span>
          <h2 class="text-4xl md:text-6xl font-serif mt-2">The Private City, In Full</h2>
          <p class="text-lg text-slate-600 font-light max-w-3xl mx-auto mt-4">
            Masterplan, galleries, and videos — the full Amada City experience.
          </p>
        </div>

        <div class="glass-panel rounded-3xl p-6 md:p-8 mb-10 reveal">
          <div class="grid grid-cols-1 lg:grid-cols-5 gap-8 items-center">
            <div class="lg:col-span-3">
              <button class="w-full text-left" onclick="openGalleryById('layout')" aria-label="Open masterplan">
                <div class="rounded-3xl overflow-hidden border border-slate-200 bg-white/60">
                  <img src="amada-estate-layout-collage-2x.png" alt="Amada City Masterplan" class="w-full h-[320px] md:h-[420px] object-cover"/>
                </div>
              </button>
            </div>
            <div class="lg:col-span-2 space-y-4">
              <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/60 border border-slate-200">
                <i data-lucide="map" class="w-4 h-4 text-slate-700"></i>
                <span class="text-xs font-semibold tracking-widest uppercase text-slate-600">Masterplan</span>
              </div>
              <h3 class="text-2xl md:text-3xl font-serif">One City. Five Territories.</h3>
              <p class="text-sm text-slate-600 leading-relaxed">
                Each street shares a unified exterior language. Interiors are built to your taste across three floors — rooms, cinema, lounges, play areas, and more.
              </p>
              <div class="flex flex-wrap gap-2">
                <button onclick="openGalleryById('layout')" class="px-4 py-2 rounded-full text-xs font-semibold tracking-widest uppercase border border-slate-200 bg-white/60 hover:bg-white transition">Open Gallery</button>
                <button onclick="location.hash='#/assets'" class="px-4 py-2 rounded-full text-xs font-semibold tracking-widest uppercase bg-slate-900 text-white hover:bg-slate-800 transition shadow-lg">Select an Asset</button>
              </div>
            </div>
          </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-5 gap-8 items-start">
          <!-- Map -->
          <div class="lg:col-span-3 glass-panel rounded-3xl p-6 reveal">
            <div class="flex items-start justify-between gap-4">
              <div>
                <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/60 border border-slate-200">
                  <i data-lucide="map" class="w-4 h-4 text-slate-700"></i>
                  <span class="text-xs font-semibold tracking-widest uppercase text-slate-600">Interactive Map</span>
                </div>
                <h3 class="text-2xl md:text-3xl font-serif mt-3">City Zones</h3>
                <p class="text-sm text-slate-500 mt-2">Hover for tooltip. Click for details.</p>
              </div>

              <div class="flex gap-2 flex-wrap">
                <button onclick="setCityLayer('all')" class="px-4 py-2 rounded-full text-xs font-semibold tracking-widest uppercase border border-slate-200 bg-white/60 hover:bg-white transition">All</button>
                <button onclick="setCityLayer('territories')" class="px-4 py-2 rounded-full text-xs font-semibold tracking-widest uppercase border border-slate-200 bg-white/60 hover:bg-white transition">Territories</button>
                <button onclick="setCityLayer('amenities')" class="px-4 py-2 rounded-full text-xs font-semibold tracking-widest uppercase border border-slate-200 bg-white/60 hover:bg-white transition">Amenities</button>
              </div>
            </div>

            <div class="mt-6 relative rounded-3xl overflow-hidden border border-slate-200 bg-white/40 aspect-[5/7]">
              <img id="cityMapImg" src="" class="absolute inset-0 w-full h-full object-cover" alt="Amada City Masterplan" onerror="this.style.display='none';" />
              <svg id="cityMapSvg" class="absolute inset-0 w-full h-full" viewBox="0 0 1000 1400" preserveAspectRatio="none"></svg>
              <div id="cityTip" class="tip hidden">ZONE</div>

              <div id="cityMapFallback" class="absolute inset-0 flex items-center justify-center text-center p-10 text-slate-600">
                <div class="max-w-md">
                  <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/70 border border-slate-200 mb-4">
                    <i data-lucide="image" class="w-4 h-4"></i>
                    <span class="text-xs font-semibold tracking-widest uppercase">Map Image Optional</span>
                  </div>
                  <p class="text-sm leading-relaxed">
                    Set <span class="font-semibold">CITY_MAP_IMAGE_URL</span> to a masterplan image. Hotspots work with or without the image.
                  </p>
                </div>
              </div>
            </div>

            <div class="mt-5 flex flex-wrap gap-2 text-xs text-slate-600">
              <span class="px-3 py-1 rounded-full border border-slate-200 bg-white/60 uppercase tracking-widest">Hover</span>
              <span class="px-3 py-1 rounded-full border border-slate-200 bg-white/60 uppercase tracking-widest">Click</span>
              <span class="px-3 py-1 rounded-full border border-slate-200 bg-white/60 uppercase tracking-widest">Policy-Driven</span>
            </div>
          </div>

          <!-- Details -->
          <div class="lg:col-span-2 space-y-6 reveal">
            <div class="glass-panel rounded-3xl p-6">
              <div class="flex items-start justify-between gap-4">
                <div>
                  <span class="text-xs font-bold tracking-widest uppercase text-slate-400">Selected Zone</span>
                  <h3 class="text-2xl font-serif mt-2" id="cityDetailTitle">New York Territory</h3>
                  <p class="text-sm text-slate-600 mt-2 leading-relaxed" id="cityDetailDesc">
                    Click a zone on the map to show its rules and access tiers.
                  </p>
                </div>
                <div class="w-12 h-12 rounded-2xl bg-white/60 border border-slate-200 flex items-center justify-center">
                  <i data-lucide="sparkles" class="w-6 h-6 text-slate-700" id="cityDetailIcon"></i>
                </div>
              </div>

              <div class="mt-6 grid grid-cols-2 gap-3">
                <div class="rounded-2xl bg-white/60 border border-slate-200 p-4">
                  <p class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Access</p>
                  <p class="text-sm text-slate-800 mt-1" id="cityDetailAccess">Residents + escorted guests</p>
                </div>
                <div class="rounded-2xl bg-white/60 border border-slate-200 p-4">
                  <p class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Hours</p>
                  <p class="text-sm text-slate-800 mt-1" id="cityDetailHours">Always</p>
                </div>
                <div class="rounded-2xl bg-white/60 border border-slate-200 p-4">
                  <p class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Noise</p>
                  <p class="text-sm text-slate-800 mt-1" id="cityDetailNoise">Low</p>
                </div>
                <div class="rounded-2xl bg-white/60 border border-slate-200 p-4">
                  <p class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Policy</p>
                  <button class="text-sm text-slate-800 mt-1 underline underline-offset-4 hover:text-slate-900" onclick="openLegal('bylaws')">View Estate Bylaws</button>
                </div>
              </div>

              <div class="mt-6 flex gap-3">
                <button id="cityCTA" onclick="location.hash='#/assets'" class="flex-1 bg-slate-900 text-white py-3 rounded-2xl font-bold uppercase tracking-widest hover:bg-slate-800 transition-colors shadow-lg text-xs">
                  Browse Assets
                </button>
                <button onclick="openLegal('privacy')" class="px-5 py-3 border border-slate-200 rounded-2xl font-bold uppercase tracking-widest hover:bg-white/70 transition-colors text-xs text-slate-700">
                  Privacy
                </button>
              </div>
            </div>

            <div class="glass-card rounded-3xl p-6">
              <h4 class="text-xl font-serif">City Statement</h4>
              <p class="text-sm text-slate-600 mt-3 leading-relaxed">
                The city is curated for controlled elegance—privacy-first, access-tiered, and built to preserve quiet luxury.
                Every policy exists to protect the value of the address.
              </p>
            </div>
          </div>
        </div>

        <div class="mt-12 glass-panel rounded-3xl p-6 md:p-8 reveal">
          <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-6">
            <div>
              <span class="text-xs font-bold tracking-widest uppercase text-slate-400">City Gallery</span>
              <h3 class="text-3xl md:text-4xl font-serif mt-2">Luxury, In Frames</h3>
              <p class="text-slate-600 mt-3 max-w-2xl font-light">
                Tap any image to view full screen. Use next/prev to tour the city.
              </p>
            </div>
            <div class="flex flex-wrap gap-2">
              <button onclick="openGalleryById('ahoz3b')" class="px-4 py-2 rounded-full text-xs font-semibold tracking-widest uppercase border border-slate-200 bg-white/60 hover:bg-white transition">Masterplan</button>
              <button onclick="openGalleryById('w65loy')" class="px-4 py-2 rounded-full text-xs font-semibold tracking-widest uppercase border border-slate-200 bg-white/60 hover:bg-white transition">Gate</button>
              <button onclick="openGalleryById('97v93a')" class="px-4 py-2 rounded-full text-xs font-semibold tracking-widest uppercase border border-slate-200 bg-white/60 hover:bg-white transition">Leisure</button>
            </div>
          </div>

          <div class="mt-8 gallery-mosaic" id="galleryGrid">
            <!-- injected -->
          </div>
        </div>

        <div class="mt-12 grid grid-cols-1 md:grid-cols-2 gap-6 reveal">
          <div class="glass-card rounded-3xl overflow-hidden">
            <div class="p-6 border-b border-slate-200/60 bg-white/60">
              <div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">City Video</div>
              <div class="text-2xl font-serif text-slate-900 mt-1">Drone Walkthrough</div>
            </div>
            <video class="w-full bg-black" controls preload="metadata" src="Drone_Footage_of_Luxury_Micro_City.mp4"></video>
          </div>

          <div class="glass-card rounded-3xl overflow-hidden">
            <div class="p-6 border-b border-slate-200/60 bg-white/60">
              <div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">City Video</div>
              <div class="text-2xl font-serif text-slate-900 mt-1">Lifestyle Render</div>
            </div>
            <video class="w-full bg-black" controls preload="metadata" src="Real_Estate_Video_Generation.mp4"></video>
          </div>
        </div>
      </div>
    </section>

    <!-- ABOUT -->
    <section class="page" data-page="about" id="page-about">
      <div class="max-w-7xl mx-auto px-6 py-14">
        <!-- Hero -->
        <div class="relative overflow-hidden rounded-[2.5rem] bg-[#0f172a] text-white border border-white/10 shadow-2xl reveal">
          <div class="prx-cube-bg"></div>
          <div class="absolute inset-0 opacity-75 bg-[radial-gradient(circle_at_22%_18%,rgba(56,189,248,.16),transparent_52%),radial-gradient(circle_at_76%_80%,rgba(34,197,94,.12),transparent_55%)]"></div>
          <div class="absolute inset-0 bg-gradient-to-b from-white/5 via-transparent to-black/25"></div>
          <div class="relative p-8 md:p-12">
            <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/10 border border-white/15">
              <i data-lucide="crown" class="w-4 h-4 text-white/85"></i>
              <span class="text-xs font-semibold tracking-widest uppercase text-white/80">About Amada Realty</span>
            </div>
            <h2 class="text-4xl md:text-6xl font-serif mt-6 leading-tight">
              The Architecture of Destiny
            </h2>
            <p class="mt-5 text-white/80 text-lg md:text-xl font-light leading-relaxed max-w-4xl">
              Ladies and Gentlemen, let us be honest: You are not looking for a house. You have enough houses.
              You are looking for a lifestyle beyond the norms. You are looking for a secession from the chaos of the ordinary.
            </p>
            <div class="mt-7 flex flex-col sm:flex-row gap-3">
              <button onclick="location.hash='#/assets'"
                      class="inline-flex items-center justify-center gap-2 bg-white text-slate-900 px-7 py-3 rounded-full text-xs font-extrabold tracking-widest uppercase hover:bg-slate-100 transition shadow-lg">
                Explore Assets
                <i data-lucide="arrow-right" class="w-4 h-4"></i>
              </button>
              <button onclick="location.hash='#/city'"
                      class="inline-flex items-center justify-center gap-2 bg-white/10 text-white px-7 py-3 rounded-full text-xs font-bold tracking-widest uppercase border border-white/15 hover:bg-white/15 transition">
                View The City
                <i data-lucide="map" class="w-4 h-4"></i>
              </button>
            </div>
          </div>
        </div>

        <div class="mt-10 grid grid-cols-1 lg:grid-cols-5 gap-10 items-start">
          <!-- Narrative -->
          <div class="lg:col-span-3 space-y-6 reveal">
            <div class="glass-panel rounded-3xl p-6 md:p-8">
              <div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Doctrine</div>
              <h3 class="text-2xl md:text-3xl font-serif text-slate-900 mt-2">Environments don’t just influence minds; they install standards.</h3>
              <p class="text-slate-700 mt-3 leading-relaxed font-light">
                At Amada Realty, we believe that the fastest way to upgrade a family’s destiny is to place them where greatness is normal—where excellence is the minimum, not the exception.
                Curated environments do what motivational speeches cannot—they shape behavior quietly, daily, and permanently.
              </p>
            </div>

            <div class="glass-panel rounded-3xl p-6 md:p-8">
              <div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Mission</div>
              <h3 class="text-2xl md:text-3xl font-serif text-slate-900 mt-2">We Don’t Just House Families; We Incubate Leaders</h3>
              <p class="text-slate-700 mt-3 leading-relaxed font-light">
                When you buy into Amada, you aren't just buying a property. You are purchasing positioning. Smart people don’t chase comfort; they secure advantage.
                This is not real estate—it’s future-control dressed as architecture.
              </p>
              <p class="text-slate-700 mt-3 leading-relaxed font-light">
                Our mission goes beyond walls and roofs. We don’t raise children here to memorize; we raise them to operate.
                In this community, the unspoken curriculum is capability: digital skills, financial intelligence, interpersonal mastery, negotiation, and real-world execution.
                We’re not raising students. We’re raising successors with options.
              </p>
              <p class="text-slate-700 mt-3 leading-relaxed font-light">
                The world rewards those who can think, speak, build, and influence. Your child will learn how to enter rooms, hold rooms, and leave rooms with leverage.
                Because we know that money can’t buy happiness—but poverty can buy regret. The point isn’t riches. The point is removing chaos from your family’s future, so peace and progress become your default setting.
              </p>
            </div>

            <div class="glass-panel rounded-3xl p-6 md:p-8">
              <div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Access</div>
              <h3 class="text-2xl md:text-3xl font-serif text-slate-900 mt-2">The Tightest Circle in the Country</h3>
              <p class="text-slate-700 mt-3 leading-relaxed font-light">
                Just because you can afford it doesn’t mean you qualify. Wealth is common, but class is rare.
              </p>
              <p class="text-slate-700 mt-3 leading-relaxed font-light">
                When you hold a key to Amada, you are not just a neighbor; you are part of a private board of the elite.
                The class that cannot be purchased is what earns access here—values, discipline, discretion, and a standard of living that doesn’t beg for attention.
              </p>
            </div>

            <div class="glass-panel rounded-3xl p-6 md:p-8">
              <div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Customization</div>
              <h3 class="text-2xl md:text-3xl font-serif text-slate-900 mt-2">Your Sanctuary, Your Canvas</h3>
              <p class="text-slate-700 mt-3 leading-relaxed font-light">
                While our philosophy is rigid, your home is flexible. The exterior maintains the prestige of the street, but the interior? That is your playground.
                We offer three floors of blank canvas and an interactive floorplan builder that allows you to play god with your living space before you even lay a brick.
              </p>
              <p class="text-slate-700 mt-3 leading-relaxed font-light">
                Want a private cinema on the 3rd floor? Done. Need a family lounge on the 2nd floor? It’s yours. Desire a 5-bedroom fortress? We build it.
              </p>
              <p class="text-slate-700 mt-3 leading-relaxed font-light">
                Why join a club when you live in one? The Amada amenities are not "shared facilities"; they are curated experiences designed to support the lifestyle of the elite.
                From the Lagoon (a resort-style water body) to the Putting Green (for the deal-closing putt), every square meter serves a purpose.
                Residents enjoy exclusive access to the Terminal Mall for luxury retail and arcade leisure, and The Clinic—discreet, world-class medical access minutes from your bed.
              </p>
            </div>

            <div class="glass-panel rounded-3xl p-6 md:p-8">
              <div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Outcome</div>
              <h3 class="text-2xl md:text-3xl font-serif text-slate-900 mt-2">Some people buy homes. Others buy outcomes.</h3>
              <p class="text-slate-700 mt-3 leading-relaxed font-light">
                This is the kind of decision your grandchildren will feel. Not because of the building—but because you placed your family where the future is designed, curated, and defended.
              </p>
              <p class="text-slate-900 mt-3 leading-relaxed font-semibold">
                Welcome to Amada.
              </p>
            </div>
          </div>

          <!-- Sidebar -->
          <aside class="lg:col-span-2 space-y-6 reveal lg:sticky lg:top-28">
            <div class="glass-panel rounded-3xl p-6">
              <div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">At A Glance</div>
              <div class="mt-4 grid grid-cols-2 gap-3">
                <div class="rounded-3xl bg-white/60 border border-slate-200 p-5">
                  <div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Keys</div>
                  <div class="text-3xl font-extrabold text-slate-900 mt-2">75</div>
                  <div class="text-sm text-slate-600 mt-1">Private residency slots</div>
                </div>
                <div class="rounded-3xl bg-white/60 border border-slate-200 p-5">
                  <div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Nations</div>
                  <div class="text-3xl font-extrabold text-slate-900 mt-2">5</div>
                  <div class="text-sm text-slate-600 mt-1">Territories as districts</div>
                </div>
                <div class="rounded-3xl bg-white/60 border border-slate-200 p-5">
                  <div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Commute</div>
                  <div class="text-3xl font-extrabold text-slate-900 mt-2">12m</div>
                  <div class="text-sm text-slate-600 mt-1">Helipad → living room</div>
                </div>
                <div class="rounded-3xl bg-white/60 border border-slate-200 p-5">
                  <div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Access</div>
                  <div class="text-3xl font-extrabold text-slate-900 mt-2">PR</div>
                  <div class="text-sm text-slate-600 mt-1">Invitation-grade entry</div>
                </div>
              </div>
            </div>

            <div class="glass-panel rounded-3xl p-6">
              <div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Territory Inventory</div>
              <h4 class="text-xl font-serif text-slate-900 mt-2">75 keys, structured by street.</h4>
              <p class="text-sm text-slate-600 mt-2 leading-relaxed">
                Each territory contains 14 homes plus 1 Presidential Villa positioned at the cul-de-sac.
              </p>
              <div class="mt-4 grid grid-cols-2 gap-3">
                <div class="rounded-2xl bg-white/60 border border-slate-200 p-4">
                  <div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Presidential Units</div>
                  <div class="text-2xl font-extrabold text-slate-900 mt-1">5</div>
                </div>
                <div class="rounded-2xl bg-white/60 border border-slate-200 p-4">
                  <div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Villa Size</div>
                  <div class="text-sm text-slate-800 mt-1 font-semibold">1,400 sqm</div>
                </div>
                <div class="rounded-2xl bg-white/60 border border-slate-200 p-4"><div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">New York Houses</div><div class="text-2xl font-extrabold text-slate-900 mt-1">14</div></div>
                <div class="rounded-2xl bg-white/60 border border-slate-200 p-4"><div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">London Houses</div><div class="text-2xl font-extrabold text-slate-900 mt-1">14</div></div>
                <div class="rounded-2xl bg-white/60 border border-slate-200 p-4"><div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Toronto Houses</div><div class="text-2xl font-extrabold text-slate-900 mt-1">14</div></div>
                <div class="rounded-2xl bg-white/60 border border-slate-200 p-4"><div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Paris Houses</div><div class="text-2xl font-extrabold text-slate-900 mt-1">14</div></div>
                <div class="rounded-2xl bg-white/60 border border-slate-200 p-4"><div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Dubai Houses</div><div class="text-2xl font-extrabold text-slate-900 mt-1">14</div></div>
              </div>
            </div>

            <div class="glass-panel rounded-3xl p-6">
              <div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Amenities</div>
              <h4 class="text-xl font-serif text-slate-900 mt-2">Curated experiences, not facilities.</h4>
              <p class="text-sm text-slate-600 mt-2 leading-relaxed">
                From daily convenience to legacy lifestyle — every zone serves a purpose.
              </p>

              <div class="mt-4 space-y-3">
                <div class="rounded-3xl bg-white/60 border border-slate-200 overflow-hidden flex items-center gap-4">
                  <div class="w-20 h-16 bg-slate-100 overflow-hidden shrink-0">
                    <img src="amada-masterplan-estate-aerial.png" alt="Terminal Mall" loading="lazy" class="w-full h-full object-cover"/>
                  </div>
                  <div class="py-4 pr-4">
                    <div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Mall</div>
                    <div class="text-sm font-semibold text-slate-900 mt-1">Terminal Mall</div>
                  </div>
                </div>

                <div class="rounded-3xl bg-white/60 border border-slate-200 overflow-hidden flex items-center gap-4">
                  <div class="w-20 h-16 bg-slate-100 overflow-hidden shrink-0">
                    <img src="amada-resort-lagoon-pool.png" alt="Resort and hotel" loading="lazy" class="w-full h-full object-cover"/>
                  </div>
                  <div class="py-4 pr-4">
                    <div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Resort / Hotel</div>
                    <div class="text-sm font-semibold text-slate-900 mt-1">Resort-grade stays</div>
                  </div>
                </div>

                <div class="rounded-3xl bg-white/60 border border-slate-200 overflow-hidden flex items-center gap-4">
                  <div class="w-20 h-16 bg-slate-100 overflow-hidden shrink-0">
                    <img src="amada-townhome-street-brick.png" alt="School" loading="lazy" class="w-full h-full object-cover"/>
                  </div>
                  <div class="py-4 pr-4">
                    <div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">School</div>
                    <div class="text-sm font-semibold text-slate-900 mt-1">Primary • Secondary • University</div>
                  </div>
                </div>

                <div class="rounded-3xl bg-white/60 border border-slate-200 overflow-hidden flex items-center gap-4">
                  <div class="w-20 h-16 bg-slate-100 overflow-hidden shrink-0">
                    <img src="amada-masterplan-estate-aerial-angle.png" alt="Park" loading="lazy" class="w-full h-full object-cover"/>
                  </div>
                  <div class="py-4 pr-4">
                    <div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Park</div>
                    <div class="text-sm font-semibold text-slate-900 mt-1">Green corridors</div>
                  </div>
                </div>

                <div class="rounded-3xl bg-white/60 border border-slate-200 overflow-hidden flex items-center gap-4">
                  <div class="w-20 h-16 bg-slate-100 overflow-hidden shrink-0">
                    <img src="amada-estate-layout-collage-2x.png" alt="Golf" loading="lazy" class="w-full h-full object-cover"/>
                  </div>
                  <div class="py-4 pr-4">
                    <div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Golf</div>
                    <div class="text-sm font-semibold text-slate-900 mt-1">Putting Green</div>
                  </div>
                </div>
              </div>
            </div>

            <div class="grid grid-cols-1 gap-3">
              <button onclick="location.hash='#/assets'" class="w-full bg-slate-900 text-white py-4 rounded-2xl font-extrabold uppercase tracking-widest hover:bg-slate-800 transition-colors shadow-lg text-xs flex items-center justify-center gap-2">
                Browse Assets
                <i data-lucide="arrow-right" class="w-4 h-4"></i>
              </button>
              <button onclick="location.hash='#/pr-card'" class="w-full py-4 rounded-2xl font-bold uppercase tracking-widest border border-slate-200 bg-white/70 hover:bg-white transition-colors text-xs text-slate-800">
                Request PR Card
              </button>
            </div>
          </aside>
        </div>
      </div>
    </section>

    <!-- ASSETS -->
    <section class="page" data-page="assets" id="page-assets">
      <div class="max-w-7xl mx-auto px-6 py-14">
        <div class="text-center mb-10 reveal">
          <span class="text-xs font-bold tracking-widest uppercase text-slate-400">Assets</span>
          <h2 class="text-4xl md:text-6xl font-serif mt-2">Select an Asset on the Layout</h2>
          <p class="text-lg text-slate-600 font-light max-w-3xl mx-auto mt-4 leading-relaxed">
            No inventory lists. No search. Just the estate map — click an Asset, see its details and floor plan instantly.
          </p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-5 gap-8 items-start">
          <!-- Estate Layout -->
          <div class="lg:col-span-3 glass-panel rounded-3xl p-6 reveal">
            <div class="flex items-start justify-between gap-4">
              <div>
                <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/60 border border-slate-200">
                  <i data-lucide="layout-dashboard" class="w-4 h-4 text-slate-700"></i>
                  <span class="text-xs font-semibold tracking-widest uppercase text-slate-600">Estate Layout</span>
                </div>
                <h3 class="text-2xl md:text-3xl font-serif mt-3">Territories • Road • Amenities</h3>
                <p class="text-sm text-slate-500 mt-2">Click a unit square to select it.</p>
              </div>

              <button onclick="openLegal('bylaws')"
                      class="px-4 py-2 rounded-full text-xs font-semibold tracking-widest uppercase border border-slate-200 bg-white/60 hover:bg-white transition">
                Estate Bylaws
              </button>
            </div>

            <div class="mt-6 estate-canvas" style="height: 520px;">
              <div class="estate-inner"></div>

              <div class="absolute inset-0 p-4">
                <div class="w-full h-full grid gap-3" style="grid-template-columns: 1fr 18px .72fr;">
                  <!-- LEFT: Territories -->
                  <div class="space-y-3 overflow-auto pr-1" id="territoryBands"></div>

                  <!-- ROAD -->
                  <div class="estate-road"></div>

                  <!-- RIGHT: Amenities -->
                  <div class="overflow-auto">
                    <div class="amenity p-4 space-y-3">
                      <div class="amenity-pill">Shopping Mall & Offices</div>
                      <div class="amenity-block">Parking Lot & Helipad</div>

                      <div class="amenity-card">
                        <div class="text-[10px] uppercase tracking-widest text-slate-500 font-bold mb-2">School</div>
                        <div class="h-16 rounded-xl bg-slate-100 border border-slate-200 flex items-center justify-center text-slate-500 text-xs">
                          School Block
                        </div>
                      </div>

                      <div class="grid grid-cols-2 gap-3">
                        <div class="amenity-card text-center text-xs font-semibold text-slate-700">Park</div>
                        <div class="amenity-card text-center text-xs font-semibold text-slate-700">Dog Park</div>
                      </div>

                      <div class="amenity-card text-center">
                        <div class="text-xs font-semibold text-slate-800">Leisure Center</div>
                        <div class="mt-2 h-14 rounded-xl bg-slate-50 border border-slate-200 flex items-center justify-center text-slate-500 text-xs">
                          Activity Hub
                        </div>
                      </div>

                      <div class="amenity-card text-center">
                        <div class="text-xs font-semibold text-slate-800">Golf</div>
                        <div class="mt-2 h-12 rounded-xl bg-green-50 border border-green-200 flex items-center justify-center text-green-700 text-xs font-semibold">
                          Putting Green
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Tooltip -->
              <div id="unitTip" class="tip hidden">UNIT</div>
            </div>

            <div class="mt-5 flex flex-wrap gap-2 text-[11px] text-slate-600">
              <span class="px-3 py-1 rounded-full border border-slate-200 bg-white/60 uppercase tracking-widest">
                <span class="inline-block w-2 h-2 rounded-full bg-green-500 mr-2"></span>Available
              </span>
              <span class="px-3 py-1 rounded-full border border-slate-200 bg-white/60 uppercase tracking-widest">
                <span class="inline-block w-2 h-2 rounded-full bg-amber-500 mr-2"></span>Reserved
              </span>
              <span class="px-3 py-1 rounded-full border border-slate-200 bg-white/60 uppercase tracking-widest">
                <span class="inline-block w-2 h-2 rounded-full bg-slate-400 mr-2"></span>Waitlist
              </span>
              <span class="px-3 py-1 rounded-full border border-slate-200 bg-white/60 uppercase tracking-widest">
                Click = Select
              </span>
            </div>
          </div>

          <!-- Selected Unit -->
          <div class="lg:col-span-2 space-y-6 reveal">
            <div class="glass-panel rounded-3xl p-6">
              <div class="flex items-start justify-between gap-4">
                <div>
                  <span class="text-xs font-bold tracking-widest uppercase text-slate-400">Selected Asset</span>
                  <h3 class="text-2xl font-serif mt-2" id="selectedTitle">None selected</h3>
                  <p class="text-sm text-slate-600 mt-2 leading-relaxed" id="selectedDesc">
                    Click any unit square on the layout to preview details and floor plan.
                  </p>
                </div>
                <div class="w-12 h-12 rounded-2xl bg-white/60 border border-slate-200 flex items-center justify-center">
                  <i data-lucide="home" class="w-6 h-6 text-slate-700"></i>
                </div>
              </div>

              <div class="mt-6 grid grid-cols-2 gap-3" id="selectedStats">
                <div class="rounded-2xl bg-white/60 border border-slate-200 p-4">
                  <p class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Status</p>
                  <p class="text-sm text-slate-800 mt-1" id="statStatus">—</p>
                </div>
                <div class="rounded-2xl bg-white/60 border border-slate-200 p-4">
                  <p class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Price</p>
                  <p class="text-sm text-slate-800 mt-1" id="statPrice">—</p>
                </div>
                <div class="rounded-2xl bg-white/60 border border-slate-200 p-4">
                  <p class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Beds / Baths</p>
                  <p class="text-sm text-slate-800 mt-1" id="statBeds">—</p>
                </div>
                <div class="rounded-2xl bg-white/60 border border-slate-200 p-4">
                  <p class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Size</p>
                  <p class="text-sm text-slate-800 mt-1" id="statSize">—</p>
                </div>
              </div>

              <div class="mt-6 rounded-3xl border border-slate-200 bg-white/55 overflow-hidden">
                <div class="px-5 py-4 border-b border-slate-200/60 flex items-center justify-between gap-4">
                  <div>
                    <div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Floor Plan Preview</div>
                    <div class="text-sm text-slate-700 mt-1" id="planLabel">Select an asset to generate a preview.</div>
                  </div>
                  <button onclick="openFloorplanModal()"
                          class="px-4 py-2 rounded-full text-xs font-semibold tracking-widest uppercase border border-slate-200 bg-white/70 hover:bg-white transition">
                    View
                  </button>
                </div>
                <div class="p-4 bg-white/50" id="floorplanPreview">
                  <div class="h-44 rounded-2xl border border-slate-200 bg-slate-50 flex items-center justify-center text-slate-400 text-sm">
                    No asset selected
                  </div>
                </div>
              </div>

              <div class="mt-6 flex gap-3">
                <button onclick="goPRCardWithSelection()"
                        class="flex-1 bg-slate-900 text-white py-3 rounded-2xl font-bold uppercase tracking-widest hover:bg-slate-800 transition-colors shadow-lg text-xs">
                  Request PR Card
                </button>
                <button onclick="downloadSelectedDossierPDF()"
                        class="px-5 py-3 border border-slate-200 rounded-2xl font-bold uppercase tracking-widest hover:bg-white/70 transition-colors text-xs text-slate-700">
                  Download PDF
                </button>
              </div>

              <p class="text-center text-[10px] text-slate-500 mt-4">
                By selecting an asset, you agree to the <button class="underline underline-offset-4 hover:text-slate-900" onclick="openLegal('terms')">Terms &amp; Conditions</button>.
              </p>
            </div>

	            
	          </div>
	        </div>
	      </div>
	    </section>

    <!-- PR CARD -->
    <section class="page" data-page="pr-card" id="page-pr-card">
      <div class="prx-wrap">
        <div class="prx-dashboard" id="prxDashboard">
          <div class="prx-cube-bg"></div>

          <div class="prx-text">
            <div class="text-[10px] uppercase tracking-[0.25em] font-bold text-slate-400 mb-6">Final Step</div>
            <h1>Not For Everyone.<br/>Perhaps, For You.</h1>
            <p>Apply for Permanent Residency.</p>

            <div class="flex flex-col gap-4">
              <div class="flex items-center gap-3">
                <div class="flex -space-x-3">
                  <img src="https://i.pravatar.cc/100?img=33" alt="Avatar" class="w-10 h-10 rounded-full border-2 border-slate-900"/>
                  <img src="https://i.pravatar.cc/100?img=47" alt="Avatar" class="w-10 h-10 rounded-full border-2 border-slate-900"/>
                  <img src="https://i.pravatar.cc/100?img=12" alt="Avatar" class="w-10 h-10 rounded-full border-2 border-slate-900"/>
                </div>
                <div class="text-xs font-semibold text-slate-300">
                  <span class="text-white">124 others</span> applied.
                </div>
              </div>

              <div class="flex flex-wrap gap-3 text-[10px] font-bold tracking-widest uppercase bg-slate-800/50 p-3 rounded-lg border border-white/5 w-fit">
                <div class="flex items-center gap-1.5 text-green-400">
                  <div class="w-1.5 h-1.5 rounded-full bg-green-500"></div>
                  2 Approved
                </div>
                <div class="flex items-center gap-1.5 text-red-400">
                  <div class="w-1.5 h-1.5 rounded-full bg-red-500"></div>
                  36 Rejected
                </div>
                <div class="flex items-center gap-1.5 text-amber-400">
                  <div class="w-1.5 h-1.5 rounded-full bg-amber-500"></div>
                  80 Being Reviewed
                </div>
              </div>
            </div>
          </div>

          <div class="prx-card-col">
            <div class="prx-glass" id="prxGlass">
              <div id="prxFormView" class="w-full flex flex-col items-center">
                <div class="w-full grid grid-cols-2 gap-2 px-2 mb-4">
                  <button type="button" id="prxModePR"
                          class="rounded-2xl px-4 py-3 text-[10px] font-extrabold tracking-[0.25em] uppercase border border-white/10 bg-white/10 text-white hover:bg-white/15 transition">
                    PR Card
                  </button>
                  <button type="button" id="prxModeVISA"
                          class="rounded-2xl px-4 py-3 text-[10px] font-extrabold tracking-[0.25em] uppercase border border-white/10 bg-white/5 text-white/85 hover:bg-white/10 transition">
                    VISA (Visit)
                  </button>
                </div>

                <div class="w-full flex justify-between items-center px-2 mb-4">
                  <div class="flex items-center gap-2">
                    <i data-lucide="gem" class="w-4 h-4 text-white"></i>
                    <span class="text-xs font-bold tracking-widest text-white" id="prxHeaderBrand">AMADA PR</span>
                  </div>
                  <span class="text-[9px] font-bold tracking-widest text-slate-400 uppercase">Card Status: Preview</span>
                </div>

                <div class="prx-card-container" id="prxCard">
                  <div class="prx-card" id="prxCardInner">
                    <div class="prx-noise"></div>
                    <div class="prx-shine" id="prxShine"></div>
                    <div class="prx-qr" id="prxQrWrap" aria-hidden="true">
                      <canvas id="prxQrCanvas" width="120" height="120"></canvas>
                    </div>
                    <div class="prx-big" id="prxCardNumber">012</div>

                    <div class="prx-content flex justify-between items-start">
                      <div class="flex items-center gap-2">
                        <i data-lucide="gem" class="w-4 h-4 text-slate-400"></i>
                        <span class="serif text-sm tracking-widest text-slate-200 font-semibold">AMADA</span>
                      </div>
                      <svg class="w-6 h-6 text-slate-500 opacity-60 transform rotate-90" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-5.5-2.5l7.51-3.22-7.52-3.22V17.5zM17.5 12c0-1.85-.98-3.48-2.45-4.38l-1.15 1.77c.88.59 1.45 1.58 1.45 2.71s-.57 2.12-1.45 2.71l1.15 1.77c1.47-.9 2.45-2.53 2.45-4.38z"/>
                      </svg>
                    </div>

                    <div class="prx-content flex items-end mt-auto h-full pb-0">
                      <div>
                        <div class="text-[8px] uppercase tracking-widest text-slate-400 mb-1 font-bold" id="prxCardHolderLabel">Permanent Resident</div>
                        <div class="serif text-lg prx-text-accent tracking-wide uppercase leading-tight" id="prxCardName">
                          Dr. Aliko Dangote
                        </div>
                      </div>
                    </div>

                    <div class="prx-vert">
                      <div class="text-white text-[10px] font-bold tracking-widest uppercase flex items-center gap-2" id="prxCardTier">
                        <span>New York Applicant</span>
                        <i data-lucide="building-2" class="w-3 h-3 text-slate-400 -rotate-90"></i>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="w-full space-y-4">
                  <div class="w-full">
                    <label class="prx-label">Resident Full Name</label>
                    <input type="text" class="prx-input" placeholder="e.g. Dr. Aliko Dangote" id="prxNameInput" maxlength="24">
                    <div class="prx-errtext" id="prxNameError">Please enter a valid name (min 3 chars).</div>
                  </div>

                  <div class="w-full">
                    <label class="prx-label">Phone Number</label>
                    <input type="tel" class="prx-input" placeholder="08012345678" id="prxPhoneInput" maxlength="11">
                    <div class="prx-errtext" id="prxPhoneError">Phone number must be exactly 11 digits.</div>
                  </div>

                  <div class="w-full">
                    <label class="prx-label">Select Territory Tier</label>
                    <select class="prx-input prx-select" id="prxTierSelect">
                      <option value="ny">New York (012)</option>
                      <option value="dubai">Dubai (014)</option>
                      <option value="london">London (007)</option>
                      <option value="canada">Toronto (004)</option>
                      <option value="naija">Paris (009)</option>
                      <option value="presidential">Presidential (001)</option>
                      <option value="visa">Visa Applicant (VISA)</option>
                    </select>
                  </div>

                  <div class="w-full hidden" id="prxVisaFields">
                    <label class="prx-label">Type of Visit (VISA)</label>
                    <select class="prx-input prx-select" id="prxVisitType">
                      <option value="" selected disabled>Select a visit type</option>
                      <option value="Friend">Friend</option>
                      <option value="Family">Family</option>
                      <option value="Tourism">Tourism</option>
                      <option value="Meeting">Meeting</option>
                      <option value="Shopping">Shopping</option>
                      <option value="School drop-off">School drop-off</option>
                      <option value="Golfing">Golfing</option>
                      <option value="Business">Business</option>
                    </select>
                    <div class="prx-errtext" id="prxVisitError">Please select a visit type.</div>
                    <div class="mt-4 grid grid-cols-1 gap-3" id="prxVisaDynamic"></div>
                  </div>

	                  <div class="w-full rounded-2xl border border-white/10 bg-white/5 p-4">
	                    <label class="flex items-start gap-3 text-[11px] tracking-widest uppercase font-extrabold text-white/85 select-none">
	                      <input id="prxTermsCheck" type="checkbox" class="mt-0.5 h-4 w-4 accent-white"/>
	                      <span>
	                        I have read and agree to the
	                        <button type="button" class="underline underline-offset-4 hover:text-white" onclick="openLegal('terms')">Terms</button>
	                        and
	                        <button type="button" class="underline underline-offset-4 hover:text-white" onclick="openLegal('privacy')">Privacy Policy</button>.
	                      </span>
	                    </label>
	                    <div class="prx-errtext" id="prxTermsError">Please accept Terms &amp; Privacy to continue.</div>
	                  </div>

	                  <button class="prx-btn" id="prxApplyBtn" type="button" onclick="prxSubmitForm()">Apply For Waitlist</button>

	                  <p class="text-center text-[10px] text-slate-400 mt-2">
	                    Applications are invitation-grade and subject to eligibility review.
	                  </p>
	                </div>
	              </div>

              <div id="prxSuccessView" class="hidden prx-success w-full">
                <div class="text-center">
                  <div class="w-12 h-12 rounded-full bg-green-500/10 text-green-400 flex items-center justify-center mx-auto mb-4">
                    <i data-lucide="check" class="w-7 h-7"></i>
                  </div>
                  <h3 class="text-2xl font-serif text-white mb-2" id="prxSuccessTitle">Request Received</h3>
                  <p class="text-sm text-slate-400 leading-relaxed">
                    Your dossier ID is <span class="text-white font-bold tracking-wider" id="prxDossierId">#NY-012</span>.<br/>
                    <span id="prxSuccessSub">Our private board will review your credentials within 48 hours.</span>
                  </p>
                </div>

	                <div class="w-full flex flex-col items-center gap-3">
	                  <div id="prxCardResult" class="transform origin-top scale-95 mb-2"></div>
	                  <button class="prx-btn flex items-center justify-center gap-2" type="button" onclick="prxDownloadPack()">
	                    <i data-lucide="download" class="w-4 h-4"></i>
	                    <span>Download Application Pack</span>
	                  </button>
	                  <p class="text-center text-[10px] text-slate-400">
	                    Includes Card, Brochure, Newsletter, Terms &amp; Conditions, and Acknowledgement Letter.
	                  </p>
	                </div>

                <div id="prxDepositWrap">
                  <div class="text-center">
                    <div class="text-xs font-bold tracking-[0.2em] text-amber-500 uppercase mb-2">Deposit To Engage</div>
                    <p class="text-sm text-slate-300">Deposit <span class="text-white font-semibold">₦100,000,000</span> to secure the right for your application to be reviewed.</p>
                  </div>

                  <div class="prx-deposit">
                    <div class="prx-row">
                      <span class="prx-k">Account Name</span>
                      <span class="prx-v">Amada Residence</span>
                    </div>
                    <div class="prx-row">
                      <span class="prx-k">Bank Name</span>
                      <span class="prx-v">Stanbic IBTC</span>
                    </div>
                    <div class="prx-row">
                      <span class="prx-k">Account Number</span>
                      <span class="prx-v text-xl tracking-widest">5770707070</span>
                    </div>
                    <div class="prx-row">
                      <span class="prx-k">Amount</span>
                      <span class="prx-v prx-amt">₦100,000,000</span>
                    </div>
                    <div class="prx-row">
                      <span class="prx-k">Reference</span>
                      <span class="prx-v text-amber-400" id="prxRefId">#NY-012</span>
                    </div>
                  </div>

                  <button class="prx-btn prx-btn-ghost flex items-center justify-center gap-2" type="button" onclick="prxCopyDetails()">
                    <i data-lucide="copy" class="w-4 h-4"></i>
                    <span>Copy Deposit Details</span>
                  </button>
                </div>

                <button class="text-xs font-bold uppercase tracking-widest text-slate-400 hover:text-white mt-2" type="button" onclick="prxResetPR()">
                  Back
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

  </main>

  <!-- Global CTA -->
  <section class="py-16 px-4 border-t border-slate-200/60 bg-white/20 backdrop-blur-sm">
    <div class="max-w-7xl mx-auto">
      <div class="relative overflow-hidden rounded-3xl p-8 md:p-12 bg-[#0f172a] text-white shadow-2xl border border-white/10">
        <div class="prx-cube-bg"></div>
        <div class="absolute inset-0 opacity-80 bg-[radial-gradient(circle_at_30%_20%,rgba(56,189,248,.18),transparent_45%),radial-gradient(circle_at_70%_80%,rgba(34,197,94,.14),transparent_45%)]"></div>
        <div class="absolute inset-0 bg-gradient-to-b from-white/5 via-transparent to-black/20"></div>

        <div class="relative grid grid-cols-1 md:grid-cols-5 gap-10 items-center">
          <div class="md:col-span-3">
            <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/10 border border-white/15">
              <i data-lucide="id-card" class="w-4 h-4 text-white/85"></i>
              <span class="text-xs font-semibold tracking-widest uppercase text-white/80">PR Card Access</span>
            </div>
            <h3 class="text-4xl md:text-5xl font-serif mt-4 text-white">Not For Everyone.<br/>Perhaps, For You.</h3>
            <p class="text-white/70 mt-4 font-light leading-relaxed max-w-2xl">
              Interiors are built to your taste across three floors — starting at <span class="font-semibold text-white">$2,500,000</span>.
              Choose rooms, cinema, lounges, play areas, and more.
            </p>
          </div>

          <div class="md:col-span-2 flex flex-col gap-3">
            <button onclick="location.hash='#/pr-card'"
                    class="w-full bg-white text-slate-900 py-4 rounded-2xl font-extrabold uppercase tracking-widest hover:bg-slate-100 transition-colors shadow-lg text-xs flex items-center justify-center gap-2">
              Buy a Residence
              <i data-lucide="arrow-right" class="w-4 h-4"></i>
            </button>
            <button onclick="location.hash='#/assets'"
                    class="w-full py-4 rounded-2xl font-bold uppercase tracking-widest border border-white/20 bg-white/10 hover:bg-white/15 transition-colors text-xs text-white">
              Build Your Floor Plan
            </button>
            <p class="text-[10px] text-white/55 text-center">
              Viewing and purchase access are subject to approval.
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Site Footer (shared) -->
	  <footer class="bg-white border-t border-slate-200 py-20 px-4 pb-24">
	    <div class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-start gap-12">
	      <div class="space-y-6 max-w-xs">
	        <span class="serif text-3xl font-semibold tracking-tight text-slate-900">AMADA<span class="font-light opacity-60">REALTY</span></span>
	        <p class="text-sm text-slate-500 leading-relaxed">
	          The world's first multi-national residential sanctuary. A project by Amada Group.
	        </p>
	        <div class="flex gap-4">
	          <i data-lucide="instagram" class="w-5 h-5 text-slate-400 hover:text-slate-900 cursor-pointer"></i>
	          <i data-lucide="twitter" class="w-5 h-5 text-slate-400 hover:text-slate-900 cursor-pointer"></i>
	          <i data-lucide="linkedin" class="w-5 h-5 text-slate-400 hover:text-slate-900 cursor-pointer"></i>
	        </div>
	      </div>

      <div class="grid grid-cols-2 md:grid-cols-3 gap-12 text-sm text-slate-600 w-full md:w-auto">
		        <div class="space-y-4">
		          <h5 class="font-bold text-slate-900 uppercase tracking-widest text-xs">Explore</h5>
		          <ul class="space-y-2">
		            <li><a href="#/about" class="hover:text-slate-900">About</a></li>
		            <li><a href="#/city" class="hover:text-slate-900">The City</a></li>
		            <li><a href="#/assets" class="hover:text-slate-900">Property Page</a></li>
		            <li><button onclick="scrollToHomeSection('home-amenities')" class="hover:text-slate-900 text-left">Privileges</button></li>
		            <li><a href="#/pr-card" class="hover:text-slate-900">PR Card</a></li>
		          </ul>
		        </div>

        <div class="space-y-4">
          <h5 class="font-bold text-slate-900 uppercase tracking-widest text-xs">Legal</h5>
          <ul class="space-y-2">
            <li><button onclick="openLegal('privacy')" class="hover:text-slate-900 text-left">Privacy Policy</button></li>
            <li><button onclick="openLegal('terms')" class="hover:text-slate-900 text-left">Terms &amp; Conditions</button></li>
            <li><button onclick="openLegal('bylaws')" class="hover:text-slate-900 text-left">Estate Bylaws</button></li>
          </ul>
        </div>

		        <div class="space-y-4">
		          <h5 class="font-bold text-slate-900 uppercase tracking-widest text-xs">Contact</h5>
		          <div class="space-y-3">
		            <div> 
		              <div class="text-slate-500 text-xs leading-relaxed mt-1">Access is limited to serious buyers and committed applicants.</div>
		            </div>

		            <button onclick="location.hash='#/pr-card'"
		                    class="inline-flex items-center justify-center gap-2 px-4 py-2 rounded-full bg-slate-900 text-white text-[10px] font-extrabold tracking-widest uppercase hover:bg-slate-800 transition shadow">
		              Submit Buyer Qualification Form
		              <i data-lucide="arrow-right" class="w-3 h-3"></i>
		            </button>

		            <div class="pt-2">
		              <div class="font-semibold text-slate-900">Press &amp; Partnerships</div>
		              <div class="mt-2 space-y-1 text-slate-600">
		                <a class="block hover:text-slate-900" href="mailto:press@amadarealty.com">press@amadarealty.com</a>
		                <a class="block hover:text-slate-900" href="mailto:partnerships@amadarealty.com">partnerships@amadarealty.com</a>
		              </div>
		            </div>
 
		          </div>
		        </div>
	      </div>
	    </div>

    <div class="max-w-7xl mx-auto pt-14">
      <p class="text-center text-[10px] text-slate-300 uppercase tracking-widest">
        © 2024 AMADA REALTY. ALL RIGHTS RESERVED. LUXURY IS A DISCIPLINE.
      </p>
    </div>
  </footer>

  <!-- Gallery Modal -->
  <div id="gallery-modal" class="modal-overlay fixed inset-0 z-[90] flex items-center justify-center p-4 bg-slate-900/70 backdrop-blur-sm" role="dialog" aria-modal="true" aria-label="Gallery">
    <div class="modal-content w-full max-w-6xl bg-white rounded-3xl overflow-hidden shadow-2xl relative">
      <button onclick="closeGalleryModal()" class="absolute top-4 right-4 z-10 w-10 h-10 bg-white/70 rounded-full flex items-center justify-center hover:bg-white transition-colors" aria-label="Close">
        <i data-lucide="x" class="w-5 h-5 text-slate-900"></i>
      </button>

      <button onclick="galleryPrev()" class="absolute left-4 top-1/2 -translate-y-1/2 z-10 w-12 h-12 bg-white/70 rounded-full flex items-center justify-center hover:bg-white transition-colors shadow-lg" aria-label="Previous">
        <i data-lucide="chevron-left" class="w-6 h-6 text-slate-900"></i>
      </button>
      <button onclick="galleryNext()" class="absolute right-4 top-1/2 -translate-y-1/2 z-10 w-12 h-12 bg-white/70 rounded-full flex items-center justify-center hover:bg-white transition-colors shadow-lg" aria-label="Next">
        <i data-lucide="chevron-right" class="w-6 h-6 text-slate-900"></i>
      </button>

      <div class="p-6 md:p-10 border-b border-slate-200 bg-white/80 backdrop-blur">
        <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-6">
          <div>
            <span class="text-xs font-bold tracking-widest uppercase text-slate-400" id="galleryKicker">Gallery</span>
            <h3 class="text-3xl md:text-4xl font-serif mt-2" id="galleryTitle">Estate View</h3>
            <p class="text-sm text-slate-600 mt-2 max-w-3xl" id="gallerySubtitle"></p>
          </div>
          <div class="flex gap-2 flex-wrap">
            <button onclick="location.hash='#/pr-card'; closeGalleryModal(true);" class="px-4 py-2 rounded-full text-xs font-semibold tracking-widest uppercase bg-slate-900 text-white hover:bg-slate-800 transition shadow-lg">Request PR Card</button>
            <button onclick="downloadCurrentGalleryImage()" class="px-4 py-2 rounded-full text-xs font-semibold tracking-widest uppercase border border-slate-200 bg-white hover:bg-slate-50 transition">Download</button>
          </div>
        </div>
      </div>

      <div class="p-4 md:p-8 bg-slate-50">
        <div class="rounded-3xl border border-slate-200 bg-white overflow-hidden">
          <img id="galleryImg" src="" alt="Gallery image" class="w-full h-[52vh] md:h-[62vh] object-cover bg-slate-100"/>
        </div>
      </div>
    </div>
  </div>

  <!-- Floorplan Modal (for selected unit) -->
	  <div id="fp-modal" class="modal-overlay fixed inset-0 z-[70] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm" role="dialog" aria-modal="true" aria-label="Floorplan">
	    <div class="modal-content w-full max-w-5xl max-h-[88vh] bg-white rounded-3xl overflow-hidden shadow-2xl relative flex flex-col">
	      <button onclick="closeFloorplanModal()" class="absolute top-4 right-4 z-10 w-10 h-10 bg-white/60 rounded-full flex items-center justify-center hover:bg-white transition-colors" aria-label="Close">
	        <i data-lucide="x" class="w-5 h-5 text-slate-900"></i>
	      </button>
	
	      <div class="p-5 md:p-6 border-b border-slate-200 bg-white/80 backdrop-blur">
	        <div class="flex items-start justify-between gap-6">
	          <div>
	            <span class="text-xs font-bold tracking-widest uppercase text-slate-400">Floor Plan</span>
	            <h3 class="text-2xl md:text-3xl font-serif mt-2" id="fpTitle">Asset Floor Plan</h3>
	            <p class="text-xs md:text-sm text-slate-600 mt-2" id="fpSubtitle">Preview generated from unit configuration.</p>
	          </div>
	          <button onclick="downloadSelectedDossierPDF()" class="px-4 py-2 rounded-full text-xs font-semibold tracking-widest uppercase border border-slate-200 bg-white hover:bg-slate-50 transition">
	            Download PDF
	          </button>
	        </div>
	      </div>
	
	      <div id="fpScroll" class="p-4 md:p-6 overflow-auto flex-1">
	        <div class="grid grid-cols-1 lg:grid-cols-5 gap-4">
	          <div class="lg:col-span-3 rounded-3xl border border-slate-200 bg-slate-50 p-3 md:p-4" id="fpBody">
	            <!-- injected -->
	          </div>
	
	          <div class="lg:col-span-2 rounded-3xl border border-slate-200 bg-white/70 p-4" id="interiorBuilder">
	            <div class="flex items-center justify-between gap-3">
	              <div>
	                <div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Interior Builder</div>
	                <div class="text-lg font-serif text-slate-900 mt-1">3 Floors</div>
	              </div>
	              <button type="button" onclick="resetInteriorBuilder()" class="px-3 py-2 rounded-full text-[11px] font-semibold tracking-widest uppercase border border-slate-200 bg-white hover:bg-slate-50 transition">Reset</button>
	            </div>
	
	            <div class="mt-4 grid grid-cols-1 gap-3">
	              <div class="rounded-2xl border border-slate-200 bg-slate-50 p-3">
	                <div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Floor 1</div>
	                <div class="mt-3 grid grid-cols-2 gap-3">
	                  <label class="text-[10px] uppercase tracking-widest text-slate-500 font-bold">Beds
	                    <input id="ib_f1_bed" type="number" min="0" max="20" value="1" oninput="updateInteriorFromBuilder()" class="mt-2 w-full bg-white border border-slate-200 rounded-xl px-3 py-2 text-sm text-slate-900"/>
	                  </label>
	                  <label class="text-[10px] uppercase tracking-widest text-slate-500 font-bold">Baths
	                    <input id="ib_f1_bath" type="number" min="0" max="20" value="1" oninput="updateInteriorFromBuilder()" class="mt-2 w-full bg-white border border-slate-200 rounded-xl px-3 py-2 text-sm text-slate-900"/>
	                  </label>
	                </div>
	              </div>
	
	              <div class="rounded-2xl border border-slate-200 bg-slate-50 p-3">
	                <div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Floor 2</div>
	                <div class="mt-3 grid grid-cols-2 gap-3">
	                  <label class="text-[10px] uppercase tracking-widest text-slate-500 font-bold">Beds
	                    <input id="ib_f2_bed" type="number" min="0" max="20" value="2" oninput="updateInteriorFromBuilder()" class="mt-2 w-full bg-white border border-slate-200 rounded-xl px-3 py-2 text-sm text-slate-900"/>
	                  </label>
	                  <label class="text-[10px] uppercase tracking-widest text-slate-500 font-bold">Baths
	                    <input id="ib_f2_bath" type="number" min="0" max="20" value="2" oninput="updateInteriorFromBuilder()" class="mt-2 w-full bg-white border border-slate-200 rounded-xl px-3 py-2 text-sm text-slate-900"/>
	                  </label>
	                </div>
	                <label class="mt-3 flex items-center gap-2 text-[10px] font-bold uppercase tracking-widest text-slate-600">
	                  <input id="ib_f2_lounge" type="checkbox" checked onchange="updateInteriorFromBuilder()"/>
	                  Family Lounge
	                </label>
	              </div>
	
	              <div class="rounded-2xl border border-slate-200 bg-slate-50 p-3">
	                <div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Floor 3</div>
	                <div class="mt-3 grid grid-cols-2 gap-3">
	                  <label class="text-[10px] uppercase tracking-widest text-slate-500 font-bold">Beds
	                    <input id="ib_f3_bed" type="number" min="0" max="20" value="2" oninput="updateInteriorFromBuilder()" class="mt-2 w-full bg-white border border-slate-200 rounded-xl px-3 py-2 text-sm text-slate-900"/>
	                  </label>
	                  <label class="text-[10px] uppercase tracking-widest text-slate-500 font-bold">Baths
	                    <input id="ib_f3_bath" type="number" min="0" max="20" value="2" oninput="updateInteriorFromBuilder()" class="mt-2 w-full bg-white border border-slate-200 rounded-xl px-3 py-2 text-sm text-slate-900"/>
	                  </label>
	                </div>
	                <div class="mt-3 grid grid-cols-2 gap-3">
	                  <label class="flex items-center gap-2 text-[10px] font-bold uppercase tracking-widest text-slate-600">
	                    <input id="ib_f3_cinema" type="checkbox" checked onchange="updateInteriorFromBuilder()"/>
	                    Cinema
	                  </label>
	                  <label class="flex items-center gap-2 text-[10px] font-bold uppercase tracking-widest text-slate-600">
	                    <input id="ib_f3_play" type="checkbox" checked onchange="updateInteriorFromBuilder()"/>
	                    Play Area
	                  </label>
	                </div>
	              </div>
	            </div>
	          </div>
	        </div>
	      </div>
	    </div>
	  </div>

  <!-- Legal Modal -->
  <div id="legal-modal" class="modal-overlay fixed inset-0 z-[80] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm" role="dialog" aria-modal="true" aria-label="Legal documents">
    <div class="modal-content w-full max-w-5xl bg-white rounded-3xl overflow-hidden shadow-2xl relative">
      <button onclick="closeLegal()" class="absolute top-4 right-4 z-10 w-10 h-10 bg-white/60 rounded-full flex items-center justify-center hover:bg-white transition-colors" aria-label="Close">
        <i data-lucide="x" class="w-5 h-5 text-slate-900"></i>
      </button>

      <div class="p-6 md:p-10 border-b border-slate-200 bg-white/70 backdrop-blur">
        <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-6">
          <div>
            <span class="text-xs font-bold tracking-widest uppercase text-slate-400" id="legalKicker">Legal</span>
            <h3 class="text-3xl md:text-4xl font-serif mt-2" id="legalTitle">Privacy Policy</h3>
            <p class="text-sm text-slate-600 mt-2 max-w-3xl" id="legalSubtitle"></p>
          </div>

          <div class="flex gap-2 flex-wrap">
            <button class="px-4 py-2 rounded-full text-xs font-semibold tracking-widest uppercase border border-slate-200 bg-white hover:bg-slate-50 transition" onclick="openLegal('privacy')">Privacy</button>
            <button class="px-4 py-2 rounded-full text-xs font-semibold tracking-widest uppercase border border-slate-200 bg-white hover:bg-slate-50 transition" onclick="openLegal('terms')">T&amp;C</button>
            <button class="px-4 py-2 rounded-full text-xs font-semibold tracking-widest uppercase border border-slate-200 bg-white hover:bg-slate-50 transition" onclick="openLegal('bylaws')">Bylaws</button>
          </div>
        </div>
      </div>

      <div class="p-6 md:p-10 max-h-[70vh] overflow-auto">
        <div id="legalBody" class="text-slate-700 text-sm leading-relaxed"></div>
      </div>
    </div>
  </div>

  <!-- Territory Modal -->
  <div id="territory-modal" class="modal-overlay fixed inset-0 z-[85] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm" role="dialog" aria-modal="true" aria-label="Territory details">
    <div class="modal-content w-full max-w-5xl bg-white rounded-3xl overflow-hidden shadow-2xl relative">
      <button onclick="closeTerritoryModal()" class="absolute top-4 right-4 z-10 w-10 h-10 bg-white/60 rounded-full flex items-center justify-center hover:bg-white transition-colors" aria-label="Close">
        <i data-lucide="x" class="w-5 h-5 text-slate-900"></i>
      </button>

      <div class="p-6 md:p-10 border-b border-slate-200 bg-white/80 backdrop-blur">
        <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-6">
          <div>
            <span class="text-xs font-bold tracking-widest uppercase text-slate-400" id="terrKicker">Territory</span>
            <h3 class="text-3xl md:text-4xl font-serif mt-2" id="terrTitle">Territory</h3>
            <p class="text-sm text-slate-600 mt-2 max-w-3xl" id="terrSubtitle"></p>
          </div>
          <div class="flex gap-2 flex-wrap">
            <button id="terrToAssetsBtn" class="px-4 py-2 rounded-full text-xs font-semibold tracking-widest uppercase bg-slate-900 text-white hover:bg-slate-800 transition shadow-lg">
              View Units
            </button>
            <button onclick="location.hash='#/pr-card'; closeTerritoryModal(true);" class="px-4 py-2 rounded-full text-xs font-semibold tracking-widest uppercase border border-slate-200 bg-white hover:bg-slate-50 transition">
              Request PR Card
            </button>
          </div>
        </div>
      </div>

      <div class="p-6 md:p-10 bg-slate-50">
        <div class="grid grid-cols-1 lg:grid-cols-5 gap-8 items-start">
          <div class="lg:col-span-3">
            <div id="terrSlider" class="relative rounded-3xl overflow-hidden border border-slate-200 bg-white">
              <img id="terrImage" src="" alt="Territory image" class="w-full h-[280px] md:h-[360px] object-cover bg-slate-100"/>

              <button id="terrPrev" type="button"
                      class="absolute left-4 top-1/2 -translate-y-1/2 z-10 w-11 h-11 bg-white/70 rounded-full flex items-center justify-center hover:bg-white transition-colors shadow-lg"
                      aria-label="Previous image">
                <i data-lucide="chevron-left" class="w-6 h-6 text-slate-900"></i>
              </button>
              <button id="terrNext" type="button"
                      class="absolute right-4 top-1/2 -translate-y-1/2 z-10 w-11 h-11 bg-white/70 rounded-full flex items-center justify-center hover:bg-white transition-colors shadow-lg"
                      aria-label="Next image">
                <i data-lucide="chevron-right" class="w-6 h-6 text-slate-900"></i>
              </button>

              <div id="terrDots" class="absolute bottom-4 inset-x-4 flex items-center justify-center gap-2"></div>
            </div>
          </div>

          <div class="lg:col-span-2 space-y-4">
            <div class="glass-panel rounded-3xl p-6">
              <div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Availability</div>
              <div class="mt-4 grid grid-cols-3 gap-3">
                <div class="rounded-2xl bg-white/70 border border-slate-200 p-4">
                  <div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Available</div>
                  <div class="text-2xl font-extrabold text-slate-900 mt-1" id="terrAvail">0</div>
                </div>
                <div class="rounded-2xl bg-white/70 border border-slate-200 p-4">
                  <div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Reserved</div>
                  <div class="text-2xl font-extrabold text-slate-900 mt-1" id="terrRes">0</div>
                </div>
                <div class="rounded-2xl bg-white/70 border border-slate-200 p-4">
                  <div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Total</div>
                  <div class="text-2xl font-extrabold text-slate-900 mt-1" id="terrTotal">0</div>
                </div>
              </div>

              <div class="mt-4 rounded-2xl bg-white/70 border border-slate-200 p-4">
                <div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Home Sizes</div>
                <div class="text-sm text-slate-700 mt-1" id="terrSizes">—</div>
              </div>
            </div>

            <div class="glass-card rounded-3xl p-6">
              <div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Cul-de-sac</div>
              <div class="text-xl font-serif text-slate-900 mt-2">Presidential Villa</div>
              <p class="text-sm text-slate-600 mt-2 leading-relaxed">
                One per street, positioned at the cul-de-sac.
              </p>
              <div class="mt-4 grid grid-cols-2 gap-3">
                <div class="rounded-2xl bg-white/70 border border-slate-200 p-4">
                  <div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Size</div>
                  <div class="text-sm text-slate-800 mt-1" id="terrVillaSize">1,400 sqm</div>
                </div>
                <div class="rounded-2xl bg-white/70 border border-slate-200 p-4">
                  <div class="text-[10px] uppercase tracking-widest text-slate-400 font-bold">Status</div>
                  <div class="text-sm text-slate-800 mt-1" id="terrVillaStatus">—</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ---------------------------
    // Offline QR (tiny generator)
    // ---------------------------
    // Provides: window.amadaQrToCanvas(canvas, text, { ecc:'M', scale:4, margin:1 })
    // Minimal embed based on classic qrcode-generator patterns (no network required).
	    (function(){
      function QRMath(){ }
      QRMath.EXP_TABLE = new Array(256);
      QRMath.LOG_TABLE = new Array(256);
      for (let i = 0; i < 8; i++) QRMath.EXP_TABLE[i] = 1 << i;
      for (let i = 8; i < 256; i++) QRMath.EXP_TABLE[i] = QRMath.EXP_TABLE[i - 4] ^ QRMath.EXP_TABLE[i - 5] ^ QRMath.EXP_TABLE[i - 6] ^ QRMath.EXP_TABLE[i - 8];
      for (let i = 0; i < 255; i++) QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]] = i;
      QRMath.glog = function(n){ if(n < 1) throw new Error("glog"); return QRMath.LOG_TABLE[n]; };
      QRMath.gexp = function(n){ while(n < 0) n += 255; while(n >= 256) n -= 255; return QRMath.EXP_TABLE[n]; };

      function QRPolynomial(num, shift){
        let offset = 0;
        while (offset < num.length && num[offset] === 0) offset++;
        this.num = new Array(num.length - offset + shift);
        for (let i = 0; i < num.length - offset; i++) this.num[i] = num[i + offset];
      }
      QRPolynomial.prototype.get = function(index){ return this.num[index]; };
      QRPolynomial.prototype.getLength = function(){ return this.num.length; };
      QRPolynomial.prototype.multiply = function(e){
        const num = new Array(this.getLength() + e.getLength() - 1).fill(0);
        for (let i = 0; i < this.getLength(); i++){
          for (let j = 0; j < e.getLength(); j++){
            num[i + j] ^= QRMath.gexp(QRMath.glog(this.get(i)) + QRMath.glog(e.get(j)));
          }
        }
        return new QRPolynomial(num, 0);
      };
      QRPolynomial.prototype.mod = function(e){
        if (this.getLength() - e.getLength() < 0) return this;
        const ratio = QRMath.glog(this.get(0)) - QRMath.glog(e.get(0));
        const num = this.num.slice();
        for (let i = 0; i < e.getLength(); i++){
          num[i] ^= QRMath.gexp(QRMath.glog(e.get(i)) + ratio);
        }
        return new QRPolynomial(num, 0).mod(e);
      };

      function QRRSBlock(totalCount, dataCount){ this.totalCount = totalCount; this.dataCount = dataCount; }
      QRRSBlock.getRSBlocks = function(typeNumber, errorCorrectLevel){
        const rsBlock = QRRSBlock.getRsBlockTable(typeNumber, errorCorrectLevel);
        if (!rsBlock) throw new Error("rsBlock");
        const list = [];
        for (let i = 0; i < rsBlock.length / 3; i++){
          const count = rsBlock[i * 3 + 0];
          const totalCount = rsBlock[i * 3 + 1];
          const dataCount = rsBlock[i * 3 + 2];
          for (let j = 0; j < count; j++) list.push(new QRRSBlock(totalCount, dataCount));
        }
        return list;
      };
	      QRRSBlock.getRsBlockTable = function(typeNumber, errorCorrectLevel){
	        // Table format: [count, totalCount, dataCount, ...]
	        // Index is the qrcode-generator "errorCorrectLevel" (M=0, L=1, H=2, Q=3).
	        const t = QRRSBlock.RS_BLOCK_TABLE;
	        return t[(typeNumber-1)*4 + errorCorrectLevel] || null;
	      };
	      QRRSBlock.RS_BLOCK_TABLE = [
	        // 1 (M, L, H, Q)
	        [1,26,16],[1,26,19],[1,26,9],[1,26,13],
	        // 2
	        [1,44,28],[1,44,34],[1,44,16],[1,44,22],
	        // 3
	        [1,70,44],[1,70,55],[2,35,13],[2,35,17],
	        // 4
	        [2,50,32],[1,100,80],[4,25,9],[2,50,24],
	        // 5
	        [2,67,43],[1,134,108],[2,33,11,2,34,12],[2,33,15,2,34,16],
	        // 6
	        [4,43,27],[2,86,68],[4,43,15],[4,43,19],
	        // 7
	        [4,49,31],[2,98,78],[4,39,13,1,40,14],[2,32,14,4,33,15],
	        // 8
	        [2,60,38,2,61,39],[2,121,97],[4,40,14,2,41,15],[4,40,18,2,41,19],
	        // 9
	        [3,58,36,2,59,37],[2,146,116],[4,36,12,4,37,13],[4,36,16,4,37,17],
	        // 10
	        [4,69,43,1,70,44],[2,86,68,2,87,69],[6,43,15,2,44,16],[6,43,19,2,44,20],
	        // 11
	        [1,80,50,4,81,51],[4,101,81],[3,36,12,8,37,13],[4,50,22,4,51,23],
	        // 12
	        [6,58,36,2,59,37],[2,116,92,2,117,93],[7,42,14,4,43,15],[4,46,20,6,47,21],
	        // 13
	        [8,59,37,1,60,38],[4,133,107],[12,33,11,4,34,12],[8,44,20,4,45,21],
	        // 14
	        [4,64,40,5,65,41],[3,145,115,1,146,116],[11,36,12,5,37,13],[11,36,16,5,37,17],
	        // 15
	        [5,65,41,5,66,42],[5,109,87,1,110,88],[11,36,12,7,37,13],[5,54,24,7,55,25],
	        // 16
	        [7,73,45,3,74,46],[5,122,98,1,123,99],[3,45,15,13,46,16],[15,43,19,2,44,20],
	        // 17
	        [10,74,46,1,75,47],[1,135,107,5,136,108],[2,42,14,17,43,15],[1,50,22,15,51,23],
	        // 18
	        [9,69,43,4,70,44],[5,150,120,1,151,121],[2,42,14,19,43,15],[17,50,22,1,51,23],
	        // 19
	        [3,70,44,11,71,45],[3,141,113,4,142,114],[9,39,13,16,40,14],[17,47,21,4,48,22],
	        // 20
	        [3,67,41,13,68,42],[3,135,107,5,136,108],[15,43,15,10,44,16],[15,54,24,5,55,25],
	        // 21
	        [17,68,42],[4,144,116,4,145,117],[19,46,16,6,47,17],[19,50,22,6,51,23],
	        // 22
	        [17,74,46],[2,139,111,7,140,112],[34,37,13],[7,54,24,16,55,25],
	        // 23
	        [4,75,47,14,76,48],[4,151,121,5,152,122],[16,45,15,14,46,16],[11,54,24,14,55,25],
	        // 24
	        [6,73,45,14,74,46],[6,147,117,4,148,118],[30,46,16,2,47,17],[11,54,24,16,55,25],
	        // 25
	        [8,75,47,13,76,48],[8,132,106,4,133,107],[22,45,15,13,46,16],[7,54,24,22,55,25],
	        // 26
	        [19,74,46,4,75,47],[10,142,114,2,143,115],[33,46,16,4,47,17],[28,50,22,6,51,23],
	        // 27
	        [22,73,45,3,74,46],[8,152,122,4,153,123],[12,45,15,28,46,16],[8,53,23,26,54,24],
	        // 28
	        [3,73,45,23,74,46],[3,147,117,10,148,118],[11,45,15,31,46,16],[4,54,24,31,55,25],
	        // 29
	        [21,73,45,7,74,46],[7,146,116,7,147,117],[19,45,15,26,46,16],[1,53,23,37,54,24],
	        // 30
	        [19,75,47,10,76,48],[5,145,115,10,146,116],[23,45,15,25,46,16],[15,54,24,25,55,25],
	        // 31
	        [2,74,46,29,75,47],[13,145,115,3,146,116],[23,45,15,28,46,16],[42,54,24,1,55,25],
	        // 32
	        [10,74,46,23,75,47],[17,145,115],[19,45,15,35,46,16],[10,54,24,35,55,25],
	        // 33
	        [14,74,46,21,75,47],[17,145,115,1,146,116],[11,45,15,46,46,16],[29,54,24,19,55,25],
	        // 34
	        [14,74,46,23,75,47],[13,145,115,6,146,116],[59,46,16,1,47,17],[44,54,24,7,55,25],
	        // 35
	        [12,75,47,26,76,48],[12,151,121,7,152,122],[22,45,15,41,46,16],[39,54,24,14,55,25],
	        // 36
	        [6,75,47,34,76,48],[6,151,121,14,152,122],[2,45,15,64,46,16],[46,54,24,10,55,25],
	        // 37
	        [29,74,46,14,75,47],[17,152,122,4,153,123],[24,45,15,46,46,16],[49,54,24,10,55,25],
	        // 38
	        [13,74,46,32,75,47],[4,152,122,18,153,123],[42,45,15,32,46,16],[48,54,24,14,55,25],
	        // 39
	        [40,75,47,7,76,48],[20,147,117,4,148,118],[10,45,15,67,46,16],[43,54,24,22,55,25],
	        // 40
	        [18,75,47,31,76,48],[19,148,118,6,149,119],[20,45,15,61,46,16],[34,54,24,34,55,25]
	      ];

      function QRBitBuffer(){ this.buffer=[]; this.length=0; }
      QRBitBuffer.prototype.get = function(index){
        const bufIndex = Math.floor(index / 8);
        return ((this.buffer[bufIndex] >>> (7 - index % 8)) & 1) === 1;
      };
      QRBitBuffer.prototype.put = function(num, length){
        for (let i = 0; i < length; i++) this.putBit(((num >>> (length - i - 1)) & 1) === 1);
      };
      QRBitBuffer.prototype.putBit = function(bit){
        const bufIndex = Math.floor(this.length / 8);
        if (this.buffer.length <= bufIndex) this.buffer.push(0);
        if (bit) this.buffer[bufIndex] |= (0x80 >>> (this.length % 8));
        this.length++;
      };

      const QRUtil = {
        PATTERN_POSITION_TABLE: [
          [], [6,18],[6,22],[6,26],[6,30],[6,34],[6,38],[6,42],[6,46],[6,50],[6,54]
        ],
        G15: (1<<10)|(1<<8)|(1<<5)|(1<<4)|(1<<2)|(1<<1)|(1<<0),
        G18: (1<<12)|(1<<11)|(1<<10)|(1<<9)|(1<<8)|(1<<5)|(1<<2)|(1<<0),
        G15_MASK: (1<<14)|(1<<12)|(1<<10)|(1<<4)|(1<<1),
        getBCHTypeInfo: function(data){
          let d = data << 10;
          while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15) >= 0) d ^= (QRUtil.G15 << (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G15)));
          return ((data << 10) | d) ^ QRUtil.G15_MASK;
        },
        getBCHTypeNumber: function(data){
          let d = data << 12;
          while (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18) >= 0) d ^= (QRUtil.G18 << (QRUtil.getBCHDigit(d) - QRUtil.getBCHDigit(QRUtil.G18)));
          return (data << 12) | d;
        },
        getBCHDigit: function(data){
          let digit = 0;
          while (data !== 0){ digit++; data >>>= 1; }
          return digit;
        },
        getPatternPosition: function(typeNumber){ return QRUtil.PATTERN_POSITION_TABLE[typeNumber - 1]; },
        getMask: function(maskPattern, i, j){
          switch(maskPattern){
            case 0: return (i + j) % 2 === 0;
            case 1: return i % 2 === 0;
            case 2: return j % 3 === 0;
            case 3: return (i + j) % 3 === 0;
            case 4: return (Math.floor(i/2) + Math.floor(j/3)) % 2 === 0;
            case 5: return (i*j) % 2 + (i*j) % 3 === 0;
            case 6: return ((i*j) % 2 + (i*j) % 3) % 2 === 0;
            case 7: return ((i*j) % 3 + (i + j) % 2) % 2 === 0;
            default: return false;
          }
        },
        getErrorCorrectPolynomial: function(errorCorrectLength){
          let a = new QRPolynomial([1], 0);
          for (let i = 0; i < errorCorrectLength; i++){
            a = a.multiply(new QRPolynomial([1, QRMath.gexp(i)], 0));
          }
          return a;
        },
        getLengthInBits: function(mode, typeNumber){
          if (1 <= typeNumber && typeNumber < 10){
            if (mode === 1) return 10; // numeric
            if (mode === 2) return 9;  // alnum
            if (mode === 4) return 8;  // 8bit
          }
          return 8;
        },
        getLostPoint: function(qrCode){
          const moduleCount = qrCode.getModuleCount();
          let lostPoint = 0;
          // Level 1
          for (let row = 0; row < moduleCount; row++){
            for (let col = 0; col < moduleCount; col++){
              let sameCount = 0;
              const dark = qrCode.isDark(row, col);
              for (let r = -1; r <= 1; r++){
                if (row + r < 0 || moduleCount <= row + r) continue;
                for (let c = -1; c <= 1; c++){
                  if (col + c < 0 || moduleCount <= col + c) continue;
                  if (r === 0 && c === 0) continue;
                  if (dark === qrCode.isDark(row + r, col + c)) sameCount++;
                }
              }
              if (sameCount > 5) lostPoint += (3 + sameCount - 5);
            }
          }
          // Level 2
          for (let row = 0; row < moduleCount - 1; row++){
            for (let col = 0; col < moduleCount - 1; col++){
              let count = 0;
              if (qrCode.isDark(row, col)) count++;
              if (qrCode.isDark(row + 1, col)) count++;
              if (qrCode.isDark(row, col + 1)) count++;
              if (qrCode.isDark(row + 1, col + 1)) count++;
              if (count === 0 || count === 4) lostPoint += 3;
            }
          }
          // Level 3
          for (let row = 0; row < moduleCount; row++){
            for (let col = 0; col < moduleCount - 6; col++){
              if (qrCode.isDark(row, col) && !qrCode.isDark(row, col+1) && qrCode.isDark(row, col+2) && qrCode.isDark(row, col+3) && qrCode.isDark(row, col+4) && !qrCode.isDark(row, col+5) && qrCode.isDark(row, col+6)) {
                lostPoint += 40;
              }
            }
          }
          for (let col = 0; col < moduleCount; col++){
            for (let row = 0; row < moduleCount - 6; row++){
              if (qrCode.isDark(row, col) && !qrCode.isDark(row+1, col) && qrCode.isDark(row+2, col) && qrCode.isDark(row+3, col) && qrCode.isDark(row+4, col) && !qrCode.isDark(row+5, col) && qrCode.isDark(row+6, col)) {
                lostPoint += 40;
              }
            }
          }
          // Level 4
          let darkCount = 0;
          for (let col = 0; col < moduleCount; col++){
            for (let row = 0; row < moduleCount; row++){
              if (qrCode.isDark(row, col)) darkCount++;
            }
          }
          const ratio = Math.abs(100 * darkCount / moduleCount / moduleCount - 50) / 5;
          lostPoint += ratio * 10;
          return lostPoint;
        }
      };

      function QR8bitByte(data){ this.mode = 4; this.data = data; }
      QR8bitByte.prototype.getLength = function(){ return this.data.length; };
      QR8bitByte.prototype.write = function(buffer){
        for (let i = 0; i < this.data.length; i++){
          buffer.put(this.data.charCodeAt(i), 8);
        }
      };

      function QRCodeModel(typeNumber, errorCorrectLevel){
        this.typeNumber = typeNumber;
        this.errorCorrectLevel = errorCorrectLevel; // 0=M, 1=L, 2=H, 3=Q (matches table idx order used earlier)
        this.modules = null;
        this.moduleCount = 0;
        this.dataCache = null;
        this.dataList = [];
      }
      QRCodeModel.prototype.addData = function(data){ this.dataList.push(new QR8bitByte(data)); this.dataCache = null; };
      QRCodeModel.prototype.isDark = function(row, col){ if (!this.modules) return false; return this.modules[row][col]; };
      QRCodeModel.prototype.getModuleCount = function(){ return this.moduleCount; };
      QRCodeModel.prototype.make = function(){ this.makeImpl(false, this.getBestMaskPattern()); };
      QRCodeModel.prototype.makeImpl = function(test, maskPattern){
        this.moduleCount = this.typeNumber * 4 + 17;
        this.modules = new Array(this.moduleCount);
        for (let row = 0; row < this.moduleCount; row++){
          this.modules[row] = new Array(this.moduleCount);
          for (let col = 0; col < this.moduleCount; col++) this.modules[row][col] = null;
        }
        this.setupPositionProbePattern(0,0);
        this.setupPositionProbePattern(this.moduleCount-7,0);
        this.setupPositionProbePattern(0,this.moduleCount-7);
        this.setupPositionAdjustPattern();
        this.setupTimingPattern();
        this.setupTypeInfo(test, maskPattern);
        if (this.typeNumber >= 7) this.setupTypeNumber(test);
        if (this.dataCache == null) this.dataCache = QRCodeModel.createData(this.typeNumber, this.errorCorrectLevel, this.dataList);
        this.mapData(this.dataCache, maskPattern);
      };
      QRCodeModel.prototype.setupPositionProbePattern = function(row, col){
        for (let r = -1; r <= 7; r++){
          if (row + r <= -1 || this.moduleCount <= row + r) continue;
          for (let c = -1; c <= 7; c++){
            if (col + c <= -1 || this.moduleCount <= col + c) continue;
            if ((0 <= r && r <= 6 && (c === 0 || c === 6)) ||
                (0 <= c && c <= 6 && (r === 0 || r === 6)) ||
                (2 <= r && r <= 4 && 2 <= c && c <= 4)) {
              this.modules[row + r][col + c] = true;
            } else {
              this.modules[row + r][col + c] = false;
            }
          }
        }
      };
      QRCodeModel.prototype.getBestMaskPattern = function(){
        let minLostPoint = Infinity;
        let pattern = 0;
        for (let i = 0; i < 8; i++){
          this.makeImpl(true, i);
          const lostPoint = QRUtil.getLostPoint(this);
          if (lostPoint < minLostPoint){ minLostPoint = lostPoint; pattern = i; }
        }
        return pattern;
      };
      QRCodeModel.prototype.setupTimingPattern = function(){
        for (let i = 8; i < this.moduleCount - 8; i++){
          if (this.modules[i][6] == null) this.modules[i][6] = (i % 2 === 0);
          if (this.modules[6][i] == null) this.modules[6][i] = (i % 2 === 0);
        }
      };
      QRCodeModel.prototype.setupPositionAdjustPattern = function(){
        const pos = QRUtil.getPatternPosition(this.typeNumber);
        for (let i = 0; i < pos.length; i++){
          for (let j = 0; j < pos.length; j++){
            const row = pos[i];
            const col = pos[j];
            if (this.modules[row][col] != null) continue;
            for (let r = -2; r <= 2; r++){
              for (let c = -2; c <= 2; c++){
                if (r === -2 || r === 2 || c === -2 || c === 2 || (r === 0 && c === 0)) {
                  this.modules[row + r][col + c] = true;
                } else {
                  this.modules[row + r][col + c] = false;
                }
              }
            }
          }
        }
      };
      QRCodeModel.prototype.setupTypeNumber = function(test){
        const bits = QRUtil.getBCHTypeNumber(this.typeNumber);
        for (let i = 0; i < 18; i++){
          const mod = (!test && ((bits >> i) & 1) === 1);
          this.modules[Math.floor(i / 3)][i % 3 + this.moduleCount - 8 - 3] = mod;
          this.modules[i % 3 + this.moduleCount - 8 - 3][Math.floor(i / 3)] = mod;
        }
      };
      QRCodeModel.prototype.setupTypeInfo = function(test, maskPattern){
        const data = (this.errorCorrectLevel << 3) | maskPattern;
        const bits = QRUtil.getBCHTypeInfo(data);
        for (let i = 0; i < 15; i++){
          const mod = (!test && ((bits >> i) & 1) === 1);
          if (i < 6) this.modules[i][8] = mod;
          else if (i < 8) this.modules[i + 1][8] = mod;
          else this.modules[this.moduleCount - 15 + i][8] = mod;
        }
        for (let i = 0; i < 15; i++){
          const mod = (!test && ((bits >> i) & 1) === 1);
          if (i < 8) this.modules[8][this.moduleCount - i - 1] = mod;
          else if (i < 9) this.modules[8][15 - i - 1 + 1] = mod;
          else this.modules[8][15 - i - 1] = mod;
        }
        this.modules[this.moduleCount - 8][8] = (!test);
      };
      QRCodeModel.prototype.mapData = function(data, maskPattern){
        let inc = -1;
        let row = this.moduleCount - 1;
        let bitIndex = 7;
        let byteIndex = 0;
        for (let col = this.moduleCount - 1; col > 0; col -= 2){
          if (col === 6) col--;
          while (true){
            for (let c = 0; c < 2; c++){
              if (this.modules[row][col - c] == null){
                let dark = false;
                if (byteIndex < data.length){
                  dark = (((data[byteIndex] >>> bitIndex) & 1) === 1);
                }
                const mask = QRUtil.getMask(maskPattern, row, col - c);
                if (mask) dark = !dark;
                this.modules[row][col - c] = dark;
                bitIndex--;
                if (bitIndex === -1){ byteIndex++; bitIndex = 7; }
              }
            }
            row += inc;
            if (row < 0 || this.moduleCount <= row){
              row -= inc;
              inc = -inc;
              break;
            }
          }
        }
      };
      QRCodeModel.createData = function(typeNumber, errorCorrectLevel, dataList){
        const rsBlocks = QRRSBlock.getRSBlocks(typeNumber, errorCorrectLevel);
        const buffer = new QRBitBuffer();
        for (let i = 0; i < dataList.length; i++){
          const data = dataList[i];
          buffer.put(data.mode, 4);
          buffer.put(data.getLength(), QRUtil.getLengthInBits(data.mode, typeNumber));
          data.write(buffer);
        }
        let totalDataCount = 0;
        for (let i = 0; i < rsBlocks.length; i++) totalDataCount += rsBlocks[i].dataCount;
        if (buffer.length > totalDataCount * 8) throw new Error("code length overflow");
        if (buffer.length + 4 <= totalDataCount * 8) buffer.put(0, 4);
        while (buffer.length % 8 !== 0) buffer.putBit(false);
        while (true){
          if (buffer.length >= totalDataCount * 8) break;
          buffer.put(0xEC, 8);
          if (buffer.length >= totalDataCount * 8) break;
          buffer.put(0x11, 8);
        }
        return QRCodeModel.createBytes(buffer, rsBlocks);
      };
      QRCodeModel.createBytes = function(buffer, rsBlocks){
        let offset = 0;
        let maxDcCount = 0;
        let maxEcCount = 0;
        const dcdata = new Array(rsBlocks.length);
        const ecdata = new Array(rsBlocks.length);
        for (let r = 0; r < rsBlocks.length; r++){
          const dcCount = rsBlocks[r].dataCount;
          const ecCount = rsBlocks[r].totalCount - dcCount;
          maxDcCount = Math.max(maxDcCount, dcCount);
          maxEcCount = Math.max(maxEcCount, ecCount);
          dcdata[r] = new Array(dcCount);
          for (let i = 0; i < dcdata[r].length; i++) dcdata[r][i] = 0xff & buffer.buffer[i + offset];
          offset += dcCount;
          const rsPoly = QRUtil.getErrorCorrectPolynomial(ecCount);
          const rawPoly = new QRPolynomial(dcdata[r], rsPoly.getLength() - 1);
          const modPoly = rawPoly.mod(rsPoly);
          ecdata[r] = new Array(rsPoly.getLength() - 1);
          for (let i = 0; i < ecdata[r].length; i++){
            const modIndex = i + modPoly.getLength() - ecdata[r].length;
            ecdata[r][i] = (modIndex >= 0) ? modPoly.get(modIndex) : 0;
          }
        }
        const totalCodeCount = rsBlocks.reduce((a,b)=>a+b.totalCount,0);
        const data = new Array(totalCodeCount);
        let index = 0;
        for (let i = 0; i < maxDcCount; i++){
          for (let r = 0; r < rsBlocks.length; r++){
            if (i < dcdata[r].length) data[index++] = dcdata[r][i];
          }
        }
        for (let i = 0; i < maxEcCount; i++){
          for (let r = 0; r < rsBlocks.length; r++){
            if (i < ecdata[r].length) data[index++] = ecdata[r][i];
          }
        }
        return data;
      };

	      function chooseTypeNumber(text, errorCorrectLevel){
	        // Try types 1..10 (keeps generator tiny and reliable for offline use).
	        for (let type = 1; type <= 10; type++){
	          try {
	            const qr = new QRCodeModel(type, errorCorrectLevel);
	            qr.addData(text);
	            qr.make();
	            return qr;
	          } catch (e) {}
	        }
	        // Hard fallback: make a small code from a truncated payload.
	        const qr = new QRCodeModel(10, errorCorrectLevel);
	        qr.addData(text.slice(0, 120));
	        qr.make();
	        return qr;
	      }

	      window.amadaQrToCanvas = function(canvas, text, opts){
	        const ecc = (opts?.ecc || 'M').toUpperCase();
	        const eccMap = { L:1, M:0, Q:3, H:2 };
	        const level = eccMap[ecc] ?? 0;
	        const scale = Math.max(2, Math.min(10, Number(opts?.scale || 4)));
	        const margin = Math.max(0, Math.min(6, Number(opts?.margin ?? 1)));

        const qr = chooseTypeNumber(String(text || ''), level);
        const count = qr.getModuleCount();
        const size = (count + margin*2) * scale;
        canvas.width = size;
        canvas.height = size;
        const ctx = canvas.getContext('2d');
        ctx.fillStyle = '#ffffff';
        ctx.fillRect(0,0,size,size);
        ctx.fillStyle = '#0f172a';
        for (let r = 0; r < count; r++){
          for (let c = 0; c < count; c++){
            if (qr.isDark(r,c)){
              ctx.fillRect((c + margin)*scale, (r + margin)*scale, scale, scale);
            }
          }
        }
      };
    })();

    // ---------------------------
    // Icons + Reveal
    // ---------------------------
    lucide.createIcons();

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('active');
          return;
        }
        if (entry.target?.dataset?.reveal === 'replay') {
          entry.target.classList.remove('active');
        }
      });
    }, { threshold: 0.12 });

    document.querySelectorAll('.reveal').forEach(el => observer.observe(el));

    // ---------------------------
    // SPA Router
    // ---------------------------
    function showPage(page, { scrollTop = true } = {}) {
      closeMobileMenu(true);
      closeLegal(true);
      closeFloorplanModal(true);
      closeGalleryModal(true);
      closeTerritoryModal(true);

      document.querySelectorAll('.page[data-page]').forEach(p => p.classList.remove('active'));
      (document.querySelector(`.page[data-page="${page}"]`) || document.querySelector('.page[data-page="home"]'))?.classList.add('active');

      if (scrollTop) window.scrollTo({ top: 0, left: 0, behavior: 'auto' });

      lucide.createIcons();
      syncCityMapFallback();

      if (page === 'assets') {
        if (!estateRendered) renderEstateLayout();
        hydratePRFormFromSelection();
      }

      if (page === 'pr-card') {
        prxInit();
        prxHydrateFromSelection();
      }

      if (page === 'city') {
        renderCityHotspots();
        ensureGalleryRendered();
      }
    }

    function getRoutePage() {
      const h = location.hash || '#/home';
      if (!h.startsWith('#/')) return 'home';
      const page = h.replace('#/', '').trim();
      if (page === 'gallery') return 'city';
      const allowed = new Set(['home','about','city','assets','pr-card']);
      return allowed.has(page) ? page : 'home';
    }

    function goToAssetsAndFocus(territoryKey){
      sessionStorage.setItem('amada_focus_territory', territoryKey);
      if (getRoutePage() === 'assets') {
        setTimeout(() => {
          const block = document.querySelector(`[data-territory="${territoryKey}"]`);
          block?.scrollIntoView({ behavior: 'smooth', block: 'start' });
          sessionStorage.removeItem('amada_focus_territory');
        }, 120);
        return;
      }
      location.hash = '#/assets';
    }

    window.addEventListener('hashchange', () => showPage(getRoutePage()));
    document.addEventListener('DOMContentLoaded', () => {
      if (!location.hash) location.hash = '#/home';
      showPage(getRoutePage(), { scrollTop: false });
    });

    // ---------------------------
    // Mobile Menu (scroll lock)
    // ---------------------------
    const mobileMenu = document.getElementById('mobileMenu');
    document.getElementById('mobileMenuBtn').addEventListener('click', () => {
      document.body.style.overflow = 'hidden';
      mobileMenu.classList.add('open');
      lucide.createIcons();
    });
    function closeMobileMenu(force=false){
      if (!mobileMenu.classList.contains('open') && !force) return;
      mobileMenu.classList.remove('open');
      document.body.style.overflow = '';
    }
    mobileMenu.addEventListener('click', (e) => { if(e.target === mobileMenu) closeMobileMenu(); });

    // ---------------------------
    // Hero (local images, crossfade)
    // ---------------------------
    const HERO_IMAGES = [
      "amada-estate-layout-map.png",
      "amada-resort-lagoon-street-view.png",
      "amada-resort-lagoon-pool.png",
      "amada-masterplan-estate-aerial-angle.png",
      "amada-masterplan-estate-aerial.png"
    ];

    let heroIdx = 0;
    let heroFlip = true;
    function setHeroBackground(src){
      const a = document.getElementById('heroBgA');
      const b = document.getElementById('heroBgB');
      if(!a || !b) return;
      const next = heroFlip ? a : b;
      const prev = heroFlip ? b : a;
      next.style.backgroundImage = `url('${src}')`;
      next.classList.add('on');
      prev.classList.remove('on');
      heroFlip = !heroFlip;
    }

    function startHeroRotation(){
      if(HERO_IMAGES.length === 0) return;
      setHeroBackground(HERO_IMAGES[0]);
      setInterval(() => {
        heroIdx = (heroIdx + 1) % HERO_IMAGES.length;
        setHeroBackground(HERO_IMAGES[heroIdx]);
      }, 6500);
    }

    // ---------------------------
	    // Data: Assets (lightweight)
	    // ---------------------------
    const territoryMeta = {
      ny:     { label:'New York Street', short:'NY',     basePrice:2500000, baseBeds:4, baseSize:4200 },
      canada: { label:'Toronto Street',  short:'TOR',    basePrice:2500000, baseBeds:4, baseSize:4600 },
      london: { label:'London Street',   short:'LDN',    basePrice:2700000, baseBeds:4, baseSize:3900 },
      dubai:  { label:'Dubai Street',    short:'DXB',    basePrice:2900000, baseBeds:5, baseSize:5200 },
      naija:  { label:'Paris Street',    short:'PAR',    basePrice:2500000, baseBeds:6, baseSize:7200 }
    };

    const counts = { ny:15, canada:15, london:15, dubai:15, naija:15 }; // total 75 (14 homes + 1 presidential villa per street)
    let inventory = [];
    (function generateInventory(){
      const order = ['ny','canada','london','dubai','naija'];
      let idx = 1;
	      for(const terr of order){
	        for(let i=0;i<counts[terr];i++){
	          const isVilla = i === counts[terr] - 1;
	          const meta = territoryMeta[terr];
	          const villaPremium = isVilla ? (meta.basePrice * 0.9 + Math.random()*400000) : 0;
	          const price = meta.basePrice + (Math.random()*600000) - 100000 + (terr==='naija' ? (Math.random()*500000) : 0) + villaPremium;
	          const beds = isVilla ? Math.max(meta.baseBeds + 2, Math.round(meta.baseBeds + 3 + (Math.random()*2))) : Math.max(1, Math.round(meta.baseBeds + (Math.random()*2 - 1)));
	          const baths = isVilla ? (beds + 2 + (Math.random()>0.5?1:0)) : (beds + (Math.random()>0.5?1:0)) + (Math.random()>0.75?0.5:0);
	          const size = isVilla
	            ? Math.round(1400 * 10.7639)
	            : Math.round(meta.baseSize + (Math.random()*900 - 250));
	          inventory.push({
	            id: 'AM-' + String(idx).padStart(3,'0'),
	            territory: terr,
	            kind: isVilla ? 'presidential-villa' : 'home',
	            beds, baths,
	            size,
	            price: Math.round(price),
	            status: 'waitlist'
	          });
	          idx++;
	        }
	      }

      const shuffled = [...inventory].sort(()=>Math.random()-0.5);
      const availableIds = new Set(shuffled.slice(0,8).map(x=>x.id));
      const reservedIds  = new Set(shuffled.slice(8,29).map(x=>x.id));
      inventory = inventory.map(p => ({
        ...p,
        status: availableIds.has(p.id) ? 'available' : reservedIds.has(p.id) ? 'reserved' : 'waitlist'
      }));
    })();

    function formatUSD(n){
      return '$' + Math.round(n).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }
    function statusLabel(s){
      return s === 'available' ? 'Available' : s === 'reserved' ? 'Reserved' : 'Waitlist';
    }
    function statusColor(s){
      if(s === 'available') return 'rgba(34,197,94,.85)';
      if(s === 'reserved') return 'rgba(245,158,11,.85)';
      return 'rgba(148,163,184,.85)';
    }

    // ---------------------------
    // Assets Page: Estate Layout
    // ---------------------------
    const MINI_COLS = 6;
    let estateRendered = false;
    let selectedUnit = null;
    let prevSelectedId = null;

    function groupUnitsByTerritory(){
      const groups = { ny:[], canada:[], london:[], dubai:[], naija:[] };
      inventory.forEach(u => groups[u.territory].push(u));
      return groups;
    }

    function renderEstateLayout(){
      const bandsEl = document.getElementById('territoryBands');
      if(!bandsEl) return;

      const groups = groupUnitsByTerritory();
      const order = ['ny','canada','london','dubai','naija'];

      bandsEl.innerHTML = order.map(key => {
        const list = groups[key];
        const label = territoryMeta[key].label;

        const sorted = [...list].sort((a,b) => a.id.localeCompare(b.id));
        const villa = sorted[sorted.length - 1];
        const remaining = sorted.slice(0, -1);

        const standard = remaining.slice(0, 14);
        const topRow = standard.slice(0, 7);
        const bottomRow = standard.slice(7, 14);
        const cols = 7;
        const lotCell = 24;

        const renderUnitBtn = (u, extraClass = "") => `
          <button class="unit lot-unit ${extraClass}"
                  id="unit-${u.id}"
                  data-unit="${u.id}"
                  style="background:${statusColor(u.status)}"
                  aria-label="${u.id}"
                  title="${u.id}">
          </button>
        `;

        const renderEmpty = () => `<span class="w-[24px] h-[38px]"></span>`;

        const topUnits = [...topRow.map(u => renderUnitBtn(u)), ...Array.from({length: cols - topRow.length}, renderEmpty)].join('');
        const bottomUnits = [...bottomRow.map(u => renderUnitBtn(u)), ...Array.from({length: cols - bottomRow.length}, renderEmpty)].join('');

        const villaBtn = villa ? `
          <button class="unit villa-unit presidential ring-1 ring-white/70 relative"
                  id="unit-${villa.id}"
                  data-unit="${villa.id}"
                  style="background:${statusColor(villa.status)}"
                  aria-label="Presidential Villa ${villa.id}"
                  title="Presidential Villa • ${villa.id}">
            <span class="absolute inset-x-2 bottom-2 px-2 py-1 rounded-full bg-white/70 text-[10px] font-extrabold tracking-widest uppercase text-slate-900 text-center">Villa</span>
            <span class="absolute top-2 left-2 w-8 h-8 rounded-full bg-white/70 flex items-center justify-center">
              <i data-lucide="crown" class="w-4 h-4 text-amber-600"></i>
            </span>
          </button>
        ` : '';

        return `
            <div class="street-block" data-territory="${key}">
            <div class="street-body">
              <div class="street-grid">
                <div class="street-villa">
                  ${villaBtn}
                </div>
                <div class="street-lots">
                  <div class="street-row" style="grid-template-columns: repeat(${cols}, ${lotCell}px);">
                    ${topUnits}
                  </div>
                  <div class="street-road-h" aria-hidden="true">
                    <span class="street-road-ext" aria-hidden="true"></span>
                    <span class="street-road-label" aria-hidden="true">${label}</span>
                  </div>
                  <div class="street-row" style="grid-template-columns: repeat(${cols}, ${lotCell}px);">
                    ${bottomUnits}
                  </div>
                </div>
              </div>
            </div>
          </div>
        `;
      }).join('');

      wireEstateUnitEvents();
      estateRendered = true;

      const saved = sessionStorage.getItem('amada_selected_unit');
      if (saved) selectUnit(saved, { silentScroll: true });

      const focusTerr = sessionStorage.getItem('amada_focus_territory');
      if (focusTerr) {
        setTimeout(() => {
          const block = document.querySelector(`[data-territory="${focusTerr}"]`);
          block?.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }, 120);
        sessionStorage.removeItem('amada_focus_territory');
      }
    }

    function wireEstateUnitEvents(){
      const tip = document.getElementById('unitTip');
      const canvas = document.querySelector('.estate-canvas');
      if(!canvas) return;

      document.querySelectorAll('[data-unit]').forEach(btn => {
        const unitId = btn.getAttribute('data-unit');

        btn.addEventListener('mouseenter', () => {
          const unit = inventory.find(x => x.id === unitId);
          if(!unit || !tip) return;
          tip.classList.remove('hidden');
          const kind = unit.kind === 'presidential-villa' ? 'PRESIDENTIAL VILLA • ' : '';
          tip.textContent = `${kind}${unit.id} • ${territoryMeta[unit.territory].short} • ${statusLabel(unit.status)}`;
        });

        btn.addEventListener('mousemove', (e) => {
          if(!tip) return;
          const rect = canvas.getBoundingClientRect();
          tip.style.left = (e.clientX - rect.left + 12) + 'px';
          tip.style.top  = (e.clientY - rect.top  + 12) + 'px';
        });

        btn.addEventListener('mouseleave', () => {
          tip?.classList.add('hidden');
        });

        btn.addEventListener('click', () => selectUnit(unitId));
      });
    }

    function selectUnit(unitId, { silentScroll = false } = {}){
      const unit = inventory.find(x => x.id === unitId);
      if(!unit) return;
      selectedUnit = unit;
      sessionStorage.setItem('amada_selected_unit', unit.id);

      if (prevSelectedId) {
        document.getElementById('unit-' + prevSelectedId)?.classList.remove('ring-2','ring-slate-900');
      }
      document.getElementById('unit-' + unit.id)?.classList.add('ring-2','ring-slate-900');
      prevSelectedId = unit.id;

      const terrLabel = territoryMeta[unit.territory].label;
      const interior = getInteriorConfigForUnit(unit);
      const totals = getInteriorTotals(interior);

      document.getElementById('selectedTitle').innerText = `${unit.id} • ${terrLabel}`;
      document.getElementById('selectedDesc').innerText =
        `Exterior is cohesive for ${terrLabel}. Interior is built to your taste across three floors: ${totals.bedrooms} bedrooms, ${totals.bathrooms} bathrooms. Status: ${statusLabel(unit.status)}.`;

      document.getElementById('statStatus').innerText = statusLabel(unit.status);
      document.getElementById('statPrice').innerText = formatUSD(unit.price);
      document.getElementById('statBeds').innerText  = `${totals.bedrooms} / ${totals.bathrooms}`;
      document.getElementById('statSize').innerText  = `${unit.size.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")} ft²`;

      document.getElementById('planLabel').innerText = `3-floor interior preview for ${unit.id} — ${totals.bedrooms} bedrooms, ${totals.bathrooms} bathrooms.`;

      const preview = document.getElementById('floorplanPreview');
      preview.innerHTML = buildInteriorPlan(unit, interior, { compact: true });

      hydratePRFormFromSelection();

      if(!silentScroll){
        if (window.innerWidth < 1024) {
          document.getElementById('selectedTitle').scrollIntoView({ behavior:'smooth', block:'start' });
        }
      }

      lucide.createIcons();
    }

    // ---------------------------
    // Floorplan generation (3-floor interior builder)
    // ---------------------------
    function clampInt(v, min, max){
      const n = Number(v);
      if (!Number.isFinite(n)) return min;
      return Math.max(min, Math.min(max, Math.floor(n)));
    }

    function interiorStorageKey(unitId){
      return `amada_interior_${unitId}`;
    }

    function getInteriorTotals(cfg){
      const floors = Array.isArray(cfg?.floors) ? cfg.floors : [];
      return floors.reduce((acc, f) => {
        acc.bedrooms += clampInt(f?.bedrooms ?? 0, 0, 50);
        acc.bathrooms += clampInt(f?.bathrooms ?? 0, 0, 50);
        return acc;
      }, { bedrooms: 0, bathrooms: 0 });
    }

    function makeDefaultInteriorConfig(unit){
      const totalBeds = clampInt(unit?.beds ?? 5, 1, 12);
      const totalBaths = clampInt(Math.ceil(Number(unit?.baths ?? 4)), 1, 12);

      const f1Beds = clampInt(Math.round(totalBeds * 0.2), 0, totalBeds);
      const remBeds = totalBeds - f1Beds;
      const f2Beds = clampInt(Math.round(remBeds * 0.55), 0, remBeds);
      const f3Beds = Math.max(0, totalBeds - f1Beds - f2Beds);

      const f1Bath = clampInt(Math.round(totalBaths * 0.2), 0, totalBaths);
      const remBath = totalBaths - f1Bath;
      const f2Bath = clampInt(Math.round(remBath * 0.55), 0, remBath);
      const f3Bath = Math.max(0, totalBaths - f1Bath - f2Bath);

      return {
        floors: [
          { bedrooms: f1Beds, bathrooms: f1Bath, lounge: false, cinema: false, play: false },
          { bedrooms: f2Beds, bathrooms: f2Bath, lounge: true,  cinema: false, play: false },
          { bedrooms: f3Beds, bathrooms: f3Bath, lounge: false, cinema: true,  play: true  }
        ]
      };
    }

    function normalizeInteriorConfig(cfg){
      const floors = Array.isArray(cfg?.floors) ? cfg.floors : [];
      const normalized = floors.slice(0,3).map(f => ({
        bedrooms: clampInt(f?.bedrooms ?? 0, 0, 10),
        bathrooms: clampInt(f?.bathrooms ?? 0, 0, 10),
        lounge: !!f?.lounge,
        cinema: !!f?.cinema,
        play: !!f?.play
      }));
      while (normalized.length < 3) normalized.push({ bedrooms: 0, bathrooms: 0, lounge:false, cinema:false, play:false });
      return { floors: normalized };
    }

    function getInteriorConfigForUnit(unit){
      const key = interiorStorageKey(unit.id);
      try {
        const raw = sessionStorage.getItem(key);
        if(!raw) return makeDefaultInteriorConfig(unit);
        return normalizeInteriorConfig(JSON.parse(raw));
      } catch(e) {
        return makeDefaultInteriorConfig(unit);
      }
    }

    function setInteriorConfigForUnit(unit, cfg){
      const key = interiorStorageKey(unit.id);
      try {
        sessionStorage.setItem(key, JSON.stringify(normalizeInteriorConfig(cfg)));
      } catch(e) {}
    }

    function buildFloorSvg({ unit, floorLabel, labels, compact }){
      const w = compact ? 720 : 880;
      const h = compact ? 240 : 320;
      const pad = 14;
      const gap = 10;

      const rooms = labels.slice(0, 12);
      const cols = rooms.length > 8 ? 3 : 2;
      const rows = Math.max(1, Math.ceil(rooms.length / cols));

      const usableW = w - pad*2;
      const usableH = h - pad*2 - 22; // title line
      const cellW = (usableW - gap*(cols-1)) / cols;
      const cellH = (usableH - gap*(rows-1)) / rows;

      const rects = rooms.map((label, i) => {
        const r = Math.floor(i/cols);
        const c = i%cols;
        const x = pad + c*(cellW+gap);
        const y = pad + 26 + r*(cellH+gap);

        const isCore = /LIVING|KITCHEN|DINING|LOUNGE/.test(label);
        const fill = isCore ? "rgba(2,132,199,.10)" : "rgba(15,23,42,.05)";
        const stroke = "rgba(100,116,139,.45)";

        return `
          <g>
            <rect x="${x}" y="${y}" width="${cellW}" height="${cellH}" rx="14"
                  fill="${fill}" stroke="${stroke}" stroke-width="1.2"/>
            <text x="${x+14}" y="${y+22}" font-size="11" fill="rgba(15,23,42,.78)" font-weight="800" letter-spacing=".10em">
              ${label}
            </text>
            <line x1="${x+14}" y1="${y+30}" x2="${x+cellW-14}" y2="${y+30}" stroke="rgba(15,23,42,.08)" />
          </g>
        `;
      });

      return `
        <svg viewBox="0 0 ${w} ${h}" width="100%" height="${compact ? 200 : 280}" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Floorplan">
          <defs>
            <linearGradient id="bg" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="rgba(255,255,255,.9)"/>
              <stop offset="1" stop-color="rgba(241,245,249,.9)"/>
            </linearGradient>
            <linearGradient id="edge" x1="0" y1="0" x2="0" y2="1">
              <stop offset="0" stop-color="rgba(255,255,255,.7)"/>
              <stop offset="1" stop-color="rgba(2,6,23,.04)"/>
            </linearGradient>
          </defs>

          <rect x="6" y="6" width="${w-12}" height="${h-12}" rx="22" fill="url(#bg)" stroke="rgba(148,163,184,.55)" />
          <rect x="12" y="12" width="${w-24}" height="${h-24}" rx="18" fill="none" stroke="url(#edge)" />

          <text x="18" y="28" font-size="12" fill="rgba(100,116,139,.85)" font-weight="900" letter-spacing=".22em">
            ${unit.id} • ${territoryMeta[unit.territory].short} • ${floorLabel}
          </text>

          ${rects.join("")}

          <text x="${w-18}" y="${h-16}" text-anchor="end" font-size="10" fill="rgba(100,116,139,.75)" font-weight="800" letter-spacing=".18em">
            PREVIEW • NOT TO SCALE
          </text>
        </svg>
      `;
    }

    function labelsForFloor(floorIndex, floorCfg){
      const labels = [];
      if (floorIndex === 0) labels.push('LIVING ROOM', 'KITCHEN', 'DINING');
      if (floorIndex === 1 && floorCfg.lounge) labels.push('FAMILY LOUNGE');
      if (floorIndex === 2 && floorCfg.cinema) labels.push('CINEMA');
      if (floorIndex === 2 && floorCfg.play) labels.push('PLAY AREA');

      for (let i = 0; i < floorCfg.bedrooms; i++) labels.push(`BEDROOM ${i+1}`);
      for (let i = 0; i < floorCfg.bathrooms; i++) labels.push(`BATHROOM ${i+1}`);
      return labels;
    }

    function buildInteriorPlan(unit, cfg, { compact = false, forPrint = false } = {}){
      const wrapStyle = forPrint ? 'style="display:grid;gap:12px;"' : '';
      const wrapClass = forPrint ? '' : 'class="grid gap-3"';
      const c = normalizeInteriorConfig(cfg);

      const floorsHtml = c.floors.map((f, idx) => {
        const floorLabel = idx === 0 ? 'FLOOR 1' : idx === 1 ? 'FLOOR 2' : 'FLOOR 3';
        const labels = labelsForFloor(idx, f);
        return `
          <div ${forPrint ? 'style="border:1px solid #e2e8f0;border-radius:18px;padding:12px;background:#fff;"' : 'class="rounded-3xl border border-slate-200 bg-white/70 p-3"'}>
            ${buildFloorSvg({ unit, floorLabel, labels, compact })}
          </div>
        `;
      }).join('');

      return `<div ${wrapClass} ${wrapStyle}>${floorsHtml}</div>`;
    }

    // ---------------------------
    // Floorplan Modal controls
    // ---------------------------
    function readInteriorBuilderConfig(){
      const f1Beds = clampInt(document.getElementById('ib_f1_bed')?.value ?? 0, 0, 10);
      const f1Bath = clampInt(document.getElementById('ib_f1_bath')?.value ?? 0, 0, 10);
      const f2Beds = clampInt(document.getElementById('ib_f2_bed')?.value ?? 0, 0, 10);
      const f2Bath = clampInt(document.getElementById('ib_f2_bath')?.value ?? 0, 0, 10);
      const f3Beds = clampInt(document.getElementById('ib_f3_bed')?.value ?? 0, 0, 10);
      const f3Bath = clampInt(document.getElementById('ib_f3_bath')?.value ?? 0, 0, 10);

      const lounge = !!document.getElementById('ib_f2_lounge')?.checked;
      const cinema = !!document.getElementById('ib_f3_cinema')?.checked;
      const play = !!document.getElementById('ib_f3_play')?.checked;

      return normalizeInteriorConfig({
        floors: [
          { bedrooms: f1Beds, bathrooms: f1Bath, lounge:false, cinema:false, play:false },
          { bedrooms: f2Beds, bathrooms: f2Bath, lounge,      cinema:false, play:false },
          { bedrooms: f3Beds, bathrooms: f3Bath, lounge:false, cinema,      play }
        ]
      });
    }

    function loadInteriorBuilderFromConfig(cfg){
      const c = normalizeInteriorConfig(cfg);
      document.getElementById('ib_f1_bed').value = c.floors[0].bedrooms;
      document.getElementById('ib_f1_bath').value = c.floors[0].bathrooms;
      document.getElementById('ib_f2_bed').value = c.floors[1].bedrooms;
      document.getElementById('ib_f2_bath').value = c.floors[1].bathrooms;
      document.getElementById('ib_f2_lounge').checked = c.floors[1].lounge;
      document.getElementById('ib_f3_bed').value = c.floors[2].bedrooms;
      document.getElementById('ib_f3_bath').value = c.floors[2].bathrooms;
      document.getElementById('ib_f3_cinema').checked = c.floors[2].cinema;
      document.getElementById('ib_f3_play').checked = c.floors[2].play;
    }

    function updateInteriorFromBuilder(save = true){
      if(!selectedUnit) return;
      const cfg = readInteriorBuilderConfig();
      if (save) setInteriorConfigForUnit(selectedUnit, cfg);

      const totals = getInteriorTotals(cfg);
      document.getElementById('fpSubtitle').innerText =
        `${territoryMeta[selectedUnit.territory].label} • ${totals.bedrooms} beds • ${totals.bathrooms} baths • ${selectedUnit.size.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")} ft²`;

      document.getElementById('fpBody').innerHTML = buildInteriorPlan(selectedUnit, cfg, { compact:false });

      const preview = document.getElementById('floorplanPreview');
      if (preview) preview.innerHTML = buildInteriorPlan(selectedUnit, cfg, { compact:true });

      document.getElementById('planLabel').innerText =
        `3-floor interior preview for ${selectedUnit.id} — ${totals.bedrooms} bedrooms, ${totals.bathrooms} bathrooms.`;
      document.getElementById('statBeds').innerText  = `${totals.bedrooms} / ${totals.bathrooms}`;
      const terrLabel = territoryMeta[selectedUnit.territory].label;
      document.getElementById('selectedDesc').innerText =
        `Exterior is cohesive for ${terrLabel}. Interior is built to your taste across three floors: ${totals.bedrooms} bedrooms, ${totals.bathrooms} bathrooms. Status: ${statusLabel(selectedUnit.status)}.`;

      lucide.createIcons();
    }

    function resetInteriorBuilder(){
      if(!selectedUnit) return;
      const cfg = makeDefaultInteriorConfig(selectedUnit);
      setInteriorConfigForUnit(selectedUnit, cfg);
      loadInteriorBuilderFromConfig(cfg);
      updateInteriorFromBuilder(false);
    }

    function openFloorplanModal(){
      if(!selectedUnit) return;
      document.body.style.overflow = 'hidden';
      const cfg = getInteriorConfigForUnit(selectedUnit);
      const totals = getInteriorTotals(cfg);
      document.getElementById('fpTitle').innerText = `${selectedUnit.id} • Floor Plan`;
      document.getElementById('fpSubtitle').innerText = `${territoryMeta[selectedUnit.territory].label} • ${totals.bedrooms} beds • ${totals.bathrooms} baths • ${selectedUnit.size.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")} ft²`;
      loadInteriorBuilderFromConfig(cfg);
      document.getElementById('fpBody').innerHTML = buildInteriorPlan(selectedUnit, cfg, { compact:false });
      document.getElementById('fp-modal').classList.add('open');
      const sc = document.getElementById('fpScroll');
      if (sc) sc.scrollTop = 0;
      lucide.createIcons();
    }

    function closeFloorplanModal(force=false){
      const m = document.getElementById('fp-modal');
      if(!m.classList.contains('open') && !force) return;
      m.classList.remove('open');
      document.body.style.overflow = '';
    }

    document.getElementById('fp-modal').addEventListener('click', (e) => {
      if (e.target.id === 'fp-modal') closeFloorplanModal();
    });

    // ---------------------------
    // PR Card: prefill from selection
    // ---------------------------
    function hydratePRFormFromSelection(){
      const prUnit = document.getElementById('prUnit');
      const prTerr = document.getElementById('prTerritory');
      if(!prUnit || !prTerr) return;

      const saved = sessionStorage.getItem('amada_selected_unit');
      const unit = saved ? inventory.find(x => x.id === saved) : null;

      if(unit){
        prUnit.value = unit.id;
        const map = { ny:'NY', dubai:'Dubai', london:'London', canada:'Toronto', naija:'Paris' };
        prTerr.value = map[unit.territory] || 'Paris';
      } else {
        prUnit.value = '';
      }
    }

    function goPRCardWithSelection(){
      location.hash = '#/pr-card';
      setTimeout(hydratePRFormFromSelection, 80);
    }

    // ---------------------------
    // PR Card (digital key UI)
    // ---------------------------
    let prxInitialized = false;

    const prxCardData = {
      ny: { bg: '#0f172a', accent: 'linear-gradient(135deg, #bf953f, #fcf6ba, #b38728, #fbf5b7, #aa771c)', solid: '#fcf6ba', number: '012', tier: 'New York', icon: 'building-2', label: 'Permanent Resident', prefix: 'NY' },
      dubai: { bg: '#451a03', accent: 'linear-gradient(135deg, #fbbf24, #fffbeb, #d97706)', solid: '#fbbf24', number: '014', tier: 'Dubai', icon: 'sun', label: 'Permanent Resident', prefix: 'DB' },
      london: { bg: '#172554', accent: 'linear-gradient(135deg, #93c5fd, #ffffff, #3b82f6)', solid: '#93c5fd', number: '007', tier: 'London', icon: 'umbrella', label: 'Permanent Resident', prefix: 'LD' },
      canada: { bg: '#7f1d1d', accent: 'linear-gradient(135deg, #fca5a5, #ffffff, #f87171)', solid: '#fca5a5', number: '004', tier: 'Toronto', icon: 'building-2', label: 'Permanent Resident', prefix: 'TO' },
      naija: { bg: '#064e3b', accent: 'linear-gradient(135deg, #34d399, #ecfdf5, #10b981)', solid: '#34d399', number: '009', tier: 'Paris', icon: 'landmark', label: 'Permanent Resident', prefix: 'PA' },
      presidential: { bg: '#000000', accent: 'linear-gradient(135deg, #e2e8f0, #ffffff, #64748b, #ffffff)', solid: '#e2e8f0', number: '001', tier: 'Presidential', icon: 'crown', label: 'Permanent Resident', prefix: 'PV' },
      visa: { bg: '#1e1b4b', accent: 'linear-gradient(135deg, #ffffff, #e0e7ff, #a5b4fc)', solid: '#ffffff', number: 'VISA', tier: 'Visit Approved', icon: 'credit-card', label: 'Visit Applicant', prefix: 'VS' }
    };

	    function prxInit(){
	      if (prxInitialized) return;
	      prxInitialized = true;

      const nameInput = document.getElementById('prxNameInput');
      const phoneInput = document.getElementById('prxPhoneInput');
      const tierSelect = document.getElementById('prxTierSelect');
      const dashboard = document.getElementById('prxDashboard');
      const card = document.getElementById('prxCard');
      const shine = document.getElementById('prxShine');
	      const modePR = document.getElementById('prxModePR');
	      const modeVISA = document.getElementById('prxModeVISA');
	      const terms = document.getElementById('prxTermsCheck');
	      const termsError = document.getElementById('prxTermsError');

	      if (!nameInput || !phoneInput || !tierSelect || !dashboard || !card || !shine) return;

      nameInput.addEventListener('keyup', (e) => {
        const val = String(e.target.value || '');
        document.getElementById('prxCardName').innerText = val.length > 0 ? val : 'Dr. Aliko Dangote';
        if (val.trim().length >= 3) {
          nameInput.classList.remove('prx-error');
          const err = document.getElementById('prxNameError');
          if (err) err.style.display = 'none';
        }
      });

      phoneInput.addEventListener('input', (e) => {
        e.target.value = String(e.target.value || '').replace(/[^0-9]/g, '').slice(0, 11);
        if (e.target.value.length === 11) {
          phoneInput.classList.remove('prx-error');
          const err = document.getElementById('prxPhoneError');
          if (err) err.style.display = 'none';
        }
      });

	      tierSelect.addEventListener('change', () => prxSwitchCard(tierSelect.value));
	      terms?.addEventListener('change', () => {
	        if (termsError) termsError.style.display = terms.checked ? 'none' : 'block';
	        prxSyncApplyGate();
	      });
	      modePR?.addEventListener('click', () => {
	        tierSelect.value = 'ny';
	        prxSwitchCard('ny');
	      });
      modeVISA?.addEventListener('click', () => {
        tierSelect.value = 'visa';
        prxSwitchCard('visa');
      });

      const visitType = document.getElementById('prxVisitType');
      const redrawVisaQr = () => {
        if (tierSelect.value !== 'visa') return;
        prxDrawQr(document.getElementById('prxQrCanvas'), prxQrText({
          dossierId: '#VS-VISA',
          name: nameInput.value.trim() || 'Visitor',
          phone: phoneInput.value.trim() || '',
          visitType: visitType?.value || 'Visit',
          details: visaGetDetails(visitType?.value || '')
        }));
      };
      prxVisaRedraw = redrawVisaQr;
      nameInput.addEventListener('input', redrawVisaQr);
      phoneInput.addEventListener('input', redrawVisaQr);
      visitType?.addEventListener('change', () => {
        visaSetFields(visitType.value);
        redrawVisaQr();
      });

      // Tilt effect (desktop)
      dashboard.addEventListener('mousemove', (e) => {
        const formView = document.getElementById('prxFormView');
        if (!formView || formView.classList.contains('hidden')) return;

        const rect = card.getBoundingClientRect();
        const cx = rect.left + rect.width / 2;
        const cy = rect.top + rect.height / 2;
        const x = e.clientX - cx;
        const y = e.clientY - cy;

        const rotateX = -y / 15;
        const rotateY = x / 15;
        card.style.transform = `rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;

        const shineX = 50 + (x / rect.width) * 100;
        const shineY = 50 + (y / rect.height) * 100;
        shine.style.background = `radial-gradient(circle at ${shineX}% ${shineY}%, rgba(255,255,255,0.15) 0%, transparent 60%)`;
        shine.style.opacity = '1';
      });

      dashboard.addEventListener('mouseleave', () => {
        card.style.transform = `rotateX(0deg) rotateY(0deg)`;
        shine.style.opacity = '0';
      });

      prxSwitchCard(tierSelect.value);
    }

	    function prxSetModeButtons(type){
	      const modePR = document.getElementById('prxModePR');
	      const modeVISA = document.getElementById('prxModeVISA');
	      if (modePR) modePR.className = `rounded-2xl px-4 py-3 text-[10px] font-extrabold tracking-[0.25em] uppercase border border-white/10 transition ${type === 'visa' ? 'bg-white/5 text-white/85 hover:bg-white/10' : 'bg-white/10 text-white hover:bg-white/15'}`;
	      if (modeVISA) modeVISA.className = `rounded-2xl px-4 py-3 text-[10px] font-extrabold tracking-[0.25em] uppercase border border-white/10 transition ${type === 'visa' ? 'bg-white/10 text-white hover:bg-white/15' : 'bg-white/5 text-white/85 hover:bg-white/10'}`;
	    }

	    function prxSyncApplyGate(){
	      const btn = document.getElementById('prxApplyBtn');
	      const terms = document.getElementById('prxTermsCheck');
	      if (!btn) return;
	      const ok = !!terms?.checked;
	      btn.disabled = !ok;
	      btn.style.opacity = ok ? '1' : '0.55';
	      btn.style.cursor = ok ? 'pointer' : 'not-allowed';
	    }

	    function prxUpdateVisaFields(type){
	      const wrap = document.getElementById('prxVisaFields');
	      const qrWrap = document.getElementById('prxQrWrap');
	      const btn = document.getElementById('prxApplyBtn');
	      if (wrap) wrap.classList.toggle('hidden', type !== 'visa');
	      if (qrWrap) qrWrap.style.display = (type === 'visa') ? 'flex' : 'none';
	      if (btn) btn.textContent = (type === 'visa') ? 'Apply For VISA' : 'Apply For Waitlist';
	      prxSyncApplyGate();
	    }

    function prxQrText({ dossierId, name, phone, visitType, details }){
      const safe = (s) => String(s || '').trim().replace(/\s+/g,' ').slice(0, 64);
      const detailsObj = (details && typeof details === 'object') ? details : {};
      const detailsPairs = Object.entries(detailsObj)
        .filter(([k,v]) => String(v || '').trim().length > 0)
        .slice(0, 12)
        .map(([k,v]) => `${String(k).toUpperCase().slice(0,10)}=${safe(v)}`)
        .join(';')
        .slice(0, 260);
      const payload = [
        'AMADA:VISA',
        `ID=${safe(dossierId)}`,
        `NAME=${safe(name)}`,
        `PHONE=${safe(phone)}`,
        `TYPE=${safe(visitType)}`,
        detailsPairs ? `DETAILS=${detailsPairs}` : null,
        `TS=${Date.now()}`
      ].filter(Boolean).join('|');
      return payload;
    }

    const visaSchemas = {
      "Friend": [
        { id:"unit", label:"House Number (Unit ID)", placeholder:"e.g. AM-064", required:true },
        { id:"duration", label:"Duration", type:"select", required:true, options:["1 hour","2 hours","3 hours","4 hours","6 hours","1 day","3 days","1 week"] },
        { id:"contact_name", label:"Friend's Full Name", placeholder:"e.g. John Doe", required:true },
        { id:"contact_phone", label:"Friend's Phone", placeholder:"e.g. 08012345678", required:true, pattern:"digits11" },
        { id:"date", label:"Visit Date", type:"date", required:true },
        { id:"time", label:"Arrival Time", type:"time", required:true }
      ],
      "Family": [
        { id:"unit", label:"House Number (Unit ID)", placeholder:"e.g. AM-064", required:true },
        { id:"duration", label:"Duration", type:"select", required:true, options:["1 hour","2 hours","3 hours","4 hours","6 hours","1 day","3 days","1 week"] },
        { id:"contact_name", label:"Family Contact Name", placeholder:"e.g. Jane Doe", required:true },
        { id:"contact_phone", label:"Family Contact Phone", placeholder:"e.g. 08012345678", required:true, pattern:"digits11" },
        { id:"date", label:"Visit Date", type:"date", required:true },
        { id:"time", label:"Arrival Time", type:"time", required:true }
      ],
      "Meeting": [
        { id:"location", label:"Meeting Location", type:"select", required:true, options:["Office","Resident"] },
        { id:"with", label:"Meeting With (Name)", placeholder:"Name of person", required:true },
        { id:"business", label:"Business / Purpose", placeholder:"e.g. Amada Group / Investment meeting", required:true },
        { id:"duration", label:"Duration", type:"select", required:true, options:["30 mins","1 hour","2 hours","3 hours","Half-day","Full-day"] },
        { id:"date", label:"Meeting Date", type:"date", required:true },
        { id:"time", label:"Meeting Time", type:"time", required:true }
      ],
      "Tourism": [
        { id:"duration_days", label:"Duration (Days)", type:"number", required:true, min:1, max:90, placeholder:"e.g. 5" },
        { id:"hotel_booking", label:"Hotel Booking?", type:"select", required:true, options:["Yes","No"] },
        { id:"hotel_name", label:"Hotel Name (if Yes)", placeholder:"Hotel name", required:false, dependsOn:{ id:"hotel_booking", value:"Yes" } },
        { id:"date", label:"Arrival Date", type:"date", required:true },
        { id:"time", label:"Arrival Time", type:"time", required:true }
      ],
      "Shopping": [
        { id:"duration", label:"Duration", type:"select", required:true, options:["1 hour","2 hours","3 hours","Half-day","Full-day"] },
        { id:"date", label:"Visit Date", type:"date", required:true },
        { id:"time", label:"Arrival Time", type:"time", required:true }
      ],
      "School drop-off": [
        { id:"level", label:"School Level", type:"select", required:true, options:["Primary","Secondary","University"] },
        { id:"duration", label:"Duration", type:"select", required:true, options:["3 months (renewable)"] },
        { id:"student_name", label:"Student Name", placeholder:"Student full name", required:true },
        { id:"guardian_phone", label:"Parent/Guardian Phone", placeholder:"e.g. 08012345678", required:true, pattern:"digits11" },
        { id:"guardian_email", label:"Parent/Guardian Email", type:"email", placeholder:"e.g. parent@email.com", required:true },
        { id:"date", label:"Start Date", type:"date", required:true }
      ],
      "Golfing": [
        { id:"duration", label:"Duration", type:"select", required:true, options:["1 hour","2 hours","3 hours","4 hours","Half-day"] },
        { id:"date", label:"Golf Date", type:"date", required:true },
        { id:"time", label:"Tee Time", type:"time", required:true }
      ],
      "Business": [
        { id:"company", label:"Company / Organization", placeholder:"Company name", required:true },
        { id:"purpose", label:"Purpose", placeholder:"Reason for visit", required:true },
        { id:"duration", label:"Duration", type:"select", required:true, options:["1 hour","2 hours","3 hours","Half-day","Full-day","3 days","1 week"] },
        { id:"contact_email", label:"Contact Email", type:"email", placeholder:"e.g. you@company.com", required:true },
        { id:"date", label:"Visit Date", type:"date", required:true },
        { id:"time", label:"Arrival Time", type:"time", required:true }
      ]
    };
    let prxVisaRedraw = null;

    function visaFieldHtml(f){
      const id = `prxVisa_${f.id}`;
      const label = f.label || f.id;
      const type = f.type || 'text';
      const placeholder = f.placeholder || '';
      const requiredAttr = f.required ? 'required' : '';
      if (type === 'select') {
        const opts = (f.options || []).map(o => `<option value="${String(o).replace(/"/g,'&quot;')}">${o}</option>`).join('');
        return `
          <div class="w-full">
            <label class="prx-label">${label}</label>
            <select class="prx-input prx-select" id="${id}" ${requiredAttr}>
              <option value="" selected disabled>Select</option>
              ${opts}
            </select>
            <div class="prx-errtext" data-visa-err="${f.id}">This field is required.</div>
          </div>
        `;
      }
      const min = Number.isFinite(f.min) ? `min="${f.min}"` : '';
      const max = Number.isFinite(f.max) ? `max="${f.max}"` : '';
      return `
        <div class="w-full">
          <label class="prx-label">${label}</label>
          <input class="prx-input" id="${id}" type="${type}" placeholder="${placeholder}" ${requiredAttr} ${min} ${max}/>
          <div class="prx-errtext" data-visa-err="${f.id}">This field is required.</div>
        </div>
      `;
    }

    function visaSetFields(type){
      const container = document.getElementById('prxVisaDynamic');
      if (!container) return;
      const schema = visaSchemas[type] || [];
      container.innerHTML = schema.map(visaFieldHtml).join('');

      // Redraw QR on field edits (elements are recreated each time)
      if (typeof prxVisaRedraw === 'function') {
        container.querySelectorAll('input,select').forEach(el => {
          el.addEventListener('input', prxVisaRedraw);
          el.addEventListener('change', prxVisaRedraw);
        });
      }

      // Wire dependencies (show/hide)
      schema.forEach(f => {
        if (!f.dependsOn) return;
        const depId = document.getElementById(`prxVisa_${f.dependsOn.id}`);
        const el = document.getElementById(`prxVisa_${f.id}`);
        const wrap = el?.closest('.w-full');
        const apply = () => {
          const show = (depId?.value || '') === f.dependsOn.value;
          if (wrap) wrap.style.display = show ? '' : 'none';
          if (typeof prxVisaRedraw === 'function') prxVisaRedraw();
        };
        depId?.addEventListener('change', apply);
        apply();
      });
    }

    function visaGetDetails(type){
      const schema = visaSchemas[type] || [];
      const details = {};
      schema.forEach(f => {
        const el = document.getElementById(`prxVisa_${f.id}`);
        if (!el) return;
        const wrap = el.closest('.w-full');
        const hidden = wrap && wrap.style.display === 'none';
        if (hidden) return;
        details[f.id] = el.value || '';
      });
      return details;
    }

    function visaValidate(type){
      const schema = visaSchemas[type] || [];
      let ok = true;
      schema.forEach(f => {
        const el = document.getElementById(`prxVisa_${f.id}`);
        if (!el) return;
        const wrap = el.closest('.w-full');
        const hidden = wrap && wrap.style.display === 'none';
        const err = document.querySelector(`[data-visa-err="${f.id}"]`);
        if (hidden) {
          if (err) err.style.display = 'none';
          el.classList.remove('prx-error');
          return;
        }
        const val = String(el.value || '').trim();
        let fieldOk = true;
        if (f.required && val.length === 0) fieldOk = false;
        if (fieldOk && f.pattern === 'digits11') fieldOk = (/^\d{11}$/).test(val);
        if (fieldOk && f.type === 'email') fieldOk = (/^[^\s@]+@[^\s@]+\.[^\s@]+$/).test(val);
        if (fieldOk && f.type === 'number') {
          const n = Number(val);
          if (!Number.isFinite(n)) fieldOk = false;
          if (fieldOk && Number.isFinite(f.min) && n < f.min) fieldOk = false;
          if (fieldOk && Number.isFinite(f.max) && n > f.max) fieldOk = false;
        }
        if (!fieldOk) {
          ok = false;
          el.classList.add('prx-error');
          if (err) err.style.display = 'block';
        } else {
          el.classList.remove('prx-error');
          if (err) err.style.display = 'none';
        }
      });
      return ok;
    }

	    function prxDrawQr(canvas, text){
	      if (!canvas) return;
	      const value = String(text || '');
	      if (typeof window.amadaQrToCanvas === 'function') {
	        try {
	          window.amadaQrToCanvas(canvas, value, { ecc:'M', scale:4, margin:1 });
	          return;
	        } catch (e) {
	          try {
	            window.amadaQrToCanvas(canvas, value.slice(0, 120), { ecc:'M', scale:4, margin:1 });
	            return;
	          } catch (e2) {}
	        }
	      }
	      const ctx = canvas.getContext('2d');
	      canvas.width = 120;
	      canvas.height = 120;
      ctx.fillStyle = '#ffffff';
      ctx.fillRect(0,0,120,120);
      ctx.fillStyle = '#0f172a';
      ctx.font = 'bold 12px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial';
      ctx.textAlign = 'center';
      ctx.fillText('QR', 60, 56);
      ctx.font = '10px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial';
      ctx.fillText('load failed', 60, 74);
    }

    function prxSwitchCard(type){
      const data = prxCardData[type] || prxCardData.ny;
      const page = document.getElementById('page-pr-card');
      if (page) {
        page.style.setProperty('--prx-bg', data.bg);
        page.style.setProperty('--prx-accent', data.accent);
        page.style.setProperty('--prx-solid', data.solid);
      }

      const headerBrand = document.getElementById('prxHeaderBrand');
      if (headerBrand) headerBrand.innerText = (type === 'visa') ? 'AMADA VISA' : 'AMADA PR';

      const number = document.getElementById('prxCardNumber');
      if (number) number.innerText = data.number;

      const label = document.getElementById('prxCardHolderLabel');
      if (label) label.innerText = data.label;

      const tierEl = document.getElementById('prxCardTier');
      if (tierEl) {
        const displayLabel = type === 'visa' ? 'Visa Applicant' : `${data.tier} Applicant`;
        tierEl.innerHTML = `<span>${displayLabel}</span><i data-lucide="${data.icon}" class="w-3 h-3 text-slate-400 -rotate-90"></i>`;
      }

	      prxSetModeButtons(type);
	      prxUpdateVisaFields(type);
	      if (type === 'visa') {
	        const nameInput = document.getElementById('prxNameInput');
	        const phoneInput = document.getElementById('prxPhoneInput');
	        const visitType = document.getElementById('prxVisitType');
	        const canvas = document.getElementById('prxQrCanvas');
	        if (visitType?.value) {
	          visaSetFields(visitType.value);
	        } else {
	          const dyn = document.getElementById('prxVisaDynamic');
	          if (dyn) dyn.innerHTML = '';
	        }
	        prxDrawQr(canvas, prxQrText({
	          dossierId: '#VS-VISA',
	          name: nameInput?.value || 'Visitor',
	          phone: phoneInput?.value || '',
	          visitType: visitType?.value || 'Visit',
	          details: visaGetDetails(visitType?.value || '')
	        }));
	      }
      lucide.createIcons();
    }

    function prxHydrateFromSelection(){
      const tierSelect = document.getElementById('prxTierSelect');
      if (!tierSelect) return;

      const saved = sessionStorage.getItem('amada_selected_unit');
      const unit = saved ? inventory.find(x => x.id === saved) : null;
      if (!unit) return;

      const tier = unit.kind === 'presidential-villa' ? 'presidential' : (unit.territory || 'naija');
      if (prxCardData[tier]) tierSelect.value = tier;
      prxSwitchCard(tierSelect.value);
    }

	    function prxSubmitForm(){
	      const nameInput = document.getElementById('prxNameInput');
	      const phoneInput = document.getElementById('prxPhoneInput');
	      const tierSelect = document.getElementById('prxTierSelect');
	      const nameError = document.getElementById('prxNameError');
	      const phoneError = document.getElementById('prxPhoneError');
	      const visitType = document.getElementById('prxVisitType');
	      const visitError = document.getElementById('prxVisitError');
	      const terms = document.getElementById('prxTermsCheck');
	      const termsError = document.getElementById('prxTermsError');

	      if (!nameInput || !phoneInput || !tierSelect) return;

	      if (!terms?.checked) {
	        if (termsError) termsError.style.display = 'block';
	        prxSyncApplyGate();
	        return;
	      } else {
	        if (termsError) termsError.style.display = 'none';
	      }

	      let valid = true;
	      const nameVal = nameInput.value.trim();
	      const phoneVal = phoneInput.value.trim();

      if (nameVal.length < 3) {
        nameInput.classList.add('prx-error');
        if (nameError) nameError.style.display = 'block';
        valid = false;
      } else {
        nameInput.classList.remove('prx-error');
        if (nameError) nameError.style.display = 'none';
      }

      if (phoneVal.length !== 11) {
        phoneInput.classList.add('prx-error');
        if (phoneError) phoneError.style.display = 'block';
        valid = false;
      } else {
        phoneInput.classList.remove('prx-error');
        if (phoneError) phoneError.style.display = 'none';
      }

      if (!valid) return;

	      const tierKey = tierSelect.value;
	      const data = prxCardData[tierKey] || prxCardData.ny;
	      const dossierId = `#${data.prefix}-${data.number}`;

	      window.prxLastSubmission = {
	        tierKey,
	        dossierId,
	        name: nameVal,
	        phone: phoneVal,
	        visitType: visitType?.value || '',
	        details: (tierKey === 'visa') ? visaGetDetails(visitType?.value || '') : null
	      };

      if (tierKey === 'visa') {
        const v = String(visitType?.value || '').trim();
        if (!v) {
          if (visitError) visitError.style.display = 'block';
          visitType?.classList.add('prx-error');
          return;
        }
        if (visitError) visitError.style.display = 'none';
        visitType?.classList.remove('prx-error');

        if (!visaValidate(v)) return;
      }

      const dossierEl = document.getElementById('prxDossierId');
      const refEl = document.getElementById('prxRefId');
      if (dossierEl) dossierEl.innerText = dossierId;
      if (refEl) refEl.innerText = dossierId;

      const successTitle = document.getElementById('prxSuccessTitle');
      const successSub = document.getElementById('prxSuccessSub');
      const depositWrap = document.getElementById('prxDepositWrap');
      if (tierKey === 'visa') {
        if (successTitle) successTitle.innerText = 'VISA Request Received';
        if (successSub) successSub.innerText = `Your Visit Application (VISA) QR is embedded on your card. Visit type: ${visitType.value}.`;
        if (depositWrap) depositWrap.classList.add('hidden');
      } else {
        if (successTitle) successTitle.innerText = 'Request Received';
        if (successSub) successSub.innerText = 'Our private board will review your credentials within 48 hours.';
        if (depositWrap) depositWrap.classList.remove('hidden');
      }

      // Clone card preview for result
      const result = document.getElementById('prxCardResult');
      const originalCard = document.getElementById('prxCardInner');
      if (result && originalCard) {
        result.innerHTML = '';
        const cardClone = originalCard.cloneNode(true);

        // Make clone PNG-safe (no gradient clip artifacts)
        const nameText = cardClone.querySelector('#prxCardName');
        if (nameText) {
          nameText.classList.remove('prx-text-accent');
          nameText.style.background = 'none';
          nameText.style.webkitBackgroundClip = 'initial';
          nameText.style.webkitTextFillColor = 'initial';
          nameText.style.color = data.solid;
        }

        const bigNumber = cardClone.querySelector('#prxCardNumber');
        if (bigNumber) {
          bigNumber.style.background = 'none';
          bigNumber.style.webkitBackgroundClip = 'initial';
          bigNumber.style.webkitTextFillColor = 'initial';
          bigNumber.style.color = data.solid;
          bigNumber.style.opacity = '0.15';
        }

        cardClone.style.boxShadow = 'none';
        cardClone.style.transform = 'none';

        if (tierKey === 'visa') {
          // Render QR into the cloned canvas
          const canvas = cardClone.querySelector('#prxQrCanvas');
          const qrPayload = prxQrText({
            dossierId,
            name: nameInput.value.trim(),
            phone: phoneInput.value.trim(),
            visitType: visitType.value,
            details: visaGetDetails(visitType.value)
          });
          prxDrawQr(canvas, qrPayload);
          const qrWrap = cardClone.querySelector('#prxQrWrap');
          if (qrWrap) qrWrap.style.display = 'flex';
        } else {
          const qrWrap = cardClone.querySelector('#prxQrWrap');
          if (qrWrap) qrWrap.style.display = 'none';
        }

        const wrapper = document.createElement('div');
        wrapper.className = 'relative w-[340px] h-[210px] rounded-[20px] overflow-hidden';
        wrapper.appendChild(cardClone);
        result.appendChild(wrapper);
      }

      const formView = document.getElementById('prxFormView');
      const successView = document.getElementById('prxSuccessView');
      if (formView) formView.classList.add('hidden');
      if (successView) successView.classList.remove('hidden');

      const glass = document.getElementById('prxGlass');
      if (glass) glass.scrollTop = 0;
      lucide.createIcons();
    }

	    function prxEscapeHtml(s){
	      return String(s ?? '')
	        .replace(/&/g, '&amp;')
	        .replace(/</g, '&lt;')
	        .replace(/>/g, '&gt;')
	        .replace(/"/g, '&quot;')
	        .replace(/'/g, '&#39;');
	    }

	    function prxDownloadHtml(filename, html){
	      const blob = new Blob([html], { type: 'text/html;charset=utf-8' });
	      const url = URL.createObjectURL(blob);
	      const a = document.createElement('a');
	      a.href = url;
	      a.download = filename;
	      document.body.appendChild(a);
	      a.click();
	      a.remove();
	      setTimeout(() => URL.revokeObjectURL(url), 3000);
	    }

	    function prxDocShell(title, bodyHtml){
	      return `<!doctype html><html><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>${title}</title>
	        <style>
	          body{font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial; padding:38px; color:#0f172a; background:#fff;}
	          h1{font-family: Georgia, serif; font-weight:600; margin:0 0 10px;}
	          h2{font-family: Georgia, serif; font-weight:600; margin:24px 0 10px;}
	          .k{font-size:11px; letter-spacing:.22em; text-transform:uppercase; color:#64748b; font-weight:900;}
	          .box{border:1px solid #e2e8f0; border-radius:18px; padding:18px; margin-top:14px;}
	          .pill{display:inline-block; padding:6px 12px; border:1px solid #cbd5e1; border-radius:999px; font-size:11px; letter-spacing:.18em; text-transform:uppercase; color:#475569;}
	          .muted{color:#475569;}
	          img{max-width:100%; height:auto;}
	          .grid{display:grid; grid-template-columns: 1fr; gap:14px;}
	          @media (min-width: 900px){ .grid{grid-template-columns: 420px 1fr;} }
	          .card-img{border:1px solid #e2e8f0;border-radius:18px;overflow:hidden;}
	          .hr{height:1px;background:#e2e8f0;margin:22px 0;}
	          a{color:#0f172a;}
	        </style></head><body>
	        <div class="pill">AMADA REALTY</div>
	        <h1>${title}</h1>
	        ${bodyHtml}
	        <div class="box muted">Tip: Use Print → “Save as PDF” if you need a PDF copy.</div>
	      </body></html>`;
	    }

	    function prxDownloadBrochure(){
	      const meta = window.prxLastSubmission || {};
	      const body = `
	        <div class="box">
	          <div class="k">Brochure</div>
	          <p class="muted" style="line-height:1.7;margin-top:10px;">
	            Welcome to Amada Realty — a private-city estate engineered for quiet luxury, protected systems, and curated territories.
	            Select an asset, design your three-floor interior, and request access through the PR Card protocol.
	          </p>
	        </div>
	        <div class="box">
	          <div class="k">Territories</div>
	          <p class="muted" style="line-height:1.7;margin-top:10px;">New York • London • Toronto • Paris • Dubai</p>
	        </div>
	        <div class="box">
	          <div class="k">Amenities</div>
	          <p class="muted" style="line-height:1.7;margin-top:10px;">
	            Terminal Mall • Resort &amp; Spa • International Academy • Private Clinic • Parks &amp; Golf • Natural Food Reserve • 24/7 Light
	          </p>
	        </div>
	        <div class="box">
	          <div class="k">Your Reference</div>
	          <p class="muted" style="margin-top:10px;">Dossier ID: <strong>${prxEscapeHtml(meta.dossierId || '—')}</strong></p>
	        </div>
	      `;
	      prxDownloadHtml(`Amada_Brochure_${(meta.dossierId || 'AMADA').replace('#','')}.html`, prxDocShell('Amada Realty — Estate Brochure', body));
	    }

	    function prxDownloadNewsletter(){
	      const meta = window.prxLastSubmission || {};
	      const body = `
	        <div class="box">
	          <div class="k">Newsletter</div>
	          <p class="muted" style="line-height:1.7;margin-top:10px;">
	            AMADA Dispatch — Invitation Grade. This newsletter includes development milestones, territory releases, and protocol updates.
	          </p>
	          <ul class="muted" style="line-height:1.7;margin-top:10px;">
	            <li>Territory releases rotate by scarcity windows.</li>
	            <li>PR Card dossiers are reviewed on a need-to-know basis.</li>
	            <li>Presidential Villas (1,400 sqm) are one per street.</li>
	          </ul>
	        </div>
	        <div class="box">
	          <div class="k">Subscriber</div>
	          <p class="muted" style="margin-top:10px;"><strong>${prxEscapeHtml(meta.name || '—')}</strong> • ${prxEscapeHtml(meta.phone || '')}</p>
	        </div>
	      `;
	      prxDownloadHtml(`Amada_Newsletter_${(meta.dossierId || 'AMADA').replace('#','')}.html`, prxDocShell('AMADA Dispatch — Newsletter', body));
	    }

	    function prxDownloadTerms(){
	      const t = (typeof legalDocs === 'object' && legalDocs?.terms) ? legalDocs.terms : null;
	      const body = `
	        <div class="box">
	          <div class="k">${t ? prxEscapeHtml(t.kicker) : 'Legal'}</div>
	          <div style="margin-top:12px; line-height:1.7;">${t ? t.body : '<p class="muted">Terms unavailable.</p>'}</div>
	        </div>
	      `;
	      prxDownloadHtml('Amada_Terms_and_Conditions.html', prxDocShell('Terms & Conditions', body));
	    }

	    function prxDownloadAcknowledgement(){
	      const meta = window.prxLastSubmission || {};
	      const isVisa = meta.tierKey === 'visa';
	      const title = isVisa ? 'VISA (Visit) Application — Acknowledgement' : 'PR Application — Acknowledgement';
	      const payment = isVisa ? `
	        <div class="box">
	          <div class="k">Status</div>
	          <p class="muted" style="margin-top:10px;">Received. Awaiting verification and clearance.</p>
	        </div>
	      ` : `
	        <div class="box">
	          <div class="k">Status</div>
	          <p class="muted" style="margin-top:10px;">Received. Awaiting payment to engage review.</p>
	        </div>
	        <div class="box">
	          <div class="k">Payment</div>
	          <p class="muted" style="line-height:1.7;margin-top:10px;">
	            Deposit to engage: <strong>₦100,000,000</strong><br/>
	            Bank: <strong>Stanbic IBTC</strong><br/>
	            Account Name: <strong>Amada Residence</strong><br/>
	            Account Number: <strong>5770707070</strong><br/>
	            Reference: <strong>${prxEscapeHtml(meta.dossierId || '—')}</strong>
	          </p>
	        </div>
	      `;
	      const body = `
	        <div class="box">
	          <div class="k">Applicant</div>
	          <p class="muted" style="line-height:1.7;margin-top:10px;">
	            Name: <strong>${prxEscapeHtml(meta.name || '—')}</strong><br/>
	            Phone: <strong>${prxEscapeHtml(meta.phone || '—')}</strong><br/>
	            Dossier ID: <strong>${prxEscapeHtml(meta.dossierId || '—')}</strong>
	          </p>
	        </div>
	        ${payment}
	        <div class="box">
	          <div class="k">Confidentiality</div>
	          <p class="muted" style="line-height:1.7;margin-top:10px;">
	            This acknowledgement is invitation-grade. Distribution is prohibited.
	          </p>
	        </div>
	      `;
	      prxDownloadHtml(`Amada_Acknowledgement_${(meta.dossierId || 'AMADA').replace('#','')}.html`, prxDocShell(title, body));
	    }

	    function prxDownloadCard(){
	      const el = document.querySelector('#prxCardResult > div');
	      if (!el) return;
	      if (typeof html2canvas !== 'function') {
	        alert('Download unavailable: html2canvas failed to load.');
	        return;
	      }
	      html2canvas(el, { backgroundColor: null, scale: 3, useCORS: true }).then(canvas => {
	        const a = document.createElement('a');
	        a.download = 'Amada_PR_Card.png';
	        a.href = canvas.toDataURL('image/png');
	        a.click();
	      });
	    }

	    function prxDownloadPack(){
	      const meta = window.prxLastSubmission || {};
	      const dossier = (meta.dossierId || 'AMADA').toString();
	      const safeDossier = dossier.replace('#', '').replace(/[^a-zA-Z0-9_-]/g, '');
	      const t = (typeof legalDocs === 'object' && legalDocs?.terms) ? legalDocs.terms : null;

	      const brochure = `
	        <h2>Brochure</h2>
	        <div class="box">
	          <div class="k">Overview</div>
	          <p class="muted" style="line-height:1.7;margin-top:10px;">
	            Welcome to Amada Realty — a private-city estate engineered for quiet luxury, protected systems, and curated territories.
	            Select an asset, design your three-floor interior, and request access through the PR Card protocol.
	          </p>
	        </div>
	        <div class="box">
	          <div class="k">Territories</div>
	          <p class="muted" style="line-height:1.7;margin-top:10px;">New York • London • Toronto • Paris • Dubai</p>
	        </div>
	        <div class="box">
	          <div class="k">Amenities</div>
	          <p class="muted" style="line-height:1.7;margin-top:10px;">
	            Terminal Mall • Resort &amp; Spa • International Academy • Private Clinic • Parks &amp; Golf • Natural Food Reserve • 24/7 Light
	          </p>
	        </div>
	      `;

	      const newsletter = `
	        <h2>Newsletter</h2>
	        <div class="box">
	          <div class="k">AMADA Dispatch</div>
	          <p class="muted" style="line-height:1.7;margin-top:10px;">
	            Invitation Grade. Development milestones, territory releases, and protocol updates.
	          </p>
	          <ul class="muted" style="line-height:1.7;margin-top:10px;">
	            <li>Territory releases rotate by scarcity windows.</li>
	            <li>PR Card dossiers are reviewed on a need-to-know basis.</li>
	            <li>Presidential Villas (1,400 sqm) are one per street.</li>
	          </ul>
	        </div>
	      `;

	      const acknowledgement = (() => {
	        const isVisa = meta.tierKey === 'visa';
	        const title = isVisa ? 'VISA (Visit) Application — Acknowledgement' : 'PR Application — Acknowledgement';
	        const payment = isVisa ? `
	          <div class="box">
	            <div class="k">Status</div>
	            <p class="muted" style="margin-top:10px;">Received. Awaiting verification and clearance.</p>
	          </div>
	        ` : `
	          <div class="box">
	            <div class="k">Status</div>
	            <p class="muted" style="margin-top:10px;">Received. Awaiting payment to engage review.</p>
	          </div>
	          <div class="box">
	            <div class="k">Payment</div>
	            <p class="muted" style="line-height:1.7;margin-top:10px;">
	              Deposit to engage: <strong>₦100,000,000</strong><br/>
	              Bank: <strong>Stanbic IBTC</strong><br/>
	              Account Name: <strong>Amada Residence</strong><br/>
	              Account Number: <strong>5770707070</strong><br/>
	              Reference: <strong>${prxEscapeHtml(meta.dossierId || '—')}</strong>
	            </p>
	          </div>
	        `;
	        return `
	          <h2>Acknowledgement Letter</h2>
	          <div class="box">
	            <div class="k">${prxEscapeHtml(title)}</div>
	            <p class="muted" style="line-height:1.7;margin-top:10px;">
	              Name: <strong>${prxEscapeHtml(meta.name || '—')}</strong><br/>
	              Phone: <strong>${prxEscapeHtml(meta.phone || '—')}</strong><br/>
	              Dossier ID: <strong>${prxEscapeHtml(meta.dossierId || '—')}</strong>
	            </p>
	          </div>
	          ${payment}
	          <div class="box">
	            <div class="k">Confidentiality</div>
	            <p class="muted" style="line-height:1.7;margin-top:10px;">
	              This acknowledgement is invitation-grade. Distribution is prohibited.
	            </p>
	          </div>
	        `;
	      })();

	      const terms = `
	        <h2>Terms &amp; Conditions</h2>
	        <div class="box">
	          <div class="k">${t ? prxEscapeHtml(t.kicker) : 'Legal'}</div>
	          <div style="margin-top:12px; line-height:1.7;">${t ? t.body : '<p class="muted">Terms unavailable.</p>'}</div>
	        </div>
	      `;

	      const el = document.querySelector('#prxCardResult > div');
	      const buildPack = (cardDataUrl) => {
	        const cardSection = cardDataUrl ? `
	          <h2>PR Card</h2>
	          <div class="grid">
	            <div class="card-img"><img alt="Amada PR Card" src="${cardDataUrl}"/></div>
	            <div>
	              <div class="box">
	                <div class="k">Dossier</div>
	                <p class="muted" style="margin-top:10px;">ID: <strong>${prxEscapeHtml(meta.dossierId || '—')}</strong></p>
	              </div>
	              <div class="box">
	                <div class="k">Download</div>
	                <p class="muted" style="margin-top:10px;">
	                  Save the card image: <a download="Amada_PR_Card_${prxEscapeHtml(safeDossier || 'AMADA')}.png" href="${cardDataUrl}">Download PNG</a>
	                </p>
	              </div>
	            </div>
	          </div>
	          <div class="hr"></div>
	        ` : `
	          <h2>PR Card</h2>
	          <div class="box">
	            <div class="k">Note</div>
	            <p class="muted" style="margin-top:10px;">
	              Card preview is unavailable for export on this device. You can still download the other documents in this pack.
	            </p>
	          </div>
	          <div class="hr"></div>
	        `;

	        const body = `
	          <div class="box">
	            <div class="k">Applicant</div>
	            <p class="muted" style="line-height:1.7;margin-top:10px;">
	              Name: <strong>${prxEscapeHtml(meta.name || '—')}</strong><br/>
	              Phone: <strong>${prxEscapeHtml(meta.phone || '—')}</strong><br/>
	              Dossier ID: <strong>${prxEscapeHtml(meta.dossierId || '—')}</strong>
	            </p>
	          </div>
	          ${cardSection}
	          ${brochure}
	          <div class="hr"></div>
	          ${newsletter}
	          <div class="hr"></div>
	          ${terms}
	          <div class="hr"></div>
	          ${acknowledgement}
	        `;

	        prxDownloadHtml(`Amada_Application_Pack_${safeDossier || 'AMADA'}.html`, prxDocShell('AMADA — Application Pack', body));
	      };

	      if (el && typeof html2canvas === 'function') {
	        html2canvas(el, { backgroundColor: null, scale: 3, useCORS: true }).then(canvas => {
	          buildPack(canvas.toDataURL('image/png'));
	        }).catch(() => buildPack(null));
	      } else {
	        buildPack(null);
	      }
	    }

    function prxCopyDetails(){
      const dossierId = document.getElementById('prxRefId')?.innerText || '';
      const text = [
        'Amada Residence Deposit Details',
        'Bank: Stanbic IBTC',
        'Account Name: Amada Residence',
        'Account: 5770707070',
        'Amount: ₦100,000,000',
        `Ref: ${dossierId}`
      ].join('\n');

      const btn = document.querySelector('#prxSuccessView button[onclick="prxCopyDetails()"]');
      const setCopied = () => {
        if (!btn) return;
        const original = btn.innerHTML;
        btn.innerHTML = '<i data-lucide="check" class="w-4 h-4"></i><span>Copied</span>';
        lucide.createIcons();
        setTimeout(() => { btn.innerHTML = original; lucide.createIcons(); }, 2000);
      };

      const fallbackCopy = () => {
        const ta = document.createElement('textarea');
        ta.value = text;
        ta.setAttribute('readonly','');
        ta.style.position = 'fixed';
        ta.style.left = '-9999px';
        document.body.appendChild(ta);
        ta.select();
        try { document.execCommand('copy'); setCopied(); } catch(e) {}
        ta.remove();
      };

      if (navigator.clipboard && typeof navigator.clipboard.writeText === 'function') {
        navigator.clipboard.writeText(text).then(setCopied).catch(fallbackCopy);
      } else {
        fallbackCopy();
      }
    }

    function prxResetPR(){
      const formView = document.getElementById('prxFormView');
      const successView = document.getElementById('prxSuccessView');
      if (successView) successView.classList.add('hidden');
      if (formView) formView.classList.remove('hidden');
      const glass = document.getElementById('prxGlass');
      if (glass) glass.scrollTop = 0;
      lucide.createIcons();
    }

    // ---------------------------
    // PR Card submit
    // ---------------------------
    function makeDossierId(){
      const n = Math.floor(1000 + Math.random()*8999);
      return '#AM-' + n;
    }

    function copyDepositDetails(btn){
      const ref = document.getElementById('depositRef')?.innerText || '';
      const text =
        'Account Name: Amada Residence\n' +
        'Account Number: 5770707070\n' +
        'Amount: ₦100,000,000 (One Hundred Million Naira)\n' +
        'Reference: ' + ref;

      const showCopied = () => {
        if(!btn) return;
        const prev = btn.innerText;
        btn.innerText = 'Copied';
        setTimeout(() => { btn.innerText = prev; }, 1200);
      };

      const fallbackCopy = () => {
        const ta = document.createElement('textarea');
        ta.value = text;
        ta.setAttribute('readonly','');
        ta.style.position = 'fixed';
        ta.style.left = '-9999px';
        document.body.appendChild(ta);
        ta.select();
        try { document.execCommand('copy'); showCopied(); } catch(e) {}
        ta.remove();
      };

      if (navigator.clipboard && typeof navigator.clipboard.writeText === 'function') {
        navigator.clipboard.writeText(text).then(showCopied).catch(fallbackCopy);
      } else {
        fallbackCopy();
      }
    }

    function closePRSuccess(){
      const fs = document.getElementById('formSuccess');
      fs.classList.add('hidden');
      fs.classList.remove('flex');
      document.getElementById('prForm').reset();
      hydratePRFormFromSelection();
    }

    function handlePRSubmit(e){
      e.preventDefault();
      const btn = e.target.querySelector('button[type="submit"]');
      const originalText = btn.innerHTML;

      btn.innerHTML = '<svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white inline-block" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Encrypting...';
      btn.disabled = true;

      setTimeout(() => {
        const id = makeDossierId();
        document.getElementById('dossierId').innerText = id;
        document.getElementById('depositRef').innerText = id;
        const fs = document.getElementById('formSuccess');
        fs.classList.remove('hidden');
        fs.classList.add('flex');
        btn.innerHTML = originalText;
        btn.disabled = false;
        lucide.createIcons();
      }, 1200);
    }

    // ---------------------------
    // Legal docs (scroll lock)
    // ---------------------------
    const legalDocs = {
      privacy: {
        kicker: 'Legal',
        title: 'Privacy Policy',
        subtitle: 'How Amada Realty collects, uses, stores, and protects information submitted through the estate website.',
        body: `
          <h4 style="font-weight:800; margin-top:0;">1. Scope</h4>
          <p>This policy covers data submitted through Amada Realty pages, PR Card requests, and concierge communications.</p>

          <h4 style="font-weight:800;">2. What We Collect</h4>
          <ul style="margin-left:18px; list-style:disc;">
            <li><strong>Identity & contact</strong>: name and contact details submitted by you.</li>
            <li><strong>Application context</strong>: net worth bracket, selected asset, territory preference.</li>
            <li><strong>Usage</strong>: basic site analytics to improve experience.</li>
          </ul>

          <h4 style="font-weight:800;">3. Confidentiality</h4>
          <p>Amada Realty is invitation-grade. Submitted information is reviewed under need-to-know access and used only for eligibility and concierge follow-up.</p>

          <h4 style="font-weight:800;">4. Sharing</h4>
          <p>We do not sell your data. Limited sharing may occur with vetted service partners strictly for operational needs, under confidentiality obligations.</p>

          <h4 style="font-weight:800;">5. Contact</h4>
          <p>Concierge: <strong>concierge@amadarealty.com</strong></p>
        `
      },
      terms: {
        kicker: 'Legal',
        title: 'Terms & Conditions',
        subtitle: 'Website use, PR Card eligibility, confidentiality rules, and purchase-access conditions.',
        body: `
          <h4 style="font-weight:800; margin-top:0;">1. Private Estate Notice</h4>
          <p>Amada Realty is invitation-grade. Access to floorplans, tours, and purchase rights may be restricted at any time.</p>

          <h4 style="font-weight:800;">2. PR Card Requests</h4>
          <ul style="margin-left:18px; list-style:disc;">
            <li>Submitting a PR Card request does not guarantee approval or viewing rights.</li>
            <li>We may require proof of funds and/or references before private disclosures.</li>
          </ul>

          <h4 style="font-weight:800;">3. Confidentiality</h4>
          <p>Layouts, floorplans, internal policies, and pricing details are confidential. You agree not to distribute proprietary materials.</p>

          <h4 style="font-weight:800;">4. Availability</h4>
          <p>All status labels are indicative and may change without notice.</p>
        `
      },
      bylaws: {
        kicker: 'Estate Governance',
        title: 'Estate Bylaws',
        subtitle: 'Rules that protect silence, safety, aesthetics, and resident privacy.',
        body: `
          <h4 style="font-weight:800; margin-top:0;">1. Quiet Luxury Standard</h4>
          <ul style="margin-left:18px; list-style:disc;">
            <li>Quiet Hours: <strong>22:00 – 07:00</strong></li>
            <li>Restricted outdoor noise events without approval.</li>
          </ul>

          <h4 style="font-weight:800;">2. Visitor Policy</h4>
          <ul style="margin-left:18px; list-style:disc;">
            <li>Guests must be registered by residents.</li>
            <li>Large gatherings require prior approval.</li>
          </ul>

          <h4 style="font-weight:800;">3. Aesthetics</h4>
          <p>Exterior changes require architectural review to preserve territory identity.</p>

          <h4 style="font-weight:800;">4. Security</h4>
          <p>Controlled entry, authorized access, and protected routes are enforced to preserve resident privacy.</p>
        `
      }
    };

    function openLegal(kind){
      document.body.style.overflow = 'hidden';
      const doc = legalDocs[kind] || legalDocs.privacy;

      document.getElementById('legalKicker').innerText = doc.kicker;
      document.getElementById('legalTitle').innerText = doc.title;
      document.getElementById('legalSubtitle').innerText = doc.subtitle;
      document.getElementById('legalBody').innerHTML = doc.body;

      document.getElementById('legal-modal').classList.add('open');
      lucide.createIcons();
    }

    function closeLegal(force=false){
      const m = document.getElementById('legal-modal');
      if(!m.classList.contains('open') && !force) return;
      m.classList.remove('open');
      document.body.style.overflow = '';
    }

    document.getElementById('legal-modal').addEventListener('click', (e) => {
      if (e.target.id === 'legal-modal') closeLegal();
    });

    // ---------------------------
    // City Map (local masterplan + hotspots)
    // ---------------------------
    const CITY_MAP_IMAGE_URL = "amada-estate-layout-collage-2x.png";
    let currentCityLayer = "all";

    const cityZones = {
      ny:     { type:"territory", title:"New York Territory", icon:"building-2", access:"Residents + escorted guests", hours:"Always", noise:"Medium", desc:"Industrial luxury district with controlled terraces and quiet prestige." },
      canada: { type:"territory", title:"Toronto Territory",  icon:"building-2", access:"Residents + escorted guests", hours:"Always", noise:"Low",    desc:"Cosmopolitan calm—clean lines, quiet power, and everyday ease." },
      london: { type:"territory", title:"London Territory",   icon:"umbrella",   access:"Residents + escorted guests", hours:"Always", noise:"Low",    desc:"Regency calm district with garden etiquette and discreet arrivals." },
      dubai:  { type:"territory", title:"Dubai Territory",    icon:"sun",        access:"Residents + escorted guests", hours:"Always", noise:"Low",    desc:"Modernist villas and controlled pool privacy zoning." },
      naija:  { type:"territory", title:"Paris Territory",    icon:"landmark",   access:"Residents + escorted guests", hours:"Always", noise:"Low",    desc:"Boulevard elegance—timeless façades, discretion-first living, and quiet prestige." },

      mall:   { type:"amenity", title:"Shopping Mall & Offices", icon:"shopping-bag", access:"Residents + invited guests", hours:"08:00–22:00", noise:"Low", desc:"Curated retail + private offices, controlled access." },
      heli:   { type:"amenity", title:"Parking Lot & Helipad",   icon:"plane",        access:"Authorized entry",         hours:"06:00–22:00", noise:"Controlled", desc:"Valet pockets, service routing, executive arrivals." },
      school: { type:"amenity", title:"School",                  icon:"graduation-cap",access:"Residents only",         hours:"07:30–16:00", noise:"Low", desc:"International academy corridor, controlled parent access." },
      park:   { type:"amenity", title:"Park & Dog Park",         icon:"trees",        access:"Residents + guests",      hours:"06:00–21:00", noise:"Low", desc:"Green breathing space + dog zone, strict cleanliness policy." },
      leisure:{ type:"amenity", title:"Leisure Center",          icon:"sparkles",     access:"Residents + guests",      hours:"08:00–23:00", noise:"Low", desc:"Gym + lounge — curated social behavior." },
      golf:   { type:"amenity", title:"Golf",                    icon:"flag",         access:"Residents + guests",      hours:"06:00–19:00", noise:"Low", desc:"Putting/practice — quiet sport, quiet prestige." }
    };

    const cityHotspots = [
      { key:"ny",     layer:"territories", x: 90,  y: 110, w: 520, h: 170 },
      { key:"canada", layer:"territories", x: 90,  y: 315, w: 520, h: 170 },
      { key:"london", layer:"territories", x: 90,  y: 520, w: 520, h: 170 },
      { key:"dubai",  layer:"territories", x: 90,  y: 725, w: 520, h: 170 },
      { key:"naija",  layer:"territories", x: 90,  y: 930, w: 520, h: 170 },

      { key:"mall",   layer:"amenities",  x: 705, y: 120, w: 250, h: 140 },
      { key:"heli",   layer:"amenities",  x: 705, y: 290, w: 250, h: 120 },
      { key:"school", layer:"amenities",  x: 705, y: 440, w: 250, h: 140 },
      { key:"park",   layer:"amenities",  x: 705, y: 610, w: 250, h: 140 },
      { key:"leisure",layer:"amenities",  x: 705, y: 780, w: 250, h: 150 },
      { key:"golf",   layer:"amenities",  x: 705, y: 960, w: 250, h: 140 }
    ];

    function syncCityMapFallback(){
      const img = document.getElementById('cityMapImg');
      const fallback = document.getElementById('cityMapFallback');
      if(!img || !fallback) return;

      if (CITY_MAP_IMAGE_URL && CITY_MAP_IMAGE_URL.trim().length > 0) {
        img.style.display = '';
        img.src = CITY_MAP_IMAGE_URL.trim();
        fallback.style.display = 'none';
      } else {
        fallback.style.display = 'flex';
      }
    }

    function setCityLayer(layer){
      currentCityLayer = layer;
      renderCityHotspots();
    }

    function setCityDetails(key){
      const z = cityZones[key];
      if(!z) return;

      document.getElementById('cityDetailTitle').innerText = z.title;
      document.getElementById('cityDetailDesc').innerText  = z.desc;
      document.getElementById('cityDetailAccess').innerText= z.access;
      document.getElementById('cityDetailHours').innerText = z.hours;
      document.getElementById('cityDetailNoise').innerText = z.noise;

      const iconEl = document.getElementById('cityDetailIcon');
      iconEl.setAttribute('data-lucide', z.icon);

      const cta = document.getElementById('cityCTA');
      cta.onclick = () => location.hash = '#/assets';

      lucide.createIcons();
    }

    function renderCityHotspots(){
      const svg = document.getElementById('cityMapSvg');
      const tip = document.getElementById('cityTip');
      if(!svg) return;

      syncCityMapFallback();
      const visible = cityHotspots.filter(h => currentCityLayer === 'all' ? true : h.layer === currentCityLayer);

      svg.innerHTML = visible.map(h => `
        <rect data-zone="${h.key}"
              x="${h.x}" y="${h.y}" width="${h.w}" height="${h.h}"
              rx="22" ry="22"
              fill="rgba(255,255,255,0.001)"
              stroke="rgba(255,255,255,0.0)"
              stroke-width="2"
              style="cursor:pointer;"></rect>
      `).join('');

      svg.querySelectorAll('rect[data-zone]').forEach(r => {
        const key = r.getAttribute('data-zone');

        r.addEventListener('mouseenter', () => {
          r.setAttribute('fill', 'rgba(255,255,255,0.08)');
          r.setAttribute('stroke','rgba(255,255,255,0.35)');
          if(tip){
            tip.classList.remove('hidden');
            tip.textContent = cityZones[key]?.title || key.toUpperCase();
          }
        });

        r.addEventListener('mousemove', (e) => {
          if(!tip) return;
          const wrap = svg.getBoundingClientRect();
          tip.style.left = (e.clientX - wrap.left + 14) + 'px';
          tip.style.top  = (e.clientY - wrap.top + 14) + 'px';
        });

        r.addEventListener('mouseleave', () => {
          r.setAttribute('fill', 'rgba(255,255,255,0.001)');
          r.setAttribute('stroke','rgba(255,255,255,0.0)');
          tip?.classList.add('hidden');
        });

        r.addEventListener('click', () => setCityDetails(key));
      });

      setCityDetails('ny');
      lucide.createIcons();
    }

    // ---------------------------
    // Gallery data + render
    // ---------------------------
    const GALLERY_ITEMS = [
      { id:"ahoz3b", kind:"Masterplan", title:"The Private City", subtitle:"A full estate masterplan with premium amenities inside secured walls.", src:"amada-masterplan-estate-aerial.png", span:"col-span-12 md:col-span-7", h:"h-72 md:h-[420px]" },
      { id:"97v93a", kind:"Amenities", title:"Resort-Grade Leisure", subtitle:"Lagoon pools, landscaped promenades, and curated lifestyle zones.", src:"amada-masterplan-estate-aerial-angle.png", span:"col-span-12 md:col-span-5", h:"h-72 md:h-[420px]" },
      { id:"w65loy", kind:"Security", title:"The Gated Arrival", subtitle:"A controlled entrance designed for privacy and prestige.", src:"amada-resort-lagoon-street-view.png", span:"col-span-12 md:col-span-4", h:"h-72 md:h-[320px]" },
      { id:"w5m1j0", kind:"Boulevard", title:"Boulevard Living", subtitle:"Symmetry, silence, and protected streetscapes.", src:"amada-estate-layout-map.png", span:"col-span-12 md:col-span-8", h:"h-72 md:h-[320px]" },
      { id:"rxewmu", kind:"Territory", title:"Tree-Lined Addresses", subtitle:"District identity preserved through architectural cohesion.", src:"amada-estate-layout-map-labeled-streets.png", span:"col-span-12 md:col-span-7", h:"h-72 md:h-[320px]" },
      { id:"2rosn9", kind:"Streets", title:"Quiet Prestige", subtitle:"A calm residential corridor built for private living.", src:"amada-resort-lagoon-pool.png", span:"col-span-12 md:col-span-5", h:"h-72 md:h-[320px]" },
      { id:"15u10z", kind:"Arrival", title:"The Wall Line", subtitle:"Aerial approach—designed to feel exclusive before you enter.", src:"amada-modern-villas-street.png", span:"col-span-12 md:col-span-5", h:"h-72 md:h-[320px]" },
      { id:"dw7yda", kind:"Territory", title:"Modern Villa Rows", subtitle:"High-end architecture, clean lines, controlled landscaping.", src:"amada-luxury-villas-palm-lined-street.png", span:"col-span-12 md:col-span-7", h:"h-72 md:h-[320px]" },
      { id:"layout", kind:"Masterplan", title:"Estate Layout", subtitle:"Territories on the left, premium amenities on the right.", src:"amada-estate-layout-collage-2x.png", span:"col-span-12", h:"h-72 md:h-[460px]" }
    ];

    let galleryRendered = false;
    let galleryIndex = 0;

    function ensureGalleryRendered(){
      if(galleryRendered) return;
      renderGalleryGrid();
      galleryRendered = true;
    }

    function renderGalleryGrid(){
      const grid = document.getElementById('galleryGrid');
      if(!grid) return;

      grid.innerHTML = GALLERY_ITEMS.map((it, idx) => `
        <button class="gitem ${it.span} ${it.h} text-left"
                data-gidx="${idx}"
                aria-label="Open ${it.title}">
          <img class="gimg" src="${it.src}" alt="${it.title}" loading="lazy" />
          <div class="ggrad"></div>
          <div class="gcap">
            <div class="k">${it.kind}</div>
            <div class="t">${it.title}</div>
            <div class="s">${it.subtitle}</div>
          </div>
        </button>
      `).join('');

      grid.querySelectorAll('[data-gidx]').forEach(btn => {
        btn.addEventListener('click', () => {
          const idx = Number(btn.getAttribute('data-gidx') || '0');
          openGalleryModal(idx);
        });
      });
    }

    function openGalleryById(id){
      const idx = GALLERY_ITEMS.findIndex(x => x.id === id);
      openGalleryModal(Math.max(0, idx));
    }

    function openGalleryModal(idx){
      galleryIndex = Math.min(GALLERY_ITEMS.length - 1, Math.max(0, idx));
      const modal = document.getElementById('gallery-modal');
      document.body.style.overflow = 'hidden';
      modal.classList.add('open');
      hydrateGalleryModal();
      lucide.createIcons();
    }

    function hydrateGalleryModal(){
      const it = GALLERY_ITEMS[galleryIndex];
      if(!it) return;
      document.getElementById('galleryKicker').innerText = it.kind;
      document.getElementById('galleryTitle').innerText = it.title;
      document.getElementById('gallerySubtitle').innerText = it.subtitle;
      const img = document.getElementById('galleryImg');
      img.src = it.src;
      img.alt = it.title;
    }

    function closeGalleryModal(force=false){
      const m = document.getElementById('gallery-modal');
      if(!m.classList.contains('open') && !force) return;
      m.classList.remove('open');
      document.body.style.overflow = '';
    }

    function galleryPrev(){
      galleryIndex = (galleryIndex - 1 + GALLERY_ITEMS.length) % GALLERY_ITEMS.length;
      hydrateGalleryModal();
    }

    function galleryNext(){
      galleryIndex = (galleryIndex + 1) % GALLERY_ITEMS.length;
      hydrateGalleryModal();
    }

    document.getElementById('gallery-modal').addEventListener('click', (e) => {
      if (e.target.id === 'gallery-modal') closeGalleryModal();
    });

    function downloadCurrentGalleryImage(){
      const it = GALLERY_ITEMS[galleryIndex];
      if(!it) return;
      const a = document.createElement('a');
      a.href = it.src;
      a.download = it.src.split('/').pop();
      document.body.appendChild(a);
      a.click();
      a.remove();
    }

    // ---------------------------
    // Territory details (Home)
    // ---------------------------
    const territoryDetails = {
      ny:     {
        images: [
          "amada-resort-lagoon-aerial.png",
          "amada-estate-layout-map.png",
          "amada-resort-lagoon-street-view.png"
        ],
        subtitle: "Industrial luxury meets brownstone heritage — calm streets, controlled terraces, quiet prestige."
      },
      dubai:  {
        images: [
          "amada-modern-villas-street-palm-lined.png",
          "amada-luxury-villas-palm-lined-street.png",
          "amada-resort-lagoon-pool.png"
        ],
        subtitle: "Opulent minimalism — glass, white stone, and future-forward living with privacy zoning."
      },
      london: {
        images: [
          "amada-townhome-street-brick-close.png",
          "amada-townhome-street-brick.png",
          "amada-modern-villas-street.png"
        ],
        subtitle: "Timeless aristocracy — manicured hedges, regency calm, and discreet arrivals."
      },
      canada: {
        images: [
          "amada-estate-entrance-gate-aerial.png",
          "amada-masterplan-estate-aerial-angle.png",
          "amada-masterplan-estate-aerial.png"
        ],
        subtitle: "Cosmopolitan calm — clean lines, quiet power, and everyday ease."
      },
      naija:  {
        images: [
          "amada-estate-layout-map.png",
          "amada-estate-layout-collage-2x.png",
          "amada-masterplan-estate-aerial-angle.png"
        ],
        subtitle: "Boulevard elegance — timeless façades, discretion-first living, and quiet prestige."
      }
    };

    let terrSlideKey = null;
    let terrSlideIdx = 0;

    function terrImagesFor(key){
      const list = territoryDetails[key]?.images;
      return Array.isArray(list) && list.length ? list : [];
    }

    function renderTerrDots(images){
      const dots = document.getElementById('terrDots');
      if (!dots) return;
      dots.innerHTML = images.map((_, i) => `
        <button type="button" data-terr-dot="${i}"
                class="w-2.5 h-2.5 rounded-full ${i === terrSlideIdx ? 'bg-slate-900' : 'bg-white/70 border border-slate-300'}"
                aria-label="Go to image ${i+1}">
        </button>
      `).join('');

      dots.querySelectorAll('[data-terr-dot]').forEach(btn => {
        btn.addEventListener('click', () => {
          const idx = Number(btn.getAttribute('data-terr-dot') || '0');
          terrGoToSlide(idx);
        });
      });
    }

    function terrGoToSlide(idx){
      const images = terrImagesFor(terrSlideKey);
      if (!images.length) return;
      terrSlideIdx = Math.max(0, Math.min(images.length - 1, idx));
      const img = document.getElementById('terrImage');
      if (img) img.src = images[terrSlideIdx];
      renderTerrDots(images);
    }

    function terrStep(delta){
      const images = terrImagesFor(terrSlideKey);
      if (!images.length) return;
      const next = (terrSlideIdx + delta + images.length) % images.length;
      terrGoToSlide(next);
    }

    function fmtInt(n){
      return Math.round(Number(n || 0)).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }
    function sqftToSqm(sqft){
      return sqft / 10.7639;
    }
    function formatRange(values){
      const nums = values.filter(v => Number.isFinite(v));
      if (nums.length === 0) return null;
      const min = Math.min(...nums);
      const max = Math.max(...nums);
      return { min, max };
    }

    function territoryStats(key){
      const list = inventory.filter(u => u.territory === key);
      const byStatus = list.reduce((acc, u) => {
        acc[u.status] = (acc[u.status] || 0) + 1;
        return acc;
      }, { available: 0, reserved: 0, waitlist: 0 });

      const homes = list.filter(u => u.kind !== 'presidential-villa');
      const villa = list.find(u => u.kind === 'presidential-villa') || null;
      const homeSizes = homes.map(u => Number(u.size));
      const range = formatRange(homeSizes);

      return { total: list.length, byStatus, range, villa };
    }

    function openTerritoryModal(key){
      const modal = document.getElementById('territory-modal');
      const detail = territoryDetails[key] || {};
      const stats = territoryStats(key);

      document.body.style.overflow = 'hidden';
      modal.classList.add('open');

      document.getElementById('terrTitle').innerText = territoryMeta[key]?.label || 'Territory';
      document.getElementById('terrSubtitle').innerText = detail.subtitle || '';

      const img = document.getElementById('terrImage');
      terrSlideKey = key;
      terrSlideIdx = 0;
      const images = terrImagesFor(key);
      img.src = images[0] || '';
      img.alt = (territoryMeta[key]?.label || 'Territory') + ' image';
      renderTerrDots(images);

      document.getElementById('terrAvail').innerText = fmtInt(stats.byStatus.available || 0);
      document.getElementById('terrRes').innerText = fmtInt(stats.byStatus.reserved || 0);
      document.getElementById('terrTotal').innerText = fmtInt(stats.total || 0);

      const sizesEl = document.getElementById('terrSizes');
      if (stats.range) {
        const minSqm = Math.round(sqftToSqm(stats.range.min));
        const maxSqm = Math.round(sqftToSqm(stats.range.max));
        sizesEl.innerText = `${fmtInt(minSqm)}–${fmtInt(maxSqm)} sqm (${fmtInt(stats.range.min)}–${fmtInt(stats.range.max)} ft²)`;
      } else {
        sizesEl.innerText = '—';
      }

      const villaStatusEl = document.getElementById('terrVillaStatus');
      if (stats.villa) {
        villaStatusEl.innerText = statusLabel(stats.villa.status);
      } else {
        villaStatusEl.innerText = '—';
      }

      const villaSqft = Math.round(1400 * 10.7639);
      document.getElementById('terrVillaSize').innerText = `1,400 sqm (${fmtInt(villaSqft)} ft²)`;

      const btn = document.getElementById('terrToAssetsBtn');
      btn.onclick = () => {
        closeTerritoryModal(true);
        goToAssetsAndFocus(key);
      };

      lucide.createIcons();
    }

    function closeTerritoryModal(force=false){
      const m = document.getElementById('territory-modal');
      if(!m?.classList.contains('open') && !force) return;
      m?.classList.remove('open');
      document.body.style.overflow = '';
      terrSlideKey = null;
      terrSlideIdx = 0;
    }

    document.getElementById('territory-modal')?.addEventListener('click', (e) => {
      if (e.target.id === 'territory-modal') closeTerritoryModal();
    });

    document.getElementById('terrPrev')?.addEventListener('click', () => terrStep(-1));
    document.getElementById('terrNext')?.addEventListener('click', () => terrStep(1));

    (function wireTerritorySwipe(){
      const slider = document.getElementById('terrSlider');
      if (!slider) return;
      let startX = null;
      slider.addEventListener('touchstart', (e) => {
        startX = e.touches?.[0]?.clientX ?? null;
      }, { passive: true });
      slider.addEventListener('touchend', (e) => {
        if (startX == null) return;
        const endX = e.changedTouches?.[0]?.clientX ?? startX;
        const dx = endX - startX;
        startX = null;
        if (Math.abs(dx) < 36) return;
        terrStep(dx > 0 ? -1 : 1);
      });
    })();

    // ---------------------------
    // PDF (print-to-pdf window) for selected unit
    // ---------------------------
    function openPrintWindow(htmlTitle, htmlBody){
      const w = window.open('', '_blank', 'width=900,height=1100');
      if(!w) return;

      const html = `<!doctype html><html><head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <title>${htmlTitle}</title>
        <style>
          body{font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; padding:40px; color:#0f172a;}
          h1{font-family: Georgia, serif; margin:0 0 8px 0; font-size:34px;}
          h2{margin:0 0 18px 0; font-weight:600; color:#334155;}
          .pill{display:inline-block; padding:6px 12px; border:1px solid #cbd5e1; border-radius:999px; font-size:12px; letter-spacing:.18em; text-transform:uppercase; color:#475569; margin:8px 8px 0 0;}
          .box{border:1px solid #e2e8f0; border-radius:18px; padding:18px; margin-top:18px;}
          .grid{display:grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap:14px;}
          .k{font-size:10px; letter-spacing:.2em; text-transform:uppercase; color:#64748b; font-weight:800;}
          .v{font-size:14px; margin-top:4px;}
          .foot{margin-top:28px; font-size:12px; color:#64748b;}
          .brand{margin-top:26px; font-size:11px; letter-spacing:.2em; text-transform:uppercase; color:#94a3b8;}
          svg{max-width:100%; height:auto;}
        </style>
      </head><body>
        ${htmlBody}
        <div class="foot">Tip: Use Print → “Save as PDF”.</div>
        <div class="brand">AMADA REALTY • Confidential Dossier</div>
      </body></html>`;

      w.document.open();
      w.document.write(html);
      w.document.close();

      w.onload = () => setTimeout(() => { try { w.focus(); w.print(); } catch(e){} }, 350);
      setTimeout(() => { try { w.focus(); w.print(); } catch(e){} }, 900);
    }

    function downloadSelectedDossierPDF(){
      if(!selectedUnit) return;

      const terrLabel = territoryMeta[selectedUnit.territory].label;
      const cfg = getInteriorConfigForUnit(selectedUnit);
      const totals = getInteriorTotals(cfg);

      const body = `
        <div class="pill">Asset Dossier</div>
        <h1>${selectedUnit.id} • ${terrLabel}</h1>
        <h2>${statusLabel(selectedUnit.status)} • ${formatUSD(selectedUnit.price)}</h2>

        <div class="box">
          <div class="grid">
            <div><div class="k">Territory</div><div class="v">${terrLabel}</div></div>
            <div><div class="k">Status</div><div class="v">${statusLabel(selectedUnit.status)}</div></div>
            <div><div class="k">Beds / Baths</div><div class="v">${totals.bedrooms} / ${totals.bathrooms}</div></div>
            <div><div class="k">Size</div><div class="v">${selectedUnit.size.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")} ft²</div></div>
          </div>
        </div>

        <div class="box">
          <div class="k">Floor Plan Preview</div>
          <div class="v" style="margin-top:12px;">${buildInteriorPlan(selectedUnit, cfg, { compact:false, forPrint:true })}</div>
        </div>

        <div class="box">
          <div class="k">Confidentiality</div>
          <div class="v" style="line-height:1.7;">
            This dossier is invitation-grade. Distribution is prohibited. Viewing rights and purchase access are subject to PR Card approval.
          </div>
        </div>
      `;

      openPrintWindow(`${selectedUnit.id} Dossier`, body);
    }

    function wireFlipBoxes(){
      const isCoarsePointer = window.matchMedia('(hover: none), (pointer: coarse)').matches;
      document.querySelectorAll('.flip-box').forEach(box => {
        if (!isCoarsePointer) {
          box.classList.remove('is-flipped');
          box.removeAttribute('aria-pressed');
          return;
        }

        const syncPressed = () => box.setAttribute('aria-pressed', box.classList.contains('is-flipped') ? 'true' : 'false');
        syncPressed();

        box.addEventListener('click', () => {
          box.classList.toggle('is-flipped');
          syncPressed();
        });
        box.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            box.classList.toggle('is-flipped');
            syncPressed();
          }
          if (e.key === 'Escape') {
            box.classList.remove('is-flipped');
            syncPressed();
            box.blur?.();
          }
        });
        box.addEventListener('focusout', (e) => {
          if (!box.contains(e.relatedTarget)) {
            box.classList.remove('is-flipped');
            syncPressed();
          }
        });
      });
    }

    // ---------------------------
    // Init
    // ---------------------------
    document.addEventListener('DOMContentLoaded', () => {
      syncCityMapFallback();
      renderCityHotspots();
      startHeroRotation();
      wireFlipBoxes();
      lucide.createIcons();
    });

    // ESC close + Gallery arrows
    window.addEventListener('keydown', (e)=>{
      if(e.key === 'Escape'){
        closeMobileMenu(true);
        closeLegal(true);
        closeFloorplanModal(true);
        closeGalleryModal(true);
        closeTerritoryModal(true);
      }
      const gm = document.getElementById('gallery-modal');
      if(gm?.classList.contains('open')){
        if(e.key === 'ArrowLeft') galleryPrev();
        if(e.key === 'ArrowRight') galleryNext();
      }
      const tm = document.getElementById('territory-modal');
      if (tm?.classList.contains('open')) {
        if (e.key === 'ArrowLeft') terrStep(-1);
        if (e.key === 'ArrowRight') terrStep(1);
      }
    });

    function wireTerritoryCards(){
      document.querySelectorAll('[data-territory-card]').forEach(el => {
        const key = el.getAttribute('data-territory-card');
        if (!key) return;
        el.addEventListener('click', () => openTerritoryModal(key));
        el.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            openTerritoryModal(key);
          }
        });
      });
    }

    document.addEventListener('DOMContentLoaded', () => {
      wireTerritoryCards();
    });
  </script>
</body>
</html>
